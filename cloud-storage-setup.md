# äº‘å­˜å‚¨é…ç½®æŒ‡å—

## ğŸ“ å­˜å‚¨æ–‡ä»¶å¤¹ç»“æ„

```
cloud-storage/
â”œâ”€â”€ avatars/                    # ç”¨æˆ·å¤´åƒå›¾ç‰‡
â”‚   â”œâ”€â”€ user_{openid}.jpg      # ç”¨æˆ·å¤´åƒæ–‡ä»¶
â”‚   â””â”€â”€ default.png            # é»˜è®¤å¤´åƒ
â”œâ”€â”€ health-images/              # å¥åº·è®°å½•ç›¸å…³å›¾ç‰‡
â”‚   â”œâ”€â”€ symptoms/              # ç—‡çŠ¶å›¾ç‰‡
â”‚   â”œâ”€â”€ treatment/             # æ²»ç–—è¿‡ç¨‹å›¾ç‰‡
â”‚   â””â”€â”€ recovery/              # æ¢å¤æƒ…å†µå›¾ç‰‡
â”œâ”€â”€ ai-diagnosis-images/        # AIè¯Šæ–­ç›¸å…³å›¾ç‰‡
â”‚   â”œâ”€â”€ input/                 # è¯Šæ–­è¾“å…¥å›¾ç‰‡
â”‚   â””â”€â”€ analysis/              # åˆ†æç»“æœå›¾ç‰‡
â”œâ”€â”€ production-images/          # ç”Ÿäº§è®°å½•å›¾ç‰‡
â”‚   â”œâ”€â”€ entry/                 # å…¥æ å›¾ç‰‡
â”‚   â”œâ”€â”€ exit/                  # å‡ºæ å›¾ç‰‡
â”‚   â””â”€â”€ daily/                 # æ—¥å¸¸ç®¡ç†å›¾ç‰‡
â”œâ”€â”€ material-images/            # ç‰©æ–™ç›¸å…³å›¾ç‰‡
â”‚   â”œâ”€â”€ feed/                  # é¥²æ–™å›¾ç‰‡
â”‚   â”œâ”€â”€ medicine/              # è¯å“å›¾ç‰‡
â”‚   â””â”€â”€ equipment/             # è®¾å¤‡å›¾ç‰‡
â”œâ”€â”€ weather-images/             # å¤©æ°”ç›¸å…³å›¾ç‰‡
â”‚   â””â”€â”€ conditions/            # å¤©æ°”çŠ¶å†µå›¾ç‰‡
â”œâ”€â”€ documents/                  # æ–‡æ¡£æ–‡ä»¶
â”‚   â”œâ”€â”€ reports/               # æŠ¥å‘Šæ–‡ä»¶
â”‚   â”œâ”€â”€ certificates/          # è¯ä¹¦æ–‡ä»¶
â”‚   â””â”€â”€ manuals/              # ä½¿ç”¨æ‰‹å†Œ
â””â”€â”€ exports/                   # å¯¼å‡ºæ–‡ä»¶
    â”œâ”€â”€ health-data/          # å¥åº·æ•°æ®å¯¼å‡º
    â”œâ”€â”€ production-data/      # ç”Ÿäº§æ•°æ®å¯¼å‡º
    â””â”€â”€ user-data/           # ç”¨æˆ·æ•°æ®å¯¼å‡º
```

## ğŸ” å­˜å‚¨æƒé™é…ç½®

### åŸºç¡€æƒé™è®¾ç½®
```json
{
  "read": true,
  "write": "resource.openid == auth.openid"
}
```

### è¯¦ç»†æƒé™é…ç½®

| æ–‡ä»¶å¤¹ | è¯»æƒé™ | å†™æƒé™ | è¯´æ˜ |
|--------|--------|--------|------|
| `avatars/` | âœ… å…¬å¼€è¯»å– | âœ… ä»…æ–‡ä»¶æ‰€æœ‰è€… | ç”¨æˆ·å¤´åƒ |
| `health-images/` | âœ… ä»…æ–‡ä»¶æ‰€æœ‰è€… | âœ… ä»…æ–‡ä»¶æ‰€æœ‰è€… | å¥åº·è®°å½•å›¾ç‰‡ |
| `ai-diagnosis-images/` | âœ… ä»…æ–‡ä»¶æ‰€æœ‰è€… | âœ… ä»…æ–‡ä»¶æ‰€æœ‰è€… | AIè¯Šæ–­å›¾ç‰‡ |
| `production-images/` | âœ… ä»…æ–‡ä»¶æ‰€æœ‰è€… | âœ… ä»…æ–‡ä»¶æ‰€æœ‰è€… | ç”Ÿäº§è®°å½•å›¾ç‰‡ |
| `material-images/` | âœ… ä»…æ–‡ä»¶æ‰€æœ‰è€… | âœ… ä»…æ–‡ä»¶æ‰€æœ‰è€… | ç‰©æ–™å›¾ç‰‡ |
| `weather-images/` | âœ… å…¬å¼€è¯»å– | âŒ ä»…äº‘å‡½æ•° | å¤©æ°”å›¾ç‰‡ |
| `documents/` | âœ… ä»…æ–‡ä»¶æ‰€æœ‰è€… | âœ… ä»…æ–‡ä»¶æ‰€æœ‰è€… | æ–‡æ¡£æ–‡ä»¶ |
| `exports/` | âœ… ä»…æ–‡ä»¶æ‰€æœ‰è€… | âŒ ä»…äº‘å‡½æ•° | å¯¼å‡ºæ–‡ä»¶ |

## ğŸ“‹ é…ç½®æ­¥éª¤

### 1. åˆ›å»ºå­˜å‚¨ç¯å¢ƒ
1. ç™»å½•**å¾®ä¿¡äº‘å¼€å‘æ§åˆ¶å°**
2. è¿›å…¥**å­˜å‚¨**æ¨¡å—
3. ç‚¹å‡»"æ–°å»ºæ–‡ä»¶å¤¹"

### 2. åˆ›å»ºæ–‡ä»¶å¤¹ç»“æ„
æŒ‰ç…§ä¸Šè¿°ç›®å½•ç»“æ„é€çº§åˆ›å»ºæ–‡ä»¶å¤¹

### 3. é…ç½®æ–‡ä»¶å¤¹æƒé™
ä¸ºæ¯ä¸ªæ–‡ä»¶å¤¹è®¾ç½®é€‚å½“çš„æƒé™è§„åˆ™

### 4. ä¸Šä¼ é»˜è®¤æ–‡ä»¶
ä¸Šä¼ é»˜è®¤å¤´åƒç­‰å¿…è¦çš„åˆå§‹æ–‡ä»¶

## ğŸ”§ æƒé™è§„åˆ™è¯¦è§£

### ç”¨æˆ·å¤´åƒæƒé™ (avatars/)
```json
{
  "read": true,
  "write": "resource.openid == auth.openid"
}
```
- **è¯»æƒé™**ï¼šå…¬å¼€ï¼Œæ‰€æœ‰ç”¨æˆ·å¯æŸ¥çœ‹å¤´åƒ
- **å†™æƒé™**ï¼šä»…æ–‡ä»¶æ‰€æœ‰è€…å¯ä¿®æ”¹

### ç§æœ‰å›¾ç‰‡æƒé™ (health-images/, production-images/ ç­‰)
```json
{
  "read": "resource.openid == auth.openid",
  "write": "resource.openid == auth.openid"
}
```
- **è¯»å†™æƒé™**ï¼šä»…æ–‡ä»¶æ‰€æœ‰è€…å¯è®¿é—®

### ç³»ç»Ÿæ–‡ä»¶æƒé™ (exports/, weather-images/)
```json
{
  "read": "resource.openid == auth.openid",
  "write": false
}
```
- **è¯»æƒé™**ï¼šä»…æ–‡ä»¶æ‰€æœ‰è€…å¯è¯»å–
- **å†™æƒé™**ï¼šä»…äº‘å‡½æ•°å¯å†™å…¥

## ğŸ“ æ–‡ä»¶å‘½åè§„èŒƒ

### ç”¨æˆ·ç›¸å…³æ–‡ä»¶
```
{openid}_{timestamp}_{type}.{ext}
ä¾‹ï¼šoxxx123_1640995200000_avatar.jpg
```

### è®°å½•ç›¸å…³æ–‡ä»¶
```
{record_type}_{record_id}_{index}.{ext}
ä¾‹ï¼šhealth_H123456_001.jpg
```

### å¯¼å‡ºæ–‡ä»¶
```
{data_type}_export_{timestamp}.{ext}
ä¾‹ï¼šhealth_data_export_1640995200000.xlsx
```

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **æ–‡ä»¶å¤§å°é™åˆ¶**
   - å•ä¸ªæ–‡ä»¶æœ€å¤§ 100MB
   - å›¾ç‰‡å»ºè®®å‹ç¼©åä¸Šä¼ 

2. **æ–‡ä»¶æ ¼å¼å»ºè®®**
   - å›¾ç‰‡ï¼šJPG, PNG, WEBP
   - æ–‡æ¡£ï¼šPDF, DOC, XLSX
   - å¯¼å‡ºï¼šJSON, CSV, XLSX

3. **å®‰å…¨å»ºè®®**
   - å®šæœŸæ¸…ç†ä¸´æ—¶æ–‡ä»¶
   - ç›‘æ§å­˜å‚¨ä½¿ç”¨é‡
   - å¤‡ä»½é‡è¦æ•°æ®

4. **æ€§èƒ½ä¼˜åŒ–**
   - ä½¿ç”¨CDNåŠ é€Ÿè®¿é—®
   - å›¾ç‰‡æ‡’åŠ è½½
   - å®šæœŸæ¸…ç†æ— ç”¨æ–‡ä»¶
