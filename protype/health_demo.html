<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>健康管理中心 - 完整版原型</title>
    
    <style>
        /* === TDesign 设计token === */
        :root {
            /* 主色调 */
            --td-brand-color: #0052D9;
            --td-brand-color-1: #F2F8FF;
            --td-brand-color-2: #D9E7FF;
            --td-brand-color-3: #B3D1FF;
            --td-brand-color-8: #003CAB;
            --td-brand-color-9: #002E7D;
            
            /* 功能色 */
            --td-success-color: #00A870;
            --td-success-color-1: #F0F9F5;
            --td-success-color-2: #D6F5E3;
            
            --td-warning-color: #ED7B2F;
            --td-warning-color-1: #FFF4F0;
            --td-warning-color-2: #FFE5D9;
            
            --td-error-color: #E34D59;
            --td-error-color-1: #FFF0F1;
            --td-error-color-2: #FFD9DD;
            
            /* 中性色 */
            --td-text-color-primary: #000000;
            --td-text-color-secondary: #4C5161;
            --td-text-color-placeholder: #A6A6A6;
            --td-text-color-disabled: #DCDCDC;
            
            --td-bg-color-page: #F5F7FA;
            --td-bg-color-container: #FFFFFF;
            --td-bg-color-secondarycontainer: #F5F7FA;
            
            /* 边框色 */
            --td-border-level-1-color: #E7E7E7;
            --td-border-level-2-color: #EEEEEE;
            
            /* 圆角 */
            --td-radius-small: 3px;
            --td-radius-default: 6px;
            --td-radius-medium: 9px;
            --td-radius-large: 12px;
            --td-radius-round: 999px;
            
            /* 间距 */
            --td-spacer: 2px;
            --td-spacer-1: 4px;
            --td-spacer-2: 6px;
            --td-spacer-3: 8px;
            --td-spacer-4: 12px;
            --td-spacer-5: 16px;
            --td-spacer-6: 24px;
            
            /* 阴影 */
            --td-shadow-1: 0 1px 10px 0 rgba(0, 0, 0, 0.05), 0 4px 5px 0 rgba(0, 0, 0, 0.08), 0 2px 4px -1px rgba(0, 0, 0, 0.12);
            --td-shadow-2: 0 3px 14px 2px rgba(0, 0, 0, 0.05), 0 8px 10px 1px rgba(0, 0, 0, 0.06), 0 5px 5px -3px rgba(0, 0, 0, 0.1);
            --td-shadow-3: 0 6px 16px 0 rgba(0, 0, 0, 0.08), 0 3px 6px -4px rgba(0, 0, 0, 0.12), 0 9px 28px 8px rgba(0, 0, 0, 0.05);
            
            /* 字体 */
            --td-font-size-s: 12px;
            --td-font-size-base: 14px;
            --td-font-size-m: 16px;
            --td-font-size-l: 18px;
            --td-font-size-xl: 20px;
            --td-font-size-xxl: 36px;
            
            --td-line-height-s: 20px;
            --td-line-height-base: 22px;
            --td-line-height-m: 24px;
            --td-line-height-l: 26px;
            --td-line-height-xl: 28px;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;
            font-size: var(--td-font-size-base);
            line-height: var(--td-line-height-base);
            color: var(--td-text-color-primary);
            background: var(--td-bg-color-page);
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            overflow-x: hidden;
        }

        /* === 页面容器 === */
        .app-container {
            width: 100vw;
            height: 100vh;
            position: relative;
            overflow: hidden;
        }
        
        .page {
            position: absolute;
            width: 100%;
            height: 100%;
            background: var(--td-bg-color-page);
            transition: transform 0.3s ease;
            overflow-y: auto;
            transform: translateX(100%);
        }
        
        .page.active {
            transform: translateX(0);
            z-index: 1;
        }
        
        .page:not(.active) {
            z-index: 0;
        }

        /* === 微信小程序导航栏 === */
        .mp-navbar {
            position: sticky;
            top: 0;
            z-index: 1000;
            background: var(--td-brand-color);
            color: #FFFFFF;
            padding-top: 24px;
        }
        
        .mp-navbar-content {
            height: 44px;
            display: flex;
            align-items: center;
            padding: 0 var(--td-spacer-3);
            position: relative;
        }
        
        .mp-navbar-back {
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: var(--td-radius-round);
            background: rgba(255, 255, 255, 0.15);
            font-size: 18px;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .mp-navbar-back:active {
            background: rgba(255, 255, 255, 0.25);
            transform: scale(0.95);
        }
        
        .mp-navbar-title {
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            font-size: var(--td-font-size-m);
            font-weight: 500;
        }
        
        .mp-navbar-actions {
            margin-left: auto;
            display: flex;
            gap: var(--td-spacer-1);
        }
        
        .mp-navbar-action {
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: var(--td-radius-round);
            background: rgba(255, 255, 255, 0.15);
            font-size: 16px;
            cursor: pointer;
            transition: all 0.2s;
        }

        /* === TDesign 组件样式 === */
        .t-card {
            background: var(--td-bg-color-container);
            border-radius: var(--td-radius-large);
            margin-bottom: var(--td-spacer-3);
            box-shadow: var(--td-shadow-1);
            overflow: hidden;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .t-card:active {
            transform: translateY(1px);
            box-shadow: var(--td-shadow-2);
        }
        
        .t-card__header {
            padding: var(--td-spacer-3) var(--td-spacer-3) 0;
            font-size: var(--td-font-size-m);
            font-weight: 500;
            color: var(--td-text-color-primary);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .t-card__content {
            padding: var(--td-spacer-2) var(--td-spacer-3) var(--td-spacer-3);
        }

        /* === 概览卡片 === */
        .overview-section {
            padding: var(--td-spacer-3);
            margin-bottom: var(--td-spacer-2);
        }
        
        .overview-grid {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: var(--td-spacer-1);
        }
        
        .overview-card {
            background: var(--td-bg-color-container);
            border-radius: var(--td-radius-large);
            padding: var(--td-spacer-4) var(--td-spacer-2);
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
            box-shadow: var(--td-shadow-1);
            position: relative;
            overflow: hidden;
        }
        
        .overview-card:active {
            transform: translateY(1px);
            box-shadow: var(--td-shadow-2);
        }
        
        .overview-card.primary {
            background: linear-gradient(135deg, var(--td-brand-color) 0%, var(--td-brand-color-8) 100%);
            color: #FFFFFF;
        }
        
        .overview-card.success {
            background: linear-gradient(135deg, var(--td-success-color) 0%, #007A5A 100%);
            color: #FFFFFF;
        }
        
        .overview-card.warning {
            background: linear-gradient(135deg, var(--td-warning-color) 0%, #CC6A29 100%);
            color: #FFFFFF;
        }
        
        .overview-card__value {
            font-size: var(--td-font-size-xl);
            font-weight: 600;
            line-height: var(--td-line-height-xl);
            margin-bottom: var(--td-spacer);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: var(--td-spacer);
        }
        
        .overview-card__label {
            font-size: var(--td-font-size-s);
            opacity: 0.9;
            font-weight: 400;
        }
        
        .overview-card__trend {
            font-size: var(--td-font-size-s);
        }

        /* === Tabs === */
        .t-tabs {
            background: var(--td-bg-color-container);
            margin: 0 var(--td-spacer-3) var(--td-spacer-3);
            border-radius: var(--td-radius-large);
            box-shadow: var(--td-shadow-1);
            overflow: hidden;
        }
        
        .t-tabs__nav {
            display: flex;
            background: var(--td-bg-color-secondarycontainer);
            margin: var(--td-spacer);
            border-radius: var(--td-radius-medium);
            position: relative;
        }
        
        .t-tabs__nav-item {
            flex: 1;
            text-align: center;
            padding: var(--td-spacer-2) var(--td-spacer-1);
            font-size: var(--td-font-size-s);
            color: var(--td-text-color-secondary);
            cursor: pointer;
            border-radius: var(--td-radius-medium);
            transition: all 0.2s;
            position: relative;
            z-index: 1;
        }
        
        .t-tabs__nav-item.active {
            background: var(--td-brand-color);
            color: #FFFFFF;
            font-weight: 500;
            box-shadow: var(--td-shadow-1);
        }
        
        .t-tabs__content {
            padding: 0 var(--td-spacer-3) var(--td-spacer-3);
        }
        
        .t-tabs__panel {
            display: none;
        }
        
        .t-tabs__panel.active {
            display: block;
        }

        /* === 按钮 === */
        .t-button {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: var(--td-spacer-1);
            padding: var(--td-spacer-2) var(--td-spacer-3);
            border: none;
            border-radius: var(--td-radius-default);
            font-size: var(--td-font-size-base);
            font-weight: 400;
            cursor: pointer;
            transition: all 0.2s;
            text-decoration: none;
            box-sizing: border-box;
            position: relative;
            overflow: hidden;
        }
        
        .t-button:active {
            transform: translateY(1px);
        }
        
        .t-button--primary {
            background: var(--td-brand-color);
            color: #FFFFFF;
        }
        
        .t-button--default {
            background: var(--td-bg-color-container);
            color: var(--td-text-color-primary);
            border: 1px solid var(--td-border-level-1-color);
        }
        
        .t-button--success {
            background: var(--td-success-color);
            color: #FFFFFF;
        }
        
        .t-button--warning {
            background: var(--td-warning-color);
            color: #FFFFFF;
        }
        
        .t-button--ghost {
            background: transparent;
            color: var(--td-brand-color);
            border: 1px solid var(--td-brand-color);
        }
        
        .t-button--small {
            padding: var(--td-spacer-1) var(--td-spacer-2);
            font-size: var(--td-font-size-s);
        }
        
        .t-button--block {
            width: 100%;
        }

        /* === Grid布局 === */
        .t-grid {
            display: grid;
            gap: var(--td-spacer-2);
        }
        
        .t-grid--2 {
            grid-template-columns: 1fr 1fr;
        }
        
        .t-grid--3 {
            grid-template-columns: 1fr 1fr 1fr;
        }

        /* === 列表组件 === */
        .t-list {
            background: var(--td-bg-color-container);
        }
        
        .t-list-item {
            display: flex;
            align-items: center;
            padding: var(--td-spacer-3);
            border-bottom: 1px solid var(--td-border-level-2-color);
            transition: background 0.2s;
            cursor: pointer;
        }
        
        .t-list-item:last-child {
            border-bottom: none;
        }
        
        .t-list-item:active {
            background: var(--td-bg-color-secondarycontainer);
        }
        
        .t-list-item__content {
            flex: 1;
        }
        
        .t-list-item__title {
            font-size: var(--td-font-size-base);
            font-weight: 500;
            color: var(--td-text-color-primary);
            margin-bottom: var(--td-spacer);
        }
        
        .t-list-item__description {
            font-size: var(--td-font-size-s);
            color: var(--td-text-color-secondary);
            line-height: var(--td-line-height-s);
        }
        
        .t-list-item__action {
            margin-left: var(--td-spacer-2);
        }

        /* === 标签 === */
        .t-tag {
            display: inline-flex;
            align-items: center;
            padding: var(--td-spacer) var(--td-spacer-1);
            border-radius: var(--td-radius-small);
            font-size: var(--td-font-size-s);
            font-weight: 400;
            line-height: 1;
        }
        
        .t-tag--success {
            background: var(--td-success-color-1);
            color: var(--td-success-color);
        }
        
        .t-tag--warning {
            background: var(--td-warning-color-1);
            color: var(--td-warning-color);
        }
        
        .t-tag--error {
            background: var(--td-error-color-1);
            color: var(--td-error-color);
        }
        
        .t-tag--primary {
            background: var(--td-brand-color-1);
            color: var(--td-brand-color);
        }

        /* === 进度条 === */
        .t-progress {
            width: 100%;
            height: 8px;
            background: var(--td-bg-color-secondarycontainer);
            border-radius: var(--td-radius-small);
            overflow: hidden;
            margin: var(--td-spacer-1) 0;
        }
        
        .t-progress__bar {
            height: 100%;
            background: var(--td-brand-color);
            border-radius: var(--td-radius-small);
            transition: width 0.3s ease;
        }
        
        .t-progress__bar--success {
            background: var(--td-success-color);
        }

        /* === 图表样式 === */
        .chart-container {
            background: var(--td-bg-color-container);
            border-radius: var(--td-radius-large);
            padding: var(--td-spacer-3);
            margin: var(--td-spacer-3) 0;
            box-shadow: var(--td-shadow-1);
        }

        /* 饼图 */
        .pie-chart {
            width: 200px;
            height: 200px;
            border-radius: 50%;
            margin: 20px auto;
            position: relative;
            background: conic-gradient(
                #E34D59 0deg 144deg,
                #ED7B2F 144deg 252deg,
                #00A870 252deg 324deg,
                #CCCCCC 324deg 360deg
            );
            animation: pie-spin 2s ease-in-out;
        }

        .pie-chart::after {
            content: '';
            width: 120px;
            height: 120px;
            background: var(--td-bg-color-container);
            border-radius: 50%;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        @keyframes pie-spin {
            from { transform: rotate(-90deg); }
            to { transform: rotate(0deg); }
        }

        /* 柱状图 */
        .bar-chart {
            display: flex;
            align-items: end;
            justify-content: space-around;
            height: 200px;
            padding: 20px 10px;
            gap: 10px;
        }

        .bar-chart__item {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
        }

        .bar-chart__bar {
            width: 100%;
            max-width: 40px;
            background: var(--td-brand-color);
            border-radius: 4px 4px 0 0;
            transition: height 1s ease;
            position: relative;
            animation: bar-grow 1.5s ease-out;
        }

        .bar-chart__bar--success {
            background: var(--td-success-color);
        }

        .bar-chart__bar--warning {
            background: var(--td-warning-color);
        }

        .bar-chart__bar--error {
            background: var(--td-error-color);
        }

        @keyframes bar-grow {
            from { height: 0 !important; }
        }

        .bar-chart__label {
            font-size: var(--td-font-size-s);
            color: var(--td-text-color-secondary);
            text-align: center;
        }

        /* 折线图 */
        .line-chart {
            width: 100%;
            height: 200px;
            position: relative;
            background: linear-gradient(to right, transparent 0%, transparent 20%, var(--td-border-level-2-color) 20%, var(--td-border-level-2-color) 20.5%, transparent 20.5%, transparent 40%, var(--td-border-level-2-color) 40%, var(--td-border-level-2-color) 40.5%, transparent 40.5%, transparent 60%, var(--td-border-level-2-color) 60%, var(--td-border-level-2-color) 60.5%, transparent 60.5%, transparent 80%, var(--td-border-level-2-color) 80%, var(--td-border-level-2-color) 80.5%, transparent 80.5%);
        }

        .line-chart svg {
            width: 100%;
            height: 100%;
        }

        .line-chart__line {
            fill: none;
            stroke: var(--td-brand-color);
            stroke-width: 3;
            stroke-dasharray: 300;
            stroke-dashoffset: 300;
            animation: line-draw 2s ease-in-out forwards;
        }

        .line-chart__point {
            fill: var(--td-brand-color);
            r: 4;
            opacity: 0;
            animation: point-appear 0.5s ease-in-out forwards;
        }

        @keyframes line-draw {
            to { stroke-dashoffset: 0; }
        }

        @keyframes point-appear {
            to { opacity: 1; }
        }

        /* 环形进度图 */
        .ring-progress {
            width: 120px;
            height: 120px;
            margin: 20px auto;
            position: relative;
        }

        .ring-progress svg {
            width: 100%;
            height: 100%;
            transform: rotate(-90deg);
        }

        .ring-progress__track {
            fill: none;
            stroke: var(--td-bg-color-secondarycontainer);
            stroke-width: 8;
        }

        .ring-progress__bar {
            fill: none;
            stroke: var(--td-success-color);
            stroke-width: 8;
            stroke-linecap: round;
            stroke-dasharray: 314;
            stroke-dashoffset: 314;
            animation: ring-fill 2s ease-in-out forwards;
        }

        @keyframes ring-fill {
            to { stroke-dashoffset: 31.4; }
        }

        .ring-progress__text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: var(--td-font-size-l);
            font-weight: 600;
            color: var(--td-success-color);
        }

        /* === 表单样式 === */
        .form-section {
            margin-bottom: var(--td-spacer-3);
        }
        
        .section-header {
            padding: 0 var(--td-spacer-3) var(--td-spacer-2);
            display: flex;
            align-items: center;
        }
        
        .section-title {
            font-size: var(--td-font-size-m);
            font-weight: 600;
            color: var(--td-text-color-primary);
            position: relative;
        }
        
        .section-title::before {
            content: '';
            width: 3px;
            height: 14px;
            background: var(--td-brand-color);
            border-radius: 1.5px;
            margin-right: var(--td-spacer-1);
            display: inline-block;
            vertical-align: middle;
        }
        
        .form-card {
            background: var(--td-bg-color-container);
            border-radius: var(--td-radius-large);
            margin: var(--td-spacer-3);
            padding: var(--td-spacer-4);
            box-shadow: var(--td-shadow-1);
            border: 1px solid var(--td-border-level-1-color);
        }
        
        .form-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: var(--td-spacer-2) 0;
            border-bottom: 1px solid var(--td-border-level-2-color);
        }
        
        .form-item:last-child {
            border-bottom: none;
        }
        
        .form-label {
            font-size: var(--td-font-size-base);
            font-weight: 500;
            color: var(--td-text-color-primary);
        }
        
        .form-value {
            font-size: var(--td-font-size-base);
            color: var(--td-text-color-secondary);
        }

        .form-input {
            border: 1px solid var(--td-border-level-1-color);
            border-radius: var(--td-radius-default);
            padding: var(--td-spacer-2);
            font-size: var(--td-font-size-base);
            color: var(--td-text-color-primary);
            background: var(--td-bg-color-container);
            width: 100%;
            max-width: 200px;
        }

        .form-input:focus {
            outline: none;
            border-color: var(--td-brand-color);
            box-shadow: 0 0 0 2px var(--td-brand-color-1);
        }

        .form-textarea {
            border: 1px solid var(--td-border-level-1-color);
            border-radius: var(--td-radius-default);
            padding: var(--td-spacer-2);
            font-size: var(--td-font-size-base);
            color: var(--td-text-color-primary);
            background: var(--td-bg-color-container);
            width: 100%;
            min-height: 80px;
            resize: vertical;
        }

        .form-textarea:focus {
            outline: none;
            border-color: var(--td-brand-color);
            box-shadow: 0 0 0 2px var(--td-brand-color-1);
        }

        /* === 数据行 === */
        .data-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: var(--td-spacer-1) 0;
        }
        
        .data-row__label {
            font-size: var(--td-font-size-base);
            color: var(--td-text-color-secondary);
        }
        
        .data-row__value {
            font-size: var(--td-font-size-base);
            font-weight: 500;
            color: var(--td-text-color-primary);
        }

        /* === 统计卡片 === */
        .stat-card {
            text-align: center;
            padding: var(--td-spacer-4);
            border-radius: var(--td-radius-large);
            background: var(--td-bg-color-container);
            border: 1px solid var(--td-border-level-2-color);
            transition: all 0.2s;
            cursor: pointer;
        }
        
        .stat-card:active {
            transform: translateY(1px);
            box-shadow: var(--td-shadow-1);
        }
        
        .stat-card__value {
            font-size: var(--td-font-size-xxl);
            font-weight: 600;
            margin-bottom: var(--td-spacer-1);
        }
        
        .stat-card__label {
            font-size: var(--td-font-size-s);
            color: var(--td-text-color-secondary);
        }
        
        .stat-card--primary .stat-card__value {
            color: var(--td-brand-color);
        }
        
        .stat-card--success .stat-card__value {
            color: var(--td-success-color);
        }
        
        .stat-card--warning .stat-card__value {
            color: var(--td-warning-color);
        }
        
        .stat-card--error .stat-card__value {
            color: var(--td-error-color);
        }

        /* === 通用样式 === */
        .page-content {
            padding-bottom: var(--td-spacer-4);
        }

        .page-subtitle {
            font-size: var(--td-font-size-s);
            color: var(--td-text-color-secondary);
            margin-bottom: var(--td-spacer-3);
            padding: 0 var(--td-spacer-3);
        }

        .text-center {
            text-align: center;
        }

        .text-success {
            color: var(--td-success-color);
        }

        .text-warning {
            color: var(--td-warning-color);
        }

        .text-error {
            color: var(--td-error-color);
        }

        /* === 消息提示 === */
        .t-message {
            padding: var(--td-spacer-2);
            border-radius: var(--td-radius-medium);
            margin-bottom: var(--td-spacer-2);
            display: flex;
            align-items: flex-start;
            gap: var(--td-spacer-1);
        }
        
        .t-message--info {
            background: var(--td-brand-color-1);
            border-left: 4px solid var(--td-brand-color);
        }
        
        .t-message--success {
            background: var(--td-success-color-1);
            border-left: 4px solid var(--td-success-color);
        }
        
        .t-message--warning {
            background: var(--td-warning-color-1);
            border-left: 4px solid var(--td-warning-color);
        }
        
        .t-message--error {
            background: var(--td-error-color-1);
            border-left: 4px solid var(--td-error-color);
        }
        
        .t-message__icon {
            font-size: var(--td-font-size-m);
            margin-top: 2px;
        }
        
        .t-message__content {
            flex: 1;
            font-size: var(--td-font-size-s);
            line-height: var(--td-line-height-s);
        }
        
        .t-message__title {
            font-weight: 500;
            margin-bottom: var(--td-spacer);
        }

        /* === 响应式 === */
        @media (max-width: 480px) {
            .overview-grid {
                grid-template-columns: 1fr;
                gap: var(--td-spacer-2);
            }
            
            .t-grid--2,
            .t-grid--3 {
                grid-template-columns: 1fr;
            }
            
            .form-item {
                flex-direction: column;
                align-items: stretch;
                gap: var(--td-spacer-1);
            }
        }

        /* === 搜索框 === */
        .search-box {
            background: var(--td-bg-color-container);
            border-radius: var(--td-radius-large);
            padding: var(--td-spacer-2);
            margin: var(--td-spacer-3);
            display: flex;
            align-items: center;
            gap: var(--td-spacer-1);
            box-shadow: var(--td-shadow-1);
        }

        .search-input {
            flex: 1;
            border: none;
            background: transparent;
            font-size: var(--td-font-size-base);
            color: var(--td-text-color-primary);
            outline: none;
        }

        .search-input::placeholder {
            color: var(--td-text-color-placeholder);
        }

        .search-icon {
            color: var(--td-text-color-placeholder);
            font-size: var(--td-font-size-m);
        }

        /* === 浮动按钮 === */
        .fab {
            position: fixed;
            right: 16px;
            bottom: 80px;
            width: 56px;
            height: 56px;
            border-radius: 50%;
            background: var(--td-brand-color);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            cursor: pointer;
            box-shadow: var(--td-shadow-3);
            z-index: 1000;
            transition: all 0.2s;
            border: none;
        }
        
        .fab:active {
            transform: scale(0.95);
        }

        /* === Loading === */
        .loading {
            display: flex;
            justify-content: center;
            align-items: center;
            padding: var(--td-spacer-6);
            color: var(--td-text-color-placeholder);
        }

        .loading-spinner {
            width: 20px;
            height: 20px;
            border: 2px solid var(--td-border-level-2-color);
            border-top: 2px solid var(--td-brand-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-right: var(--td-spacer-1);
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* === 触摸反馈 === */
        .tap-highlight {
            -webkit-tap-highlight-color: rgba(0, 0, 0, 0.1);
        }

        /* === 图标 === */
        .icon {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 24px;
            height: 24px;
            font-size: 16px;
            color: var(--td-text-color-secondary);
        }

        .icon--primary {
            color: var(--td-brand-color);
        }

        .icon--success {
            color: var(--td-success-color);
        }

        .icon--warning {
            color: var(--td-warning-color);
        }

        .icon--error {
            color: var(--td-error-color);
        }
    </style>
</head>

<body>
    <div class="app-container" id="app">
        <!-- 主页面：健康管理中心 -->
        <div class="page active" id="main-page">
            <!-- 微信小程序导航栏 -->
            <div class="mp-navbar">
                <div class="mp-navbar-content">
                    <div class="mp-navbar-back tap-highlight" onclick="goBack()">←</div>
                    <div class="mp-navbar-title">健康管理中心</div>
                    <div class="mp-navbar-actions">
                        <div class="mp-navbar-action tap-highlight" onclick="showMenu()">⋯</div>
                        <div class="mp-navbar-action tap-highlight" onclick="showHelp()">?</div>
                    </div>
                </div>
            </div>

            <div class="page-content">
                <!-- 概览区域 -->
                <div class="overview-section">
                    <div class="overview-grid">
                        <div class="overview-card primary tap-highlight" onclick="navigateToPage('prevention-effect')">
                            <div class="overview-card__value">95<span style="font-size: 14px;">分</span></div>
                            <div class="overview-card__label">预防效果指数</div>
                        </div>
                        <div class="overview-card warning tap-highlight" onclick="navigateToPage('health-monitoring')">
                            <div class="overview-card__value">3<span style="font-size: 14px;">只</span></div>
                            <div class="overview-card__label">健康监控预警</div>
                        </div>
                        <div class="overview-card success tap-highlight" onclick="navigateToPage('survival-analysis')">
                            <div class="overview-card__value">
                                99.6<span style="font-size: 14px;">%</span>
                                <span class="overview-card__trend">↗</span>
                            </div>
                            <div class="overview-card__label">存活率趋势</div>
                        </div>
                    </div>
                </div>

                <!-- TDesign Tabs -->
                <div class="t-tabs">
                    <div class="t-tabs__nav">
                        <div class="t-tabs__nav-item active" onclick="switchTab(event, 'prevention')">预防管理</div>
                        <div class="t-tabs__nav-item" onclick="switchTab(event, 'monitoring')">健康监控</div>
                        <div class="t-tabs__nav-item" onclick="switchTab(event, 'treatment')">诊疗管理</div>
                        <div class="t-tabs__nav-item" onclick="switchTab(event, 'analysis')">效果分析</div>
                    </div>
                    
                    <div class="t-tabs__content">
                        <!-- 预防管理 Tab -->
                        <div id="prevention" class="t-tabs__panel active">
                            <div class="t-card">
                                <div class="t-card__header">预防计划执行状态</div>
                                <div class="t-card__content">
                                    <div class="data-row">
                                        <span class="data-row__label">疫苗接种进度</span>
                                        <span class="data-row__value">96.8% <span class="t-tag t-tag--success">达标</span></span>
                                    </div>
                                    <div class="t-progress">
                                        <div class="t-progress__bar t-progress__bar--success" style="width: 96.8%"></div>
                                    </div>
                                    
                                    <div class="data-row">
                                        <span class="data-row__label">消毒作业记录</span>
                                        <span class="data-row__value">本周 5次</span>
                                    </div>
                                    
                                    <div class="data-row">
                                        <span class="data-row__label">营养保健方案</span>
                                        <span class="data-row__value">
                                            <span class="t-tag t-tag--primary">执行中</span>
                                        </span>
                                    </div>
                                </div>
                            </div>

                            <div class="t-card">
                                <div class="t-card__header">快速操作</div>
                                <div class="t-card__content">
                                    <div class="t-grid t-grid--2">
                                        <button class="t-button t-button--primary tap-highlight" onclick="navigateToPage('vaccine-plan')">制定疫苗计划</button>
                                        <button class="t-button t-button--default tap-highlight" onclick="navigateToPage('disinfection-record')">记录消毒作业</button>
                                        <button class="t-button t-button--default tap-highlight" onclick="navigateToPage('health-inspection')">健康巡检打卡</button>
                                        <button class="t-button t-button--default tap-highlight" onclick="navigateToPage('health-care')">添加保健措施</button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- 健康监控 Tab -->
                        <div id="monitoring" class="t-tabs__panel">
                            <div class="t-card">
                                <div class="t-card__header">实时健康状态</div>
                                <div class="t-card__content">
                                    <div class="t-grid t-grid--2">
                                        <div class="stat-card stat-card--primary">
                                            <div class="stat-card__value">2,340</div>
                                            <div class="stat-card__label">总存栏</div>
                                        </div>
                                        <div class="stat-card stat-card--success">
                                            <div class="stat-card__value">2,337</div>
                                            <div class="stat-card__label">健康个体</div>
                                        </div>
                                        <div class="stat-card stat-card--warning">
                                            <div class="stat-card__value">3</div>
                                            <div class="stat-card__label">异常个体</div>
                                        </div>
                                        <div class="stat-card">
                                            <div class="stat-card__value">0</div>
                                            <div class="stat-card__label">隔离观察</div>
                                        </div>
                                    </div>
                                    <button class="t-button t-button--primary t-button--block tap-highlight" 
                                            style="margin-top: var(--td-spacer-2);" 
                                            onclick="navigateToPage('abnormal-detail')">查看异常个体详情</button>
                                </div>
                            </div>
                        </div>

                        <!-- 诊疗管理 Tab -->
                        <div id="treatment" class="t-tabs__panel">
                            <div class="t-card">
                                <div class="t-card__header">诊疗工作台</div>
                                <div class="t-card__content">
                                    <div class="t-grid t-grid--2">
                                        <div class="stat-card stat-card--warning" onclick="navigateToPage('pending-diagnosis')">
                                            <div class="stat-card__value">2</div>
                                            <div class="stat-card__label">待诊断</div>
                                        </div>
                                        <div class="stat-card stat-card--primary" onclick="navigateToPage('treatment-records')">
                                            <div class="stat-card__value">3</div>
                                            <div class="stat-card__label">治疗中</div>
                                        </div>
                                        <div class="stat-card stat-card--success" onclick="navigateToPage('recovery-records')">
                                            <div class="stat-card__value">1</div>
                                            <div class="stat-card__label">康复观察</div>
                                        </div>
                                        <div class="stat-card" onclick="navigateToPage('ai-diagnosis')">
                                            <div class="stat-card__value">AI</div>
                                            <div class="stat-card__label">智能诊断</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- 效果分析 Tab -->
                        <div id="analysis" class="t-tabs__panel">
                            <div class="t-card">
                                <div class="t-card__header">核心指标仪表盘</div>
                                <div class="t-card__content">
                                    <div class="t-grid t-grid--2">
                                        <div class="overview-card success" onclick="navigateToPage('survival-analysis')">
                                            <div class="overview-card__value">99.6% <span class="overview-card__trend">↗</span></div>
                                            <div class="overview-card__label">存活率</div>
                                        </div>
                                        <div class="overview-card primary" onclick="navigateToPage('cure-analysis')">
                                            <div class="overview-card__value">92.3% <span class="overview-card__trend">→</span></div>
                                            <div class="overview-card__label">治愈率</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 更多页面将在后续添加 -->
    </div>

    <script>
        // === 模拟数据 ===
        const mockData = {
            survivalRate: {
                total: 2350,
                current: 2340,
                deaths: 10,
                rate: 99.6,
                stages: {
                    brooding: { rate: 97.2, deaths: 35 },
                    growing: { rate: 98.8, deaths: 15 },
                    full: { rate: 99.6, deaths: 10 }
                },
                deathCauses: [
                    { name: '小鹅瘟', count: 4, rate: 40 },
                    { name: '意外伤害', count: 3, rate: 30 },
                    { name: '营养不良', count: 2, rate: 20 },
                    { name: '其他', count: 1, rate: 10 }
                ]
            },
            vaccineData: [
                { name: '禽流感疫苗', rate: 98.5, status: '优秀', color: '#00A870' },
                { name: '新城疫疫苗', rate: 96.2, status: '良好', color: '#0052D9' },
                { name: '小鹅瘟疫苗', rate: 94.1, status: '待改进', color: '#ED7B2F' }
            ],
            healthData: {
                normal: 2337,
                abnormal: 3,
                isolated: 0,
                total: 2340
            }
        };

        // === 页面导航系统 ===
        const pageStack = ['main-page'];
        let currentPage = 'main-page';

        // 页面导航函数
        function navigateToPage(pageId) {
            console.log(`导航到页面: ${pageId}`);
            
            // 检查页面是否存在
            const targetPageElement = document.getElementById(pageId);
            if (!targetPageElement) {
                // 创建页面
                createPage(pageId);
                return;
            }
            
            const currentPageElement = document.getElementById(currentPage);
            
            // 添加到页面栈
            if (pageId !== currentPage && pageId !== 'main-page') {
                pageStack.push(currentPage);
            }
            
            // 执行页面切换
            currentPageElement.classList.remove('active');
            targetPageElement.classList.add('active');
            
            currentPage = pageId;
            
            if (pageId === 'main-page') {
                pageStack.length = 1;
            }
        }

        // 动态创建页面
        function createPage(pageId) {
            const pageMap = {
                'survival-analysis': createSurvivalAnalysisPage,
                'prevention-effect': createPreventionEffectPage,
                'health-monitoring': createHealthMonitoringPage,
                'vaccine-plan': createVaccinePlanPage,
                'disinfection-record': createDisinfectionRecordPage,
                'health-inspection': createHealthInspectionPage,
                'abnormal-detail': createAbnormalDetailPage,
                'treatment-records': createTreatmentRecordsPage,
                'ai-diagnosis': createAIDiagnosisPage,
                'cure-analysis': createCureAnalysisPage,
                'pending-diagnosis': createPendingDiagnosisPage,
                'recovery-records': createRecoveryRecordsPage,
                'health-care': createHealthCarePage
            };

            const createPageFunc = pageMap[pageId];
            if (createPageFunc) {
                const pageElement = createPageFunc(pageId);
                document.getElementById('app').appendChild(pageElement);
                
                // 修复递归调用问题：直接执行页面切换逻辑
                const currentPageElement = document.getElementById(currentPage);
                
                // 添加到页面栈
                if (pageId !== currentPage && pageId !== 'main-page') {
                    pageStack.push(currentPage);
                }
                
                // 执行页面切换
                if (currentPageElement) {
                    currentPageElement.classList.remove('active');
                }
                pageElement.classList.add('active');
                
                currentPage = pageId;
                
                if (pageId === 'main-page') {
                    pageStack.length = 1;
                }
                
                console.log(`已创建并切换到页面: ${pageId}`);
            } else {
                showToast(`页面 ${pageId} 正在开发中`);
            }
        }

        // 创建预防效果详情页面
        function createPreventionEffectPage(pageId) {
            const page = document.createElement('div');
            page.className = 'page';
            page.id = pageId;
            
            page.innerHTML = `
                <div class="mp-navbar">
                    <div class="mp-navbar-content">
                        <div class="mp-navbar-back tap-highlight" onclick="goBack()">←</div>
                        <div class="mp-navbar-title">预防效果详情</div>
                        <div class="mp-navbar-actions">
                            <div class="mp-navbar-action tap-highlight" onclick="exportReport()">导出</div>
                        </div>
                    </div>
                </div>

                <div class="page-content">
                    <div class="page-subtitle">综合评估预防措施的执行效果和成本效益</div>
                    
                    <!-- 综合评分 -->
                    <div class="t-card">
                        <div class="t-card__header">预防效果综合评分</div>
                        <div class="t-card__content">
                            <div class="ring-progress">
                                <svg>
                                    <circle class="ring-progress__track" cx="60" cy="60" r="50"></circle>
                                    <circle class="ring-progress__bar" cx="60" cy="60" r="50"></circle>
                                </svg>
                                <div class="ring-progress__text">95分</div>
                            </div>
                            <div class="text-center" style="color: var(--td-text-color-secondary); margin-bottom: var(--td-spacer-3);">
                                预防措施执行优秀，效果显著
                            </div>
                            
                            <div class="data-row">
                                <span class="data-row__label">疫苗接种完成率</span>
                                <span class="data-row__value">96.8%</span>
                            </div>
                            
                            <div class="data-row">
                                <span class="data-row__label">消毒作业达标率</span>
                                <span class="data-row__value">94.2%</span>
                            </div>
                            
                            <div class="data-row">
                                <span class="data-row__label">营养保健执行率</span>
                                <span class="data-row__value">98.5%</span>
                            </div>
                        </div>
                    </div>

                    <!-- 成本效益分析 -->
                    <div class="t-card">
                        <div class="t-card__header">预防成本效益</div>
                        <div class="t-card__content">
                            <div class="data-row">
                                <span class="data-row__label">预防总投入</span>
                                <span class="data-row__value">¥29,250</span>
                            </div>
                            
                            <div class="data-row">
                                <span class="data-row__label">预计节省治疗成本</span>
                                <span class="data-row__value text-success">¥85,600</span>
                            </div>
                            
                            <div class="data-row">
                                <span class="data-row__label">投入产出比</span>
                                <span class="data-row__value text-success">1:2.93</span>
                            </div>
                            
                            <div class="data-row">
                                <span class="data-row__label">平均预防成本</span>
                                <span class="data-row__value">¥12.5/只</span>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            return page;
        }

        // 创建存活率分析页面
        function createSurvivalAnalysisPage(pageId) {
            const page = document.createElement('div');
            page.className = 'page';
            page.id = pageId;
            
            page.innerHTML = `
                <div class="mp-navbar">
                    <div class="mp-navbar-content">
                        <div class="mp-navbar-back tap-highlight" onclick="goBack()">←</div>
                        <div class="mp-navbar-title">存活率分析中心</div>
                        <div class="mp-navbar-actions">
                            <div class="mp-navbar-action tap-highlight" onclick="exportReport()">导出</div>
                        </div>
                    </div>
                </div>

                <div class="page-content">
                    <div class="page-subtitle">全面分析存活率数据，为决策提供科学依据</div>
                    
                    <!-- 总体概况 -->
                    <div class="t-card">
                        <div class="t-card__header">
                            总体存活率概况
                            <span class="t-tag t-tag--success">${mockData.survivalRate.rate}%</span>
                        </div>
                        <div class="t-card__content">
                            <div class="t-grid t-grid--3">
                                <div class="stat-card stat-card--primary">
                                    <div class="stat-card__value">${mockData.survivalRate.total}</div>
                                    <div class="stat-card__label">总入栏数</div>
                                </div>
                                <div class="stat-card stat-card--success">
                                    <div class="stat-card__value">${mockData.survivalRate.current}</div>
                                    <div class="stat-card__label">当前存活</div>
                                </div>
                                <div class="stat-card stat-card--error">
                                    <div class="stat-card__value">${mockData.survivalRate.deaths}</div>
                                    <div class="stat-card__label">死亡数量</div>
                                </div>
                            </div>
                            
                            <!-- 折线图 -->
                            <div class="chart-container">
                                <div class="line-chart">
                                    <svg>
                                        <polyline class="line-chart__line" 
                                                  points="20,180 60,160 100,140 140,130 180,120 220,110 260,100 300,95" />
                                        <circle class="line-chart__point" cx="20" cy="180" style="animation-delay: 0.5s" />
                                        <circle class="line-chart__point" cx="60" cy="160" style="animation-delay: 0.7s" />
                                        <circle class="line-chart__point" cx="100" cy="140" style="animation-delay: 0.9s" />
                                        <circle class="line-chart__point" cx="140" cy="130" style="animation-delay: 1.1s" />
                                        <circle class="line-chart__point" cx="180" cy="120" style="animation-delay: 1.3s" />
                                        <circle class="line-chart__point" cx="220" cy="110" style="animation-delay: 1.5s" />
                                        <circle class="line-chart__point" cx="260" cy="100" style="animation-delay: 1.7s" />
                                        <circle class="line-chart__point" cx="300" cy="95" style="animation-delay: 1.9s" />
                                    </svg>
                                </div>
                                <div class="text-center" style="color: var(--td-text-color-secondary); font-size: var(--td-font-size-s);">
                                    最近30天存活率趋势图
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 分阶段存活率 -->
                    <div class="t-card">
                        <div class="t-card__header">分阶段存活率分析</div>
                        <div class="t-card__content">
                            <div class="form-item">
                                <div class="form-label">育雏期 (0-4周)</div>
                                <div class="form-value">
                                    ${mockData.survivalRate.stages.brooding.rate}% <span class="t-tag t-tag--success">优秀</span>
                                </div>
                            </div>
                            <div class="t-progress">
                                <div class="t-progress__bar t-progress__bar--success" style="width: ${mockData.survivalRate.stages.brooding.rate}%"></div>
                            </div>
                            
                            <div class="form-item">
                                <div class="form-label">成长期 (5-10周)</div>
                                <div class="form-value">
                                    ${mockData.survivalRate.stages.growing.rate}% <span class="t-tag t-tag--success">优秀</span>
                                </div>
                            </div>
                            <div class="t-progress">
                                <div class="t-progress__bar t-progress__bar--success" style="width: ${mockData.survivalRate.stages.growing.rate}%"></div>
                            </div>
                            
                            <div class="form-item">
                                <div class="form-label">全周期</div>
                                <div class="form-value">
                                    ${mockData.survivalRate.stages.full.rate}% <span class="t-tag t-tag--success">优秀</span>
                                </div>
                            </div>
                            <div class="t-progress">
                                <div class="t-progress__bar t-progress__bar--success" style="width: ${mockData.survivalRate.stages.full.rate}%"></div>
                            </div>
                        </div>
                    </div>

                    <!-- 死亡原因分析 -->
                    <div class="t-card">
                        <div class="t-card__header">死亡原因分析</div>
                        <div class="t-card__content">
                            <!-- 饼图 -->
                            <div class="pie-chart"></div>
                            <div class="text-center" style="color: var(--td-text-color-secondary); font-size: var(--td-font-size-s); margin-bottom: var(--td-spacer-3);">
                                死亡原因分布图
                            </div>
                            
                            <div class="t-list">
                                ${mockData.survivalRate.deathCauses.map(cause => `
                                    <div class="t-list-item">
                                        <div class="t-list-item__content">
                                            <div class="t-list-item__title">${cause.name}</div>
                                            <div class="t-list-item__description">${cause.count}只 (${cause.rate}%)</div>
                                        </div>
                                        <div class="t-list-item__action">
                                            <span class="t-tag ${cause.rate > 30 ? 't-tag--error' : cause.rate > 20 ? 't-tag--warning' : 't-tag--primary'}">${cause.rate > 30 ? '高风险' : cause.rate > 20 ? '中风险' : '低风险'}</span>
                                        </div>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    </div>

                    <!-- 改进建议 -->
                    <div class="t-card">
                        <div class="t-card__header">改进建议</div>
                        <div class="t-card__content">
                            <div class="t-message t-message--success">
                                <div class="t-message__icon">✓</div>
                                <div class="t-message__content">
                                    <div class="t-message__title">存活率表现优秀</div>
                                    当前99.6%的存活率超过行业平均水平(95%)，管理措施执行良好
                                </div>
                            </div>
                            
                            <div class="t-message t-message--warning">
                                <div class="t-message__icon">!</div>
                                <div class="t-message__content">
                                    <div class="t-message__title">小鹅瘟预防需加强</div>
                                    建议提前接种小鹅瘟疫苗，加强7-14日龄期间的健康监控
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            return page;
        }

        // 创建疫苗计划页面
        function createVaccinePlanPage(pageId) {
            const page = document.createElement('div');
            page.className = 'page';
            page.id = pageId;
            
            page.innerHTML = `
                <div class="mp-navbar">
                    <div class="mp-navbar-content">
                        <div class="mp-navbar-back tap-highlight" onclick="goBack()">←</div>
                        <div class="mp-navbar-title">疫苗计划管理</div>
                        <div class="mp-navbar-actions">
                            <div class="mp-navbar-action tap-highlight" onclick="addVaccinePlan()">+</div>
                        </div>
                    </div>
                </div>

                <div class="page-content">
                    <div class="page-subtitle">制定和管理疫苗接种计划，确保免疫效果</div>

                    <!-- 搜索框 -->
                    <div class="search-box">
                        <span class="search-icon">🔍</span>
                        <input type="text" class="search-input" placeholder="搜索疫苗计划..." id="vaccineSearchInput">
                    </div>
                    
                    <!-- 当前疫苗计划 -->
                    <div class="t-card">
                        <div class="t-card__header">
                            当前疫苗计划
                            <span class="t-tag t-tag--primary">3个计划</span>
                        </div>
                        <div class="t-card__content">
                            <div class="t-list" id="vaccinePlanList">
                                ${mockData.vaccineData.map((vaccine, index) => `
                                    <div class="t-list-item" onclick="editVaccinePlan(${index})">
                                        <div class="t-list-item__content">
                                            <div class="t-list-item__title">${vaccine.name}</div>
                                            <div class="t-list-item__description">
                                                保护率 ${vaccine.rate}% • 下次接种：${getNextVaccineDate(index)}
                                            </div>
                                        </div>
                                        <div class="t-list-item__action">
                                            <span class="t-tag ${vaccine.status === '优秀' ? 't-tag--success' : vaccine.status === '良好' ? 't-tag--primary' : 't-tag--warning'}">${vaccine.status}</span>
                                        </div>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    </div>

                    <!-- 疫苗效果统计 -->
                    <div class="t-card">
                        <div class="t-card__header">疫苗效果统计</div>
                        <div class="t-card__content">
                            <!-- 柱状图 -->
                            <div class="chart-container">
                                <div class="bar-chart">
                                    ${mockData.vaccineData.map((vaccine, index) => `
                                        <div class="bar-chart__item">
                                            <div class="bar-chart__bar ${vaccine.status === '优秀' ? 'bar-chart__bar--success' : vaccine.status === '良好' ? '' : 'bar-chart__bar--warning'}" 
                                                 style="height: ${vaccine.rate}px;"></div>
                                            <div class="bar-chart__label">${vaccine.name.replace('疫苗', '')}</div>
                                        </div>
                                    `).join('')}
                                </div>
                            </div>
                            
                            <div class="data-row">
                                <span class="data-row__label">平均保护率</span>
                                <span class="data-row__value text-success">96.3%</span>
                            </div>
                            
                            <div class="data-row">
                                <span class="data-row__label">接种完成率</span>
                                <span class="data-row__value">96.8%</span>
                            </div>
                            
                            <div class="data-row">
                                <span class="data-row__label">本月疫苗成本</span>
                                <span class="data-row__value">¥15,200</span>
                            </div>
                        </div>
                    </div>

                    <!-- 快速操作 -->
                    <div class="t-card">
                        <div class="t-card__header">快速操作</div>
                        <div class="t-card__content">
                            <div class="t-grid">
                                <button class="t-button t-button--primary t-button--block" onclick="addVaccinePlan()">新增疫苗计划</button>
                                <button class="t-button t-button--default t-button--block" onclick="batchVaccination()">批量接种记录</button>
                                <button class="t-button t-button--ghost t-button--block" onclick="exportVaccineReport()">导出接种报告</button>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            return page;
        }

        // 返回上一页
        function goBack() {
            if (currentPage === 'main-page') {
                if (confirm('确定要退出健康管理中心吗？')) {
                    console.log('退出小程序');
                }
                return;
            }
            
            const previousPage = pageStack.length > 1 ? pageStack.pop() : 'main-page';
            navigateToPage(previousPage);
        }

        // Tab切换功能
        function switchTab(event, tabName) {
            event.stopPropagation();
            
            document.querySelectorAll('.t-tabs__nav-item').forEach(item => {
                item.classList.remove('active');
            });
            document.querySelectorAll('.t-tabs__panel').forEach(panel => {
                panel.classList.remove('active');
            });
            
            event.target.classList.add('active');
            document.getElementById(tabName).classList.add('active');
            
            console.log(`切换到Tab: ${tabName}`);
        }

        // 工具函数
        function showToast(message, duration = 2000) {
            const toast = document.createElement('div');
            toast.style.cssText = `
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                background: rgba(0, 0, 0, 0.8);
                color: white;
                padding: 12px 20px;
                border-radius: 6px;
                font-size: 14px;
                z-index: 9999;
                pointer-events: none;
            `;
            toast.textContent = message;
            document.body.appendChild(toast);
            
            setTimeout(() => {
                document.body.removeChild(toast);
            }, duration);
        }

        function getNextVaccineDate(index) {
            const dates = ['2024-12-15', '2024-12-20', '2024-12-25'];
            return dates[index] || '2024-12-30';
        }

        function showMenu() {
            const menuOptions = ['刷新数据', '导出报告', '设置提醒', '帮助说明'];
            const choice = prompt('请选择操作：\n' + menuOptions.map((opt, idx) => `${idx + 1}. ${opt}`).join('\n'));
            
            if (choice) {
                const index = parseInt(choice) - 1;
                if (index >= 0 && index < menuOptions.length) {
                    showToast(`${menuOptions[index]}功能开发中`);
                }
            }
        }

        function showHelp() {
            alert('健康管理中心帮助\n\n• 概览卡片：点击查看详细分析\n• 预防管理：疫苗计划和预防措施\n• 健康监控：实时异常个体监控\n• 诊疗管理：疾病诊断和治疗记录\n• 效果分析：数据统计和趋势分析');
        }

        // 创建健康监控详情页面
        function createHealthMonitoringPage(pageId) {
            const page = document.createElement('div');
            page.className = 'page';
            page.id = pageId;
            
            page.innerHTML = `
                <div class="mp-navbar">
                    <div class="mp-navbar-content">
                        <div class="mp-navbar-back tap-highlight" onclick="goBack()">←</div>
                        <div class="mp-navbar-title">健康监控详情</div>
                        <div class="mp-navbar-actions">
                            <div class="mp-navbar-action tap-highlight" onclick="refreshData()">刷新</div>
                        </div>
                    </div>
                </div>

                <div class="page-content">
                    <div class="page-subtitle">实时监控异常个体，及早发现健康问题</div>
                    
                    <!-- 异常个体详情 -->
                    <div class="t-card">
                        <div class="t-card__header">
                            当前异常个体
                            <span class="t-tag t-tag--warning">3只</span>
                        </div>
                        <div class="t-card__content">
                            <div class="t-list">
                                <div class="t-list-item" onclick="viewAbnormalDetail(0)">
                                    <div class="t-list-item__content">
                                        <div class="t-list-item__title">1号鹅舍 - 批次GS001</div>
                                        <div class="t-list-item__description">
                                            症状：咳嗽、精神萎靡 • 发现时间：2小时前 • 已隔离
                                        </div>
                                    </div>
                                    <div class="t-list-item__action">
                                        <span class="t-tag t-tag--error">严重</span>
                                    </div>
                                </div>
                                
                                <div class="t-list-item" onclick="viewAbnormalDetail(1)">
                                    <div class="t-list-item__content">
                                        <div class="t-list-item__title">2号鹅舍 - 批次GS002</div>
                                        <div class="t-list-item__description">
                                            症状：食欲减退 • 发现时间：6小时前 • 观察中
                                        </div>
                                    </div>
                                    <div class="t-list-item__action">
                                        <span class="t-tag t-tag--warning">中等</span>
                                    </div>
                                </div>
                                
                                <div class="t-list-item" onclick="viewAbnormalDetail(2)">
                                    <div class="t-list-item__content">
                                        <div class="t-list-item__title">3号鹅舍 - 批次GS003</div>
                                        <div class="t-list-item__description">
                                            症状：轻微腹泻 • 发现时间：1天前 • 治疗中
                                        </div>
                                    </div>
                                    <div class="t-list-item__action">
                                        <span class="t-tag t-tag--primary">轻微</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="t-grid t-grid--2" style="margin-top: var(--td-spacer-3);">
                                <button class="t-button t-button--primary tap-highlight" onclick="navigateToPage('abnormal-detail')">新增异常记录</button>
                                <button class="t-button t-button--default tap-highlight" onclick="batchHealthCheck()">批量健康检查</button>
                            </div>
                        </div>
                    </div>

                    <!-- 疾病分布分析 -->
                    <div class="t-card">
                        <div class="t-card__header">疾病分布统计</div>
                        <div class="t-card__content">
                            <div class="chart-container">
                                <div class="bar-chart">
                                    <div class="bar-chart__item">
                                        <div class="bar-chart__bar bar-chart__bar--error" style="height: 80px;"></div>
                                        <div class="bar-chart__label">呼吸道</div>
                                    </div>
                                    <div class="bar-chart__item">
                                        <div class="bar-chart__bar bar-chart__bar--warning" style="height: 70px;"></div>
                                        <div class="bar-chart__label">消化道</div>
                                    </div>
                                    <div class="bar-chart__item">
                                        <div class="bar-chart__bar" style="height: 50px;"></div>
                                        <div class="bar-chart__label">其他</div>
                                    </div>
                                </div>
                                <div class="text-center" style="color: var(--td-text-color-secondary); font-size: var(--td-font-size-s); margin-top: var(--td-spacer-2);">
                                    疾病类型分布统计
                                </div>
                            </div>
                            
                            <div class="data-row">
                                <span class="data-row__label">呼吸道疾病</span>
                                <span class="data-row__value">8例 <span class="t-tag t-tag--error">高发</span></span>
                            </div>
                            
                            <div class="data-row">
                                <span class="data-row__label">消化道疾病</span>
                                <span class="data-row__value">7例 <span class="t-tag t-tag--warning">中发</span></span>
                            </div>
                            
                            <div class="data-row">
                                <span class="data-row__label">其他疾病</span>
                                <span class="data-row__value">5例 <span class="t-tag t-tag--primary">低发</span></span>
                            </div>
                        </div>
                    </div>

                    <!-- 预警规则设置 -->
                    <div class="t-card">
                        <div class="t-card__header">预警阈值设置</div>
                        <div class="t-card__content">
                            <div class="form-item">
                                <div class="form-label">存活率预警线</div>
                                <div class="form-value">< 95% 触发预警</div>
                            </div>
                            
                            <div class="form-item">
                                <div class="form-label">异常个体预警</div>
                                <div class="form-value">单批次 > 5只 触发预警</div>
                            </div>
                            
                            <div class="form-item">
                                <div class="form-label">死亡率预警线</div>
                                <div class="form-value">> 3% 触发预警</div>
                            </div>
                            
                            <button class="t-button t-button--ghost t-button--block tap-highlight" style="margin-top: var(--td-spacer-2);" onclick="editAlertSettings()">修改预警设置</button>
                        </div>
                    </div>
                </div>
            `;
            
            return page;
        }

        // 占位函数和辅助功能
        function exportReport() { showToast('报告导出功能开发中'); }
        function addVaccinePlan() { showToast('新增疫苗计划功能开发中'); }
        function editVaccinePlan(index) { showToast('编辑疫苗计划功能开发中'); }
        function batchVaccination() { showToast('批量接种功能开发中'); }
        function exportVaccineReport() { showToast('导出疫苗报告功能开发中'); }
        function refreshData() { showToast('数据刷新中...'); setTimeout(() => showToast('数据已更新'), 1000); }
        function viewAbnormalDetail(index) { showToast(`查看异常个体 ${index + 1} 详情`); }
        function batchHealthCheck() { showToast('批量健康检查功能开发中'); }
        function editAlertSettings() { showToast('编辑预警设置功能开发中'); }

        // 创建消毒记录页面
        function createDisinfectionRecordPage(pageId) {
            const page = document.createElement('div');
            page.className = 'page';
            page.id = pageId;
            
            page.innerHTML = `
                <div class="mp-navbar">
                    <div class="mp-navbar-content">
                        <div class="mp-navbar-back tap-highlight" onclick="goBack()">←</div>
                        <div class="mp-navbar-title">消毒作业记录</div>
                        <div class="mp-navbar-actions">
                            <div class="mp-navbar-action tap-highlight" onclick="addDisinfectionRecord()">+</div>
                        </div>
                    </div>
                </div>

                <div class="page-content">
                    <div class="page-subtitle">记录消毒作业执行情况，确保环境卫生安全</div>

                    <!-- 本周消毒统计 -->
                    <div class="t-card">
                        <div class="t-card__header">本周消毒统计</div>
                        <div class="t-card__content">
                            <div class="t-grid t-grid--2">
                                <div class="stat-card stat-card--primary">
                                    <div class="stat-card__value">5</div>
                                    <div class="stat-card__label">消毒次数</div>
                                </div>
                                <div class="stat-card stat-card--success">
                                    <div class="stat-card__value">100%</div>
                                    <div class="stat-card__label">达标率</div>
                                </div>
                            </div>
                            
                            <div class="data-row">
                                <span class="data-row__label">消毒剂使用量</span>
                                <span class="data-row__value">25L</span>
                            </div>
                            
                            <div class="data-row">
                                <span class="data-row__label">覆盖面积</span>
                                <span class="data-row__value">2,500㎡</span>
                            </div>
                        </div>
                    </div>

                    <!-- 消毒记录列表 -->
                    <div class="t-card">
                        <div class="t-card__header">最近消毒记录</div>
                        <div class="t-card__content">
                            <div class="t-list">
                                <div class="t-list-item" onclick="viewDisinfectionDetail(0)">
                                    <div class="t-list-item__content">
                                        <div class="t-list-item__title">1号鹅舍消毒作业</div>
                                        <div class="t-list-item__description">
                                            时间：今天 08:00 • 消毒剂：聚维酮碘 • 浓度：1:200
                                        </div>
                                    </div>
                                    <div class="t-list-item__action">
                                        <span class="t-tag t-tag--success">已完成</span>
                                    </div>
                                </div>
                                
                                <div class="t-list-item" onclick="viewDisinfectionDetail(1)">
                                    <div class="t-list-item__content">
                                        <div class="t-list-item__title">2号鹅舍消毒作业</div>
                                        <div class="t-list-item__description">
                                            时间：昨天 16:00 • 消毒剂：次氯酸钠 • 浓度：1:100
                                        </div>
                                    </div>
                                    <div class="t-list-item__action">
                                        <span class="t-tag t-tag--success">已完成</span>
                                    </div>
                                </div>
                                
                                <div class="t-list-item" onclick="viewDisinfectionDetail(2)">
                                    <div class="t-list-item__content">
                                        <div class="t-list-item__title">饲料区消毒作业</div>
                                        <div class="t-list-item__description">
                                            时间：12月8日 14:00 • 消毒剂：戊二醛 • 浓度：1:500
                                        </div>
                                    </div>
                                    <div class="t-list-item__action">
                                        <span class="t-tag t-tag--primary">效果良好</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 快速操作 -->
                    <div class="t-card">
                        <div class="t-card__header">快速操作</div>
                        <div class="t-card__content">
                            <div class="t-grid t-grid--2">
                                <button class="t-button t-button--primary tap-highlight" onclick="addDisinfectionRecord()">新增消毒记录</button>
                                <button class="t-button t-button--default tap-highlight" onclick="viewDisinfectionPlan()">查看消毒计划</button>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            return page;
        }

        // 创建健康巡检页面
        function createHealthInspectionPage(pageId) {
            const page = document.createElement('div');
            page.className = 'page';
            page.id = pageId;
            
            page.innerHTML = `
                <div class="mp-navbar">
                    <div class="mp-navbar-content">
                        <div class="mp-navbar-back tap-highlight" onclick="goBack()">←</div>
                        <div class="mp-navbar-title">健康巡检</div>
                        <div class="mp-navbar-actions">
                            <div class="mp-navbar-action tap-highlight" onclick="startInspection()">开始</div>
                        </div>
                    </div>
                </div>

                <div class="page-content">
                    <div class="page-subtitle">日常健康巡检，及时发现异常情况</div>

                    <!-- 今日巡检任务 -->
                    <div class="t-card">
                        <div class="t-card__header">今日巡检任务</div>
                        <div class="t-card__content">
                            <div class="data-row">
                                <span class="data-row__label">巡检进度</span>
                                <span class="data-row__value">60% <span class="t-tag t-tag--primary">进行中</span></span>
                            </div>
                            <div class="t-progress">
                                <div class="t-progress__bar" style="width: 60%"></div>
                            </div>
                            
                            <div class="data-row">
                                <span class="data-row__label">已巡检鹅舍</span>
                                <span class="data-row__value">3/5个</span>
                            </div>
                            
                            <div class="data-row">
                                <span class="data-row__label">发现异常</span>
                                <span class="data-row__value text-warning">2只</span>
                            </div>
                            
                            <button class="t-button t-button--primary t-button--block tap-highlight" 
                                    style="margin-top: var(--td-spacer-2);" onclick="continueInspection()">继续巡检</button>
                        </div>
                    </div>

                    <!-- 巡检表单 -->
                    <div class="t-card" id="inspectionForm">
                        <div class="t-card__header">4号鹅舍巡检</div>
                        <div class="t-card__content">
                            <div class="form-item">
                                <div class="form-label">精神状态</div>
                                <select class="form-input" id="mentalState">
                                    <option value="正常">正常</option>
                                    <option value="萎靡">萎靡</option>
                                    <option value="亢奋">亢奋</option>
                                </select>
                            </div>
                            
                            <div class="form-item">
                                <div class="form-label">食欲情况</div>
                                <select class="form-input" id="appetite">
                                    <option value="正常">正常</option>
                                    <option value="减退">减退</option>
                                    <option value="废绝">废绝</option>
                                </select>
                            </div>
                            
                            <div class="form-item">
                                <div class="form-label">呼吸状态</div>
                                <select class="form-input" id="breathing">
                                    <option value="正常">正常</option>
                                    <option value="急促">急促</option>
                                    <option value="困难">困难</option>
                                </select>
                            </div>
                            
                            <div class="form-item">
                                <div class="form-label">异常个体数量</div>
                                <input type="number" class="form-input" id="abnormalCount" value="0" min="0">
                            </div>
                            
                            <div class="form-item" style="flex-direction: column; align-items: stretch;">
                                <div class="form-label" style="margin-bottom: var(--td-spacer-1);">备注</div>
                                <textarea class="form-textarea" id="inspectionNotes" placeholder="记录具体异常情况..."></textarea>
                            </div>
                            
                            <div class="t-grid t-grid--2" style="margin-top: var(--td-spacer-3);">
                                <button class="t-button t-button--default tap-highlight" onclick="saveInspectionDraft()">保存草稿</button>
                                <button class="t-button t-button--primary tap-highlight" onclick="submitInspection()">提交记录</button>
                            </div>
                        </div>
                    </div>

                    <!-- 历史巡检记录 -->
                    <div class="t-card">
                        <div class="t-card__header">最近巡检记录</div>
                        <div class="t-card__content">
                            <div class="t-list">
                                <div class="t-list-item">
                                    <div class="t-list-item__content">
                                        <div class="t-list-item__title">昨日巡检 - 5个鹅舍</div>
                                        <div class="t-list-item__description">发现异常：3只 • 巡检员：张三 • 完成度：100%</div>
                                    </div>
                                    <div class="t-list-item__action">
                                        <span class="t-tag t-tag--success">已完成</span>
                                    </div>
                                </div>
                                
                                <div class="t-list-item">
                                    <div class="t-list-item__content">
                                        <div class="t-list-item__title">12月8日巡检 - 5个鹅舍</div>
                                        <div class="t-list-item__description">发现异常：1只 • 巡检员：李四 • 完成度：100%</div>
                                    </div>
                                    <div class="t-list-item__action">
                                        <span class="t-tag t-tag--success">已完成</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            return page;
        }

        // 新增功能函数
        function addDisinfectionRecord() { showToast('新增消毒记录功能开发中'); }
        function viewDisinfectionDetail(index) { showToast(`查看消毒记录 ${index + 1} 详情`); }
        function viewDisinfectionPlan() { showToast('查看消毒计划功能开发中'); }
        function startInspection() { showToast('开始巡检功能开发中'); }
        function continueInspection() { showToast('继续巡检...'); }
        function saveInspectionDraft() { showToast('草稿已保存'); }
        function submitInspection() { 
            showToast('巡检记录已提交'); 
            // 模拟提交后重置表单
            setTimeout(() => {
                const mentalState = document.getElementById('mentalState');
                const appetite = document.getElementById('appetite');
                const breathing = document.getElementById('breathing');
                const abnormalCount = document.getElementById('abnormalCount');
                const inspectionNotes = document.getElementById('inspectionNotes');
                
                if (mentalState) mentalState.selectedIndex = 0;
                if (appetite) appetite.selectedIndex = 0;
                if (breathing) breathing.selectedIndex = 0;
                if (abnormalCount) abnormalCount.value = '0';
                if (inspectionNotes) inspectionNotes.value = '';
            }, 1000);
        }

        // 创建异常详情页面
        function createAbnormalDetailPage(pageId) {
            const page = document.createElement('div');
            page.className = 'page';
            page.id = pageId;
            
            page.innerHTML = `
                <div class="mp-navbar">
                    <div class="mp-navbar-content">
                        <div class="mp-navbar-back tap-highlight" onclick="goBack()">←</div>
                        <div class="mp-navbar-title">异常个体详情</div>
                        <div class="mp-navbar-actions">
                            <div class="mp-navbar-action tap-highlight" onclick="editRecord()">编辑</div>
                        </div>
                    </div>
                </div>

                <div class="page-content">
                    <div class="page-subtitle">记录异常个体的详细信息和处理措施</div>
                    
                    <!-- 异常个体信息 -->
                    <div class="t-card">
                        <div class="t-card__header">异常个体基本信息</div>
                        <div class="t-card__content">
                            <div class="form-item">
                                <div class="form-label">鹅舍位置</div>
                                <input type="text" class="form-input" id="barnLocation" value="1号鹅舍" readonly>
                            </div>
                            
                            <div class="form-item">
                                <div class="form-label">批次编号</div>
                                <input type="text" class="form-input" id="batchNumber" value="GS001" readonly>
                            </div>
                            
                            <div class="form-item">
                                <div class="form-label">异常症状</div>
                                <textarea class="form-textarea" id="symptoms" placeholder="详细描述异常症状...">咳嗽、精神萎靡、食欲减退</textarea>
                            </div>
                            
                            <div class="form-item">
                                <div class="form-label">发现时间</div>
                                <input type="datetime-local" class="form-input" id="foundTime" value="2024-12-10T08:00">
                            </div>
                            
                            <div class="form-item">
                                <div class="form-label">严重程度</div>
                                <select class="form-input" id="severity">
                                    <option value="轻微">轻微</option>
                                    <option value="中等">中等</option>
                                    <option value="严重" selected>严重</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- 处理措施 -->
                    <div class="t-card">
                        <div class="t-card__header">处理措施</div>
                        <div class="t-card__content">
                            <div class="form-item">
                                <div class="form-label">隔离状态</div>
                                <select class="form-input" id="isolationStatus">
                                    <option value="未隔离">未隔离</option>
                                    <option value="已隔离" selected>已隔离</option>
                                    <option value="隔离观察中">隔离观察中</option>
                                </select>
                            </div>
                            
                            <div class="form-item">
                                <div class="form-label">治疗方案</div>
                                <textarea class="form-textarea" id="treatment" placeholder="记录具体的治疗方案...">恩诺沙星口服，每日2次，连续5天</textarea>
                            </div>
                            
                            <div class="form-item">
                                <div class="form-label">处理人员</div>
                                <input type="text" class="form-input" id="handler" value="张三" readonly>
                            </div>
                            
                            <div class="t-grid t-grid--2" style="margin-top: var(--td-spacer-3);">
                                <button class="t-button t-button--default tap-highlight" onclick="saveRecord()">保存记录</button>
                                <button class="t-button t-button--primary tap-highlight" onclick="updateStatus()">更新状态</button>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            return page;
        }

        // 创建治疗记录页面
        function createTreatmentRecordsPage(pageId) {
            const page = document.createElement('div');
            page.className = 'page';
            page.id = pageId;
            
            page.innerHTML = `
                <div class="mp-navbar">
                    <div class="mp-navbar-content">
                        <div class="mp-navbar-back tap-highlight" onclick="goBack()">←</div>
                        <div class="mp-navbar-title">治疗记录</div>
                        <div class="mp-navbar-actions">
                            <div class="mp-navbar-action tap-highlight" onclick="addTreatmentRecord()">+</div>
                        </div>
                    </div>
                </div>

                <div class="page-content">
                    <div class="page-subtitle">管理所有在治疗中的病例记录</div>
                    
                    <!-- 治疗统计 -->
                    <div class="t-card">
                        <div class="t-card__header">治疗统计</div>
                        <div class="t-card__content">
                            <div class="t-grid t-grid--3">
                                <div class="stat-card stat-card--warning">
                                    <div class="stat-card__value">3</div>
                                    <div class="stat-card__label">治疗中</div>
                                </div>
                                <div class="stat-card stat-card--success">
                                    <div class="stat-card__value">92.3%</div>
                                    <div class="stat-card__label">治愈率</div>
                                </div>
                                <div class="stat-card stat-card--primary">
                                    <div class="stat-card__value">5.2</div>
                                    <div class="stat-card__label">平均治疗天数</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 治疗记录列表 -->
                    <div class="t-card">
                        <div class="t-card__header">当前治疗病例</div>
                        <div class="t-card__content">
                            <div class="t-list">
                                <div class="t-list-item" onclick="viewTreatmentDetail(0)">
                                    <div class="t-list-item__content">
                                        <div class="t-list-item__title">咳嗽症状 - 批次GS001</div>
                                        <div class="t-list-item__description">
                                            用药：恩诺沙星 • 治疗天数：第3天 • 负责人：张医师
                                        </div>
                                    </div>
                                    <div class="t-list-item__action">
                                        <span class="t-tag t-tag--warning">治疗中</span>
                                    </div>
                                </div>
                                
                                <div class="t-list-item" onclick="viewTreatmentDetail(1)">
                                    <div class="t-list-item__content">
                                        <div class="t-list-item__title">腹泻症状 - 批次GS002</div>
                                        <div class="t-list-item__description">
                                            用药：蒙脱石散 • 治疗天数：第2天 • 负责人：李医师
                                        </div>
                                    </div>
                                    <div class="t-list-item__action">
                                        <span class="t-tag t-tag--primary">观察中</span>
                                    </div>
                                </div>
                                
                                <div class="t-list-item" onclick="viewTreatmentDetail(2)">
                                    <div class="t-list-item__content">
                                        <div class="t-list-item__title">精神萎靡 - 批次GS003</div>
                                        <div class="t-list-item__description">
                                            用药：多维电解质 • 治疗天数：第1天 • 负责人：王医师
                                        </div>
                                    </div>
                                    <div class="t-list-item__action">
                                        <span class="t-tag t-tag--error">重症</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 快速操作 -->
                    <div class="t-card">
                        <div class="t-card__header">快速操作</div>
                        <div class="t-card__content">
                            <div class="t-grid">
                                <button class="t-button t-button--primary t-button--block tap-highlight" onclick="addTreatmentRecord()">新增治疗记录</button>
                                <button class="t-button t-button--default t-button--block tap-highlight" onclick="batchTreatmentUpdate()">批量更新状态</button>
                                <button class="t-button t-button--ghost t-button--block tap-highlight" onclick="exportTreatmentReport()">导出治疗报告</button>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            return page;
        }

        // 创建AI诊断页面
        function createAIDiagnosisPage(pageId) {
            const page = document.createElement('div');
            page.className = 'page';
            page.id = pageId;
            
            page.innerHTML = `
                <div class="mp-navbar">
                    <div class="mp-navbar-content">
                        <div class="mp-navbar-back tap-highlight" onclick="goBack()">←</div>
                        <div class="mp-navbar-title">AI智能诊断</div>
                        <div class="mp-navbar-actions">
                            <div class="mp-navbar-action tap-highlight" onclick="startNewDiagnosis()">新建</div>
                        </div>
                    </div>
                </div>

                <div class="page-content">
                    <div class="page-subtitle">基于症状描述，AI智能分析可能的疾病和治疗建议</div>
                    
                    <!-- AI诊断表单 -->
                    <div class="t-card">
                        <div class="t-card__header">症状输入</div>
                        <div class="t-card__content">
                            <div class="form-item" style="flex-direction: column; align-items: stretch;">
                                <div class="form-label" style="margin-bottom: var(--td-spacer-1);">详细症状描述</div>
                                <textarea class="form-textarea" id="symptomDescription" 
                                          placeholder="请详细描述观察到的异常症状，如：精神状态、食欲、呼吸、排泄、行为等..." 
                                          style="min-height: 120px;">鹅只出现咳嗽症状，精神萎靡，食欲减退，羽毛蓬松，偶有张嘴呼吸的现象</textarea>
                            </div>
                            
                            <div class="form-item">
                                <div class="form-label">发病个体数量</div>
                                <input type="number" class="form-input" id="affectedCount" value="3" min="1">
                            </div>
                            
                            <div class="form-item">
                                <div class="form-label">发病日龄</div>
                                <input type="number" class="form-input" id="dayAge" value="15" min="1">
                            </div>
                            
                            <div class="form-item">
                                <div class="form-label">环境温度</div>
                                <input type="number" class="form-input" id="temperature" value="24" step="0.1">
                            </div>
                            
                            <button class="t-button t-button--primary t-button--block tap-highlight" 
                                    style="margin-top: var(--td-spacer-3);" onclick="startAIDiagnosis()">开始AI诊断</button>
                        </div>
                    </div>

                    <!-- AI诊断结果 -->
                    <div class="t-card" id="diagnosisResult" style="display: none;">
                        <div class="t-card__header">AI诊断结果</div>
                        <div class="t-card__content">
                            <div class="t-message t-message--info">
                                <div class="t-message__icon">AI</div>
                                <div class="t-message__content">
                                    <div class="t-message__title">疑似疾病：呼吸道感染</div>
                                    基于症状分析，推测为细菌性呼吸道感染，置信度：85%
                                </div>
                            </div>
                            
                            <div class="data-row">
                                <span class="data-row__label">可能病原</span>
                                <span class="data-row__value">大肠杆菌、支原体</span>
                            </div>
                            
                            <div class="data-row">
                                <span class="data-row__label">建议用药</span>
                                <span class="data-row__value">恩诺沙星、泰乐菌素</span>
                            </div>
                            
                            <div class="data-row">
                                <span class="data-row__label">治疗周期</span>
                                <span class="data-row__value">5-7天</span>
                            </div>
                            
                            <div class="t-message t-message--warning">
                                <div class="t-message__icon">!</div>
                                <div class="t-message__content">
                                    <div class="t-message__title">注意事项</div>
                                    AI诊断仅供参考，请结合实际情况和专业兽医意见进行确诊
                                </div>
                            </div>
                            
                            <div class="t-grid t-grid--2" style="margin-top: var(--td-spacer-3);">
                                <button class="t-button t-button--default tap-highlight" onclick="saveDiagnosis()">保存诊断</button>
                                <button class="t-button t-button--primary tap-highlight" onclick="createTreatmentPlan()">制定治疗方案</button>
                            </div>
                        </div>
                    </div>

                    <!-- 历史诊断记录 -->
                    <div class="t-card">
                        <div class="t-card__header">最近AI诊断记录</div>
                        <div class="t-card__content">
                            <div class="t-list">
                                <div class="t-list-item">
                                    <div class="t-list-item__content">
                                        <div class="t-list-item__title">呼吸道感染诊断</div>
                                        <div class="t-list-item__description">症状：咳嗽、精神萎靡 • 置信度：85% • 12月9日</div>
                                    </div>
                                    <div class="t-list-item__action">
                                        <span class="t-tag t-tag--success">已确诊</span>
                                    </div>
                                </div>
                                
                                <div class="t-list-item">
                                    <div class="t-list-item__content">
                                        <div class="t-list-item__title">消化道疾病诊断</div>
                                        <div class="t-list-item__description">症状：腹泻、食欲减退 • 置信度：78% • 12月7日</div>
                                    </div>
                                    <div class="t-list-item__action">
                                        <span class="t-tag t-tag--primary">待确认</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            return page;
        }

        // 新增功能函数
        function editRecord() { showToast('编辑记录功能开发中'); }
        function saveRecord() { showToast('记录已保存'); }
        function updateStatus() { showToast('状态已更新'); }
        function addTreatmentRecord() { showToast('新增治疗记录功能开发中'); }
        function viewTreatmentDetail(index) { showToast(`查看治疗记录 ${index + 1} 详情`); }
        function batchTreatmentUpdate() { showToast('批量更新状态功能开发中'); }
        function exportTreatmentReport() { showToast('导出治疗报告功能开发中'); }
        function startNewDiagnosis() { 
            document.getElementById('symptomDescription').value = '';
            document.getElementById('affectedCount').value = '1';
            document.getElementById('dayAge').value = '';
            document.getElementById('temperature').value = '';
            document.getElementById('diagnosisResult').style.display = 'none';
            showToast('已清空表单，请输入新的症状');
        }
        function startAIDiagnosis() { 
            showToast('AI正在分析症状...');
            setTimeout(() => {
                document.getElementById('diagnosisResult').style.display = 'block';
                showToast('AI诊断完成');
            }, 2000);
        }
        function saveDiagnosis() { showToast('诊断结果已保存'); }
        function createTreatmentPlan() { showToast('治疗方案已生成，跳转到治疗管理'); }

        // 创建治愈率分析页面
        function createCureAnalysisPage(pageId) {
            const page = document.createElement('div');
            page.className = 'page';
            page.id = pageId;
            
            page.innerHTML = `
                <div class="mp-navbar">
                    <div class="mp-navbar-content">
                        <div class="mp-navbar-back tap-highlight" onclick="goBack()">←</div>
                        <div class="mp-navbar-title">治愈率分析</div>
                        <div class="mp-navbar-actions">
                            <div class="mp-navbar-action tap-highlight" onclick="exportReport()">导出</div>
                        </div>
                    </div>
                </div>

                <div class="page-content">
                    <div class="page-subtitle">分析治疗效果和治愈率趋势</div>
                    
                    <!-- 治愈率概况 -->
                    <div class="t-card">
                        <div class="t-card__header">治愈率概况</div>
                        <div class="t-card__content">
                            <div class="ring-progress">
                                <svg>
                                    <circle class="ring-progress__track" cx="60" cy="60" r="50"></circle>
                                    <circle class="ring-progress__bar" cx="60" cy="60" r="50" 
                                            style="stroke-dashoffset: 55;"></circle>
                                </svg>
                                <div class="ring-progress__text">92.3%</div>
                            </div>
                            <div class="text-center" style="color: var(--td-text-color-secondary); margin-bottom: var(--td-spacer-3);">
                                本月整体治愈率
                            </div>
                            
                            <div class="data-row">
                                <span class="data-row__label">总治疗病例</span>
                                <span class="data-row__value">26例</span>
                            </div>
                            
                            <div class="data-row">
                                <span class="data-row__label">已治愈</span>
                                <span class="data-row__value text-success">24例</span>
                            </div>
                            
                            <div class="data-row">
                                <span class="data-row__label">平均治疗周期</span>
                                <span class="data-row__value">5.2天</span>
                            </div>
                        </div>
                    </div>

                    <!-- 疾病治愈率分析 -->
                    <div class="t-card">
                        <div class="t-card__header">分疾病治愈率</div>
                        <div class="t-card__content">
                            <div class="chart-container">
                                <div class="bar-chart">
                                    <div class="bar-chart__item">
                                        <div class="bar-chart__bar bar-chart__bar--success" style="height: 95px;"></div>
                                        <div class="bar-chart__label">呼吸道</div>
                                    </div>
                                    <div class="bar-chart__item">
                                        <div class="bar-chart__bar bar-chart__bar--success" style="height: 90px;"></div>
                                        <div class="bar-chart__label">消化道</div>
                                    </div>
                                    <div class="bar-chart__item">
                                        <div class="bar-chart__bar" style="height: 85px;"></div>
                                        <div class="bar-chart__label">其他</div>
                                    </div>
                                </div>
                                <div class="text-center" style="color: var(--td-text-color-secondary); font-size: var(--td-font-size-s); margin-top: var(--td-spacer-2);">
                                    各类疾病治愈率对比
                                </div>
                            </div>
                            
                            <div class="t-list">
                                <div class="t-list-item">
                                    <div class="t-list-item__content">
                                        <div class="t-list-item__title">呼吸道疾病</div>
                                        <div class="t-list-item__description">治愈率：95% • 平均治疗：6天 • 复发率：5%</div>
                                    </div>
                                    <div class="t-list-item__action">
                                        <span class="t-tag t-tag--success">优秀</span>
                                    </div>
                                </div>
                                
                                <div class="t-list-item">
                                    <div class="t-list-item__content">
                                        <div class="t-list-item__title">消化道疾病</div>
                                        <div class="t-list-item__description">治愈率：90% • 平均治疗：4天 • 复发率：8%</div>
                                    </div>
                                    <div class="t-list-item__action">
                                        <span class="t-tag t-tag--success">良好</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            return page;
        }

        // 创建待诊断页面
        function createPendingDiagnosisPage(pageId) {
            const page = document.createElement('div');
            page.className = 'page';
            page.id = pageId;
            
            page.innerHTML = `
                <div class="mp-navbar">
                    <div class="mp-navbar-content">
                        <div class="mp-navbar-back tap-highlight" onclick="goBack()">←</div>
                        <div class="mp-navbar-title">待诊断</div>
                        <div class="mp-navbar-actions">
                            <div class="mp-navbar-action tap-highlight" onclick="batchDiagnosis()">批量</div>
                        </div>
                    </div>
                </div>

                <div class="page-content">
                    <div class="page-subtitle">处理需要诊断的异常个体</div>
                    
                    <!-- 待诊断统计 -->
                    <div class="t-card">
                        <div class="t-card__header">待诊断统计</div>
                        <div class="t-card__content">
                            <div class="t-grid t-grid--3">
                                <div class="stat-card stat-card--warning">
                                    <div class="stat-card__value">2</div>
                                    <div class="stat-card__label">紧急</div>
                                </div>
                                <div class="stat-card stat-card--primary">
                                    <div class="stat-card__value">3</div>
                                    <div class="stat-card__label">一般</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-card__value">1</div>
                                    <div class="stat-card__label">观察</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 待诊断列表 -->
                    <div class="t-card">
                        <div class="t-card__header">待诊断病例</div>
                        <div class="t-card__content">
                            <div class="t-list">
                                <div class="t-list-item" onclick="startDiagnosis(0)">
                                    <div class="t-list-item__content">
                                        <div class="t-list-item__title">1号鹅舍异常个体</div>
                                        <div class="t-list-item__description">
                                            症状：呼吸困难、张嘴呼吸 • 发现：2小时前 • 批次：GS001
                                        </div>
                                    </div>
                                    <div class="t-list-item__action">
                                        <span class="t-tag t-tag--error">紧急</span>
                                    </div>
                                </div>
                                
                                <div class="t-list-item" onclick="startDiagnosis(1)">
                                    <div class="t-list-item__content">
                                        <div class="t-list-item__title">2号鹅舍异常个体</div>
                                        <div class="t-list-item__description">
                                            症状：腹泻、精神不振 • 发现：4小时前 • 批次：GS002
                                        </div>
                                    </div>
                                    <div class="t-list-item__action">
                                        <span class="t-tag t-tag--warning">一般</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="t-grid t-grid--2" style="margin-top: var(--td-spacer-3);">
                                <button class="t-button t-button--primary tap-highlight" onclick="navigateToPage('ai-diagnosis')">AI快速诊断</button>
                                <button class="t-button t-button--default tap-highlight" onclick="manualDiagnosis()">人工诊断</button>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            return page;
        }

        // 创建康复记录页面
        function createRecoveryRecordsPage(pageId) {
            const page = document.createElement('div');
            page.className = 'page';
            page.id = pageId;
            
            page.innerHTML = `
                <div class="mp-navbar">
                    <div class="mp-navbar-content">
                        <div class="mp-navbar-back tap-highlight" onclick="goBack()">←</div>
                        <div class="mp-navbar-title">康复观察</div>
                        <div class="mp-navbar-actions">
                            <div class="mp-navbar-action tap-highlight" onclick="addRecoveryRecord()">+</div>
                        </div>
                    </div>
                </div>

                <div class="page-content">
                    <div class="page-subtitle">管理治疗后的康复观察期个体</div>
                    
                    <!-- 康复统计 -->
                    <div class="t-card">
                        <div class="t-card__header">康复统计</div>
                        <div class="t-card__content">
                            <div class="t-grid t-grid--2">
                                <div class="stat-card stat-card--primary">
                                    <div class="stat-card__value">1</div>
                                    <div class="stat-card__label">康复观察中</div>
                                </div>
                                <div class="stat-card stat-card--success">
                                    <div class="stat-card__value">15</div>
                                    <div class="stat-card__label">本月康复</div>
                                </div>
                            </div>
                            
                            <div class="data-row">
                                <span class="data-row__label">平均康复时间</span>
                                <span class="data-row__value">3.2天</span>
                            </div>
                            
                            <div class="data-row">
                                <span class="data-row__label">复发率</span>
                                <span class="data-row__value text-success">6.7%</span>
                            </div>
                        </div>
                    </div>

                    <!-- 康复记录列表 -->
                    <div class="t-card">
                        <div class="t-card__header">康复观察个体</div>
                        <div class="t-card__content">
                            <div class="t-list">
                                <div class="t-list-item" onclick="viewRecoveryDetail(0)">
                                    <div class="t-list-item__content">
                                        <div class="t-list-item__title">腹泻治疗康复观察</div>
                                        <div class="t-list-item__description">
                                            批次：GS002 • 治疗完成：2天前 • 当前状态：良好
                                        </div>
                                    </div>
                                    <div class="t-list-item__action">
                                        <span class="t-tag t-tag--success">康复良好</span>
                                    </div>
                                </div>
                            </div>
                            
                            <button class="t-button t-button--primary t-button--block tap-highlight" 
                                    style="margin-top: var(--td-spacer-3);" onclick="addRecoveryRecord()">新增康复记录</button>
                        </div>
                    </div>
                </div>
            `;
            
            return page;
        }

        // 创建保健措施页面
        function createHealthCarePage(pageId) {
            const page = document.createElement('div');
            page.className = 'page';
            page.id = pageId;
            
            page.innerHTML = `
                <div class="mp-navbar">
                    <div class="mp-navbar-content">
                        <div class="mp-navbar-back tap-highlight" onclick="goBack()">←</div>
                        <div class="mp-navbar-title">保健措施</div>
                        <div class="mp-navbar-actions">
                            <div class="mp-navbar-action tap-highlight" onclick="addHealthCareRecord()">+</div>
                        </div>
                    </div>
                </div>

                <div class="page-content">
                    <div class="page-subtitle">记录和管理日常保健措施执行情况</div>
                    
                    <!-- 保健措施统计 -->
                    <div class="t-card">
                        <div class="t-card__header">本周保健执行</div>
                        <div class="t-card__content">
                            <div class="data-row">
                                <span class="data-row__label">营养保健执行率</span>
                                <span class="data-row__value">98.5% <span class="t-tag t-tag--success">优秀</span></span>
                            </div>
                            <div class="t-progress">
                                <div class="t-progress__bar t-progress__bar--success" style="width: 98.5%"></div>
                            </div>
                            
                            <div class="data-row">
                                <span class="data-row__label">维生素补充</span>
                                <span class="data-row__value">每日执行</span>
                            </div>
                            
                            <div class="data-row">
                                <span class="data-row__label">益生菌添加</span>
                                <span class="data-row__value">每周2次</span>
                            </div>
                        </div>
                    </div>

                    <!-- 保健记录表单 -->
                    <div class="t-card">
                        <div class="t-card__header">新增保健记录</div>
                        <div class="t-card__content">
                            <div class="form-item">
                                <div class="form-label">保健类型</div>
                                <select class="form-input" id="healthCareType">
                                    <option value="营养补充">营养补充</option>
                                    <option value="维生素">维生素</option>
                                    <option value="益生菌">益生菌</option>
                                    <option value="电解质">电解质</option>
                                </select>
                            </div>
                            
                            <div class="form-item">
                                <div class="form-label">执行时间</div>
                                <input type="datetime-local" class="form-input" id="executionTime">
                            </div>
                            
                            <div class="form-item">
                                <div class="form-label">用量</div>
                                <input type="text" class="form-input" id="dosage" placeholder="如：每只0.5g">
                            </div>
                            
                            <div class="form-item" style="flex-direction: column; align-items: stretch;">
                                <div class="form-label" style="margin-bottom: var(--td-spacer-1);">备注</div>
                                <textarea class="form-textarea" id="healthCareNotes" placeholder="记录具体的保健措施和效果观察..."></textarea>
                            </div>
                            
                            <div class="t-grid t-grid--2" style="margin-top: var(--td-spacer-3);">
                                <button class="t-button t-button--default tap-highlight" onclick="saveHealthCareDraft()">保存草稿</button>
                                <button class="t-button t-button--primary tap-highlight" onclick="submitHealthCare()">提交记录</button>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            return page;
        }

        // 新增辅助函数
        function batchDiagnosis() { showToast('批量诊断功能开发中'); }
        function startDiagnosis(index) { showToast(`开始诊断病例 ${index + 1}`); }
        function manualDiagnosis() { showToast('人工诊断功能开发中'); }
        function addRecoveryRecord() { showToast('新增康复记录功能开发中'); }
        function viewRecoveryDetail(index) { showToast(`查看康复详情 ${index + 1}`); }
        function addHealthCareRecord() { showToast('新增保健记录功能开发中'); }
        function saveHealthCareDraft() { showToast('草稿已保存'); }
        function submitHealthCare() { 
            showToast('保健记录已提交'); 
            setTimeout(() => {
                const healthCareType = document.getElementById('healthCareType');
                const executionTime = document.getElementById('executionTime');
                const dosage = document.getElementById('dosage');
                const healthCareNotes = document.getElementById('healthCareNotes');
                
                if (healthCareType) healthCareType.selectedIndex = 0;
                if (executionTime) executionTime.value = '';
                if (dosage) dosage.value = '';
                if (healthCareNotes) healthCareNotes.value = '';
            }, 1000);
        }

        // 页面初始化
        document.addEventListener('DOMContentLoaded', function() {
            console.log('健康管理中心完整版加载完成');
            
            const mainPage = document.getElementById('main-page');
            if (mainPage) {
                mainPage.classList.add('active');
                currentPage = 'main-page';
            }
            
            document.querySelectorAll('.page').forEach(page => {
                if (page.id !== 'main-page') {
                    page.classList.remove('active');
                }
            });
            
            setTimeout(() => {
                showToast('健康管理中心加载完成');
            }, 500);
        });
    </script>
</body>
</html>
