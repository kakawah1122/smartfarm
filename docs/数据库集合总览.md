# æ•°æ®åº“é›†åˆæ€»è§ˆ

## é›†åˆç»Ÿè®¡
- **æ€»é›†åˆæ•°**ï¼š45ä¸ª
- **æ¨¡å—æ•°**ï¼š8ä¸ª
- **å‘½åè§„èŒƒ**ï¼šæ¨¡å—å‰ç¼€_åŠŸèƒ½æè¿°

## å®Œæ•´é›†åˆåˆ—è¡¨ï¼ˆæŒ‰æ¨¡å—åˆ†ç»„ï¼‰

### ğŸ“± ç”¨æˆ·ç®¡ç†æ¨¡å—ï¼ˆ4ä¸ªï¼‰
| é›†åˆåç§° | è¯´æ˜ | æƒé™ç±»å‹ | ä¸»è¦ç´¢å¼• |
|---------|------|---------|---------|
| `wx_users` | ç”¨æˆ·åŸºç¡€ä¿¡æ¯ | ä»…åˆ›å»ºè€…å¯è¯»ï¼Œç¦æ­¢å†™å…¥ | _openid, username |
| `wx_user_invites` | ç”¨æˆ·é‚€è¯·å…³ç³» | é‚€è¯·åŒæ–¹å¯è¯»ï¼Œç¦æ­¢å†™å…¥ | inviter_invitee |
| `user_notifications` | ç”¨æˆ·é€šçŸ¥æ¶ˆæ¯ | ä»…åˆ›å»ºè€…å¯è¯»ï¼Œç¦æ­¢å†™å…¥ | _openid_isRead_createTime |
| `user_notification_settings` | é€šçŸ¥è®¾ç½® | ä»…åˆ›å»ºè€…å¯è¯»å†™ | _openid |

### ğŸ­ ç”Ÿäº§ç®¡ç†æ¨¡å—ï¼ˆ6ä¸ªï¼‰
| é›†åˆåç§° | è¯´æ˜ | æƒé™ç±»å‹ | ä¸»è¦ç´¢å¼• |
|---------|------|---------|---------|
| `prod_batch_entries` | å…¥æ è®°å½• | userIdå­—æ®µæƒé™ | batchCode, userId_createTime |
| `prod_batch_exits` | å‡ºæ è®°å½• | userIdå­—æ®µæƒé™ | batchId_createTime |
| `prod_materials` | ç‰©æ–™ä¿¡æ¯ | æ‰€æœ‰ç”¨æˆ·å¯è¯» | materialCode |
| `prod_material_records` | ç‰©æ–™ä½¿ç”¨è®°å½• | userIdå­—æ®µæƒé™ | userId_materialId |
| `prod_inventory_logs` | åº“å­˜æ—¥å¿— | ä»…åˆ›å»ºè€…å¯è¯»ï¼Œç¦æ­¢å†™å…¥ | _openid_createTime |
| `production_batches` | æ‰¹æ¬¡ä¿¡æ¯ | æ‰€æœ‰ç”¨æˆ·å¯è¯»ï¼Œä»…åˆ›å»ºè€…å¯å†™ | batchCode |

### ğŸ¥ å¥åº·ç®¡ç†æ¨¡å—ï¼ˆ9ä¸ªï¼‰
| é›†åˆåç§° | è¯´æ˜ | æƒé™ç±»å‹ | ä¸»è¦ç´¢å¼• |
|---------|------|---------|---------|
| `health_records` | å¥åº·è®°å½• | æ‰€æœ‰ç”¨æˆ·å¯è¯»ï¼Œä»…åˆ›å»ºè€…å¯å†™ | animalId_recordDate |
| `health_prevention_records` | é¢„é˜²è®°å½• | ä»…åˆ›å»ºè€…å¯è¯»å†™ | _openid_createTime |
| `health_treatment_records` | æ²»ç–—è®°å½• | ä»…åˆ›å»ºè€…å¯è¯»å†™ | _openid_status |
| `health_ai_diagnosis` | AIè¯Šæ–­è®°å½• | ä»…åˆ›å»ºè€…å¯è¯»å†™ | _openid_createTime |
| `health_cure_records` | æ²»æ„ˆè®°å½• | ä»…åˆ›å»ºè€…å¯è¯»å†™ | _openid_createTime |
| `health_death_records` | æ­»äº¡è®°å½• | ä»…åˆ›å»ºè€…å¯è¯»å†™ | _openid_createTime |
| `health_followup_records` | è·Ÿè¸ªè®°å½• | ä»…åˆ›å»ºè€…å¯è¯»å†™ | treatmentId |
| `health_alerts` | å¥åº·é¢„è­¦ | ä»…åˆ›å»ºè€…å¯è¯»ï¼Œç¦æ­¢å†™å…¥ | _openid_status |
| `health_vaccine_plans` | ç–«è‹—è®¡åˆ’ | æ‰€æœ‰ç”¨æˆ·å¯è¯» | dayAge |

### ğŸ’° è´¢åŠ¡ç®¡ç†æ¨¡å—ï¼ˆ5ä¸ªï¼‰
| é›†åˆåç§° | è¯´æ˜ | æƒé™ç±»å‹ | ä¸»è¦ç´¢å¼• |
|---------|------|---------|---------|
| `finance_cost_records` | æˆæœ¬è®°å½• | æ‰€æœ‰ç”¨æˆ·å¯è¯»ï¼Œä»…åˆ›å»ºè€…å¯å†™ | category_recordDate |
| `finance_revenue_records` | æ”¶å…¥è®°å½• | æ‰€æœ‰ç”¨æˆ·å¯è¯»ï¼Œä»…åˆ›å»ºè€…å¯å†™ | category_recordDate |
| `finance_reports` | è´¢åŠ¡æŠ¥è¡¨ | æ‰€æœ‰ç”¨æˆ·å¯è¯»ï¼Œç¦æ­¢å†™å…¥ | reportDate |
| `finance_summaries` | è´¢åŠ¡æ±‡æ€» | æ‰€æœ‰ç”¨æˆ·å¯è¯»ï¼Œç¦æ­¢å†™å…¥ | summaryDate |
| `finance_analysis_history` | åˆ†æå†å² | ä»…åˆ›å»ºè€…å¯è¯»å†™ | _openid_createTime |

### âœ… ä»»åŠ¡ç®¡ç†æ¨¡å—ï¼ˆ4ä¸ªï¼‰
| é›†åˆåç§° | è¯´æ˜ | æƒé™ç±»å‹ | ä¸»è¦ç´¢å¼• |
|---------|------|---------|---------|
| `task_batch_schedules` | æ‰¹æ¬¡ä»»åŠ¡è®¡åˆ’ | ä»…åˆ›å»ºè€…å¯è¯»å†™ | batchId_dayAge |
| `task_completions` | ä»»åŠ¡å®Œæˆè®°å½• | ä»…åˆ›å»ºè€…å¯è¯»å†™ | taskId_completedAt |
| `task_records` | ä»»åŠ¡è®°å½• | ä»…åˆ›å»ºè€…å¯è¯»å†™ | _openid_createTime |
| `task_templates` | ä»»åŠ¡æ¨¡æ¿ | ä»…åˆ›å»ºè€…å¯è¯»ï¼Œç¦æ­¢å†™å…¥ | _openid_templateName |

### âš™ï¸ ç³»ç»Ÿç®¡ç†æ¨¡å—ï¼ˆ11ä¸ªï¼‰
| é›†åˆåç§° | è¯´æ˜ | æƒé™ç±»å‹ | ä¸»è¦ç´¢å¼• |
|---------|------|---------|---------|
| `sys_audit_logs` | å®¡è®¡æ—¥å¿— | æ‰€æœ‰ç”¨æˆ·ä¸å¯è¯»å†™ | operatorId_operationTime |
| `sys_ai_cache` | AIç¼“å­˜ | æ‰€æœ‰ç”¨æˆ·ä¸å¯è¯»å†™ | cacheKey |
| `sys_ai_usage` | AIä½¿ç”¨è®°å½• | æ‰€æœ‰ç”¨æˆ·ä¸å¯è¯»å†™ | userId_usageDate |
| `sys_approval_logs` | å®¡æ‰¹æ—¥å¿— | å®¡æ‰¹ç›¸å…³æ–¹å¯è¯» | recordId_status |
| `sys_cleanup_logs` | æ¸…ç†æ—¥å¿— | æ‰€æœ‰ç”¨æˆ·ä¸å¯è¯»å†™ | cleanupDate |
| `sys_configurations` | ç³»ç»Ÿé…ç½® | æ‰€æœ‰ç”¨æˆ·ä¸å¯è¯»å†™ | configKey |
| `sys_overview_stats` | æ¦‚è§ˆç»Ÿè®¡ | æ‰€æœ‰ç”¨æˆ·å¯è¯»ï¼Œç¦æ­¢å†™å…¥ | statDate |
| `sys_notifications` | ç³»ç»Ÿé€šçŸ¥ | æ‰€æœ‰ç”¨æˆ·å¯è¯»ï¼Œç¦æ­¢å†™å…¥ | publishDate |
| `sys_permissions` | æƒé™é…ç½® | æ‰€æœ‰ç”¨æˆ·ä¸å¯è¯»å†™ | roleId |
| `sys_roles` | è§’è‰²é…ç½® | æ‰€æœ‰ç”¨æˆ·ä¸å¯è¯»å†™ | roleName |
| `sys_storage_statistics` | å­˜å‚¨ç»Ÿè®¡ | æ‰€æœ‰ç”¨æˆ·ä¸å¯è¯»å†™ | statDate |

### ğŸ“š çŸ¥è¯†åº“æ¨¡å—ï¼ˆ1ä¸ªï¼‰
| é›†åˆåç§° | è¯´æ˜ | æƒé™ç±»å‹ | ä¸»è¦ç´¢å¼• |
|---------|------|---------|---------|
| `knowledge_articles` | çŸ¥è¯†æ–‡ç«  | æ‰€æœ‰ç”¨æˆ·å¯è¯» | category_publishDate |

### ğŸ“ æ–‡ä»¶ç®¡ç†æ¨¡å—ï¼ˆ2ä¸ªï¼‰
| é›†åˆåç§° | è¯´æ˜ | æƒé™ç±»å‹ | ä¸»è¦ç´¢å¼• |
|---------|------|---------|---------|
| `file_dynamic_records` | åŠ¨æ€æ–‡ä»¶è®°å½• | ä»…åˆ›å»ºè€…å¯è¯»å†™ | _openid_fileType |
| `file_static_records` | é™æ€æ–‡ä»¶è®°å½• | æ‰€æœ‰ç”¨æˆ·å¯è¯» | fileType_uploadDate |

## æƒé™ç±»å‹ç»Ÿè®¡

| æƒé™ç±»å‹ | æ•°é‡ | å æ¯” |
|---------|------|------|
| ä»…åˆ›å»ºè€…å¯è¯»å†™ | 12 | 26.7% |
| æ‰€æœ‰ç”¨æˆ·å¯è¯»ï¼Œä»…åˆ›å»ºè€…å¯å†™ | 4 | 8.9% |
| æ‰€æœ‰ç”¨æˆ·å¯è¯»ï¼Œç¦æ­¢å†™å…¥ | 8 | 17.8% |
| ä»…åˆ›å»ºè€…å¯è¯»ï¼Œç¦æ­¢å†™å…¥ | 5 | 11.1% |
| userIdå­—æ®µæƒé™ | 3 | 6.7% |
| é‚€è¯·å…³ç³»æƒé™ | 1 | 2.2% |
| å®¡æ‰¹æ—¥å¿—æƒé™ | 1 | 2.2% |
| æ‰€æœ‰ç”¨æˆ·ä¸å¯è¯»å†™ | 8 | 17.8% |
| å…¶ä»– | 3 | 6.7% |

## ç´¢å¼•é…ç½®åŸåˆ™

### é€šç”¨ç´¢å¼•ï¼ˆå¿…éœ€ï¼‰
- `_openid_createTime`ï¼šç”¨æˆ·æ•°æ®æ—¶é—´æ’åº
- `status_createTime`ï¼šçŠ¶æ€ç­›é€‰
- `isDeleted`ï¼šè½¯åˆ é™¤æ ‡è®°

### ä¸šåŠ¡ç´¢å¼•ï¼ˆæŒ‰éœ€ï¼‰
- `batchId`ï¼šæ‰¹æ¬¡ç›¸å…³æŸ¥è¯¢
- `category`ï¼šåˆ†ç±»ç­›é€‰
- `recordDate`ï¼šæ—¥æœŸèŒƒå›´æŸ¥è¯¢
- å”¯ä¸€ç´¢å¼•ï¼š`batchCode`ã€`username`ç­‰

## é…ç½®ä¼˜å…ˆçº§

### ğŸ”´ é«˜ä¼˜å…ˆçº§ï¼ˆç«‹å³é…ç½®ï¼‰
1. wx_users - ç”¨æˆ·ç³»ç»Ÿæ ¸å¿ƒ
2. prod_batch_entries - ç”Ÿäº§æ ¸å¿ƒ
3. health_records - å¥åº·æ ¸å¿ƒ
4. finance_cost_records - è´¢åŠ¡æ ¸å¿ƒ
5. task_templates - ä»»åŠ¡æ ¸å¿ƒ

### ğŸŸ¡ ä¸­ä¼˜å…ˆçº§ï¼ˆå°½å¿«é…ç½®ï¼‰
- user_notifications
- health_treatment_records
- task_batch_schedules
- finance_revenue_records

### ğŸŸ¢ ä½ä¼˜å…ˆçº§ï¼ˆæŒ‰éœ€é…ç½®ï¼‰
- sys_* ç³»ç»Ÿé›†åˆ
- knowledge_articles
- file_* æ–‡ä»¶é›†åˆ

## æ³¨æ„äº‹é¡¹

âš ï¸ **é‡è¦æé†’**ï¼š
1. **äº‘å‡½æ•°å¿…é¡»æ‰‹åŠ¨è®¾ç½® `_openid` å­—æ®µ**
2. **å®¢æˆ·ç«¯è‡ªåŠ¨æ·»åŠ  `_openid`ï¼Œäº‘å‡½æ•°ä¸ä¼š**
3. **æ‰€æœ‰å†™æ“ä½œåº”é€šè¿‡äº‘å‡½æ•°è¿›è¡Œ**
4. **ä¼˜å…ˆä½¿ç”¨è½¯åˆ é™¤è€Œéç¡¬åˆ é™¤**
5. **å®šæœŸæ£€æŸ¥ç´¢å¼•ä½¿ç”¨æƒ…å†µ**

## å¿«é€Ÿæ£€æŸ¥å‘½ä»¤

åœ¨é¡¹ç›®æ ¹ç›®å½•è¿è¡Œï¼š
```bash
node scripts/check-collections-status.js
```

æŸ¥çœ‹é›†åˆé…ç½®çŠ¶æ€å’Œç¼ºå¤±é¡¹ã€‚
