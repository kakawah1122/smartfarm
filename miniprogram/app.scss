/**app.scss**/
@import "./miniprogram_npm/tdesign-miniprogram/common/style/index.wxss";
@import "./styles/font-override.wxss";

/* 修复 TDesign 字体加载问题 - 彻底覆盖外部字体定义 */
@font-face {
  font-family: t !important;
  /* 使用本地系统字体替代外部字体文件，避免网络请求 */
  src: local('PingFang SC Regular'), 
       local('Helvetica Neue'), 
       local('Arial'), 
       local('sans-serif') !important;
  font-weight: 400 !important;
  font-style: normal !important;
}

/* 强制覆盖所有可能的t字体族引用 */
.t-icon,
.t-icon-base,
[class*="t-icon-"]::before,
.t-icon::before {
  font-family: 'PingFang SC', 'Helvetica Neue', Arial, sans-serif !important;
}

/* 禁用所有可能的外部字体加载 */
@font-face {
  font-family: "t";
  src: local('PingFang SC Regular'), 
       local('Helvetica Neue'), 
       local('Arial'), 
       local('sans-serif') !important;
  font-weight: 400 !important;
  font-style: normal !important;
}

/* 全局设计系统 */
/* 强制浅色背景 - 解决真机暗色问题 */
page {
  background-color: #f5f5f5 !important;
  
  /* 安全区域变量 - 刘海屏适配 */
  --safe-area-inset-top: env(safe-area-inset-top);
  --safe-area-inset-bottom: env(safe-area-inset-bottom);
  --safe-area-inset-left: env(safe-area-inset-left);
  --safe-area-inset-right: env(safe-area-inset-right);
  
  /* 状态栏高度适配 */
  --status-bar-height: var(--safe-area-inset-top, 44rpx);
  --navbar-height: calc(88rpx + var(--safe-area-inset-top, 0rpx));
  --total-header-height: calc(160rpx + var(--safe-area-inset-top, 0rpx));
  
  /* TDesign 主题色覆盖 */
  --td-brand-color: #14b8a6;
  --td-warning-color: #f59e0b;
  --td-error-color: #ef4444;
  --td-success-color: #10b981;
  
  /* 主色调系统 - 参照BOSS直聘蓝绿色设计 */
  --primary-blue: #4ade80;
  --primary-teal: #14b8a6;
  --primary-cyan: #06b6d4;
  --primary-blue-light: #dcfce7;
  --primary-blue-lighter: #f0fdf4;
  --primary-blue-dark: #059669;
  --primary-gradient: linear-gradient(135deg, #14b8a6 0%, #06b6d4 50%, #0891b2 100%);
  --primary-gradient-reverse: linear-gradient(135deg, #0891b2 0%, #06b6d4 50%, #14b8a6 100%);
  --header-gradient: linear-gradient(135deg, #14b8a6 0%, #06b6d4 100%);
  
  /* 语义化色彩 */
  --color-success: #10b981;
  --color-success-light: #dcfdf4;
  --color-success-lighter: #ecfdf5;
  --color-warning: #f59e0b;
  --color-warning-light: #fef3c7;
  --color-warning-lighter: #fffbeb;
  --color-danger: #ef4444;
  --color-danger-light: #fee2e2;
  --color-danger-lighter: #fef2f2;
  --color-info: #3b82f6;
  --color-info-light: #dbeafe;
  --color-info-lighter: #eff6ff;
  
  /* 中性色系统 */
  --color-text-primary: #111827;
  --color-text-secondary: #374151;
  --color-text-tertiary: #6b7280;
  --color-text-quaternary: #9ca3af;
  --color-text-disabled: #d1d5db;
  
  /* 背景色系统 - 强制浅色 */
  --color-bg-primary: #ffffff !important;
  --color-bg-secondary: #f9fafb !important;
  --color-bg-tertiary: #f3f4f6 !important;
  --color-bg-quaternary: #e5e7eb !important;
  --color-bg-page: #f5f5f5 !important;
  
  /* 边框色系统 */
  --color-border-light: #f3f4f6;
  --color-border-base: #e5e7eb;
  --color-border-dark: #d1d5db;
  
  /* 阴影系统 */
  --shadow-sm: 0 2rpx 8rpx rgba(0, 0, 0, 0.04);
  --shadow-base: 0 4rpx 20rpx rgba(0, 0, 0, 0.08);
  --shadow-md: 0 8rpx 32rpx rgba(0, 0, 0, 0.12);
  --shadow-lg: 0 16rpx 48rpx rgba(0, 0, 0, 0.16);
  --shadow-colored: 0 4rpx 24rpx rgba(14, 165, 233, 0.15);
  
  /* 圆角系统 */
  --radius-xs: 8rpx;
  --radius-sm: 12rpx;
  --radius-base: 16rpx;
  --radius-md: 20rpx;
  --radius-lg: 24rpx;
  --radius-xl: 32rpx;
  --radius-full: 50%;
  
  /* 间距系统 */
  --spacing-xs: 8rpx;
  --spacing-sm: 12rpx;
  --spacing-base: 16rpx;
  --spacing-md: 20rpx;
  --spacing-lg: 24rpx;
  --spacing-xl: 32rpx;
  --spacing-2xl: 40rpx;
  --spacing-3xl: 48rpx;
  
  /* 字体系统 */
  --font-size-xs: 20rpx;
  --font-size-sm: 22rpx;
  --font-size-base: 24rpx;
  --font-size-md: 28rpx;
  --font-size-lg: 32rpx;
  --font-size-xl: 36rpx;
  --font-size-2xl: 40rpx;
  --font-size-3xl: 48rpx;
  --font-size-4xl: 56rpx;
  
  /* 行高系统 */
  --line-height-tight: 1.2;
  --line-height-base: 1.4;
  --line-height-relaxed: 1.6;
  
  /* 字重系统 */
  --font-weight-normal: 400;
  --font-weight-medium: 500;
  --font-weight-semibold: 600;
  --font-weight-bold: 700;
  
  /* Z-index 层级系统 */
  --z-index-dropdown: 1000;
  --z-index-sticky: 1010;
  --z-index-fixed: 1020;
  --z-index-modal-backdrop: 1030;
  --z-index-modal: 1040;
  --z-index-popover: 1050;
  --z-index-tooltip: 1060;
  
  background-color: var(--color-bg-page) !important;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
  color: var(--color-text-primary);
  line-height: var(--line-height-base);
}

/* 工具类系统 */

/* 布局类 */
.flex { display: flex; }
.flex-col { flex-direction: column; }
.flex-row { flex-direction: row; }
.flex-center { display: flex; align-items: center; justify-content: center; }
.flex-between { display: flex; align-items: center; justify-content: space-between; }
.flex-around { display: flex; align-items: center; justify-content: space-around; }
.flex-start { display: flex; align-items: center; justify-content: flex-start; }
.flex-end { display: flex; align-items: center; justify-content: flex-end; }
.items-center { align-items: center; }
.items-start { align-items: flex-start; }
.items-end { align-items: flex-end; }
.justify-center { justify-content: center; }
.justify-between { justify-content: space-between; }
.justify-around { justify-content: space-around; }
.flex-1 { flex: 1; }
.flex-shrink-0 { flex-shrink: 0; }

/* 文本类 */
.text-center { text-align: center; }
.text-left { text-align: left; }
.text-right { text-align: right; }
.text-primary { color: var(--primary-teal); }
.text-secondary { color: var(--color-text-secondary); }
.text-tertiary { color: var(--color-text-tertiary); }
.text-quaternary { color: var(--color-text-quaternary); }
.text-success { color: var(--color-success); }
.text-warning { color: var(--color-warning); }
.text-danger { color: var(--color-danger); }
.text-info { color: var(--color-info); }

/* 字体大小 */
.text-xs { font-size: var(--font-size-xs); }
.text-sm { font-size: var(--font-size-sm); }
.text-base { font-size: var(--font-size-base); }
.text-md { font-size: var(--font-size-md); }
.text-lg { font-size: var(--font-size-lg); }
.text-xl { font-size: var(--font-size-xl); }
.text-2xl { font-size: var(--font-size-2xl); }
.text-3xl { font-size: var(--font-size-3xl); }
.text-4xl { font-size: var(--font-size-4xl); }

/* 字重 */
.font-normal { font-weight: var(--font-weight-normal); }
.font-medium { font-weight: var(--font-weight-medium); }
.font-semibold { font-weight: var(--font-weight-semibold); }
.font-bold { font-weight: var(--font-weight-bold); }

/* 背景色 */
.bg-primary { background-color: var(--color-bg-primary); }
.bg-secondary { background-color: var(--color-bg-secondary); }
.bg-tertiary { background-color: var(--color-bg-tertiary); }
.bg-gradient { background: var(--primary-gradient); }
.bg-gradient-reverse { background: var(--primary-gradient-reverse); }
.bg-success-light { background: var(--color-success-light); }
.bg-warning-light { background: var(--color-warning-light); }
.bg-danger-light { background: var(--color-danger-light); }
.bg-info-light { background: var(--color-info-light); }

/* 圆角 */
.rounded-xs { border-radius: var(--radius-xs); }
.rounded-sm { border-radius: var(--radius-sm); }
.rounded-base { border-radius: var(--radius-base); }
.rounded-md { border-radius: var(--radius-md); }
.rounded-lg { border-radius: var(--radius-lg); }
.rounded-xl { border-radius: var(--radius-xl); }
.rounded-full { border-radius: var(--radius-full); }

/* 阴影 */
.shadow-sm { box-shadow: var(--shadow-sm); }
.shadow-base { box-shadow: var(--shadow-base); }
.shadow-md { box-shadow: var(--shadow-md); }
.shadow-lg { box-shadow: var(--shadow-lg); }
.shadow-colored { box-shadow: var(--shadow-colored); }

/* 间距 - Margin */
.m-0 { margin: 0; }
.m-xs { margin: var(--spacing-xs); }
.m-sm { margin: var(--spacing-sm); }
.m-base { margin: var(--spacing-base); }
.m-md { margin: var(--spacing-md); }
.m-lg { margin: var(--spacing-lg); }
.m-xl { margin: var(--spacing-xl); }
.m-2xl { margin: var(--spacing-2xl); }
.m-3xl { margin: var(--spacing-3xl); }

.mt-0 { margin-top: 0; }
.mt-xs { margin-top: var(--spacing-xs); }
.mt-sm { margin-top: var(--spacing-sm); }
.mt-base { margin-top: var(--spacing-base); }
.mt-md { margin-top: var(--spacing-md); }
.mt-lg { margin-top: var(--spacing-lg); }
.mt-xl { margin-top: var(--spacing-xl); }
.mt-2xl { margin-top: var(--spacing-2xl); }
.mt-3xl { margin-top: var(--spacing-3xl); }

.mb-0 { margin-bottom: 0; }
.mb-xs { margin-bottom: var(--spacing-xs); }
.mb-sm { margin-bottom: var(--spacing-sm); }
.mb-base { margin-bottom: var(--spacing-base); }
.mb-md { margin-bottom: var(--spacing-md); }
.mb-lg { margin-bottom: var(--spacing-lg); }
.mb-xl { margin-bottom: var(--spacing-xl); }
.mb-2xl { margin-bottom: var(--spacing-2xl); }
.mb-3xl { margin-bottom: var(--spacing-3xl); }

.ml-0 { margin-left: 0; }
.ml-xs { margin-left: var(--spacing-xs); }
.ml-sm { margin-left: var(--spacing-sm); }
.ml-base { margin-left: var(--spacing-base); }
.ml-md { margin-left: var(--spacing-md); }
.ml-lg { margin-left: var(--spacing-lg); }
.ml-xl { margin-left: var(--spacing-xl); }

.mr-0 { margin-right: 0; }
.mr-xs { margin-right: var(--spacing-xs); }
.mr-sm { margin-right: var(--spacing-sm); }
.mr-base { margin-right: var(--spacing-base); }
.mr-md { margin-right: var(--spacing-md); }
.mr-lg { margin-right: var(--spacing-lg); }
.mr-xl { margin-right: var(--spacing-xl); }

/* 间距 - Padding */
.p-0 { padding: 0; }
.p-xs { padding: var(--spacing-xs); }
.p-sm { padding: var(--spacing-sm); }
.p-base { padding: var(--spacing-base); }
.p-md { padding: var(--spacing-md); }
.p-lg { padding: var(--spacing-lg); }
.p-xl { padding: var(--spacing-xl); }
.p-2xl { padding: var(--spacing-2xl); }
.p-3xl { padding: var(--spacing-3xl); }

.pt-0 { padding-top: 0; }
.pt-xs { padding-top: var(--spacing-xs); }
.pt-sm { padding-top: var(--spacing-sm); }
.pt-base { padding-top: var(--spacing-base); }
.pt-md { padding-top: var(--spacing-md); }
.pt-lg { padding-top: var(--spacing-lg); }
.pt-xl { padding-top: var(--spacing-xl); }
.pt-2xl { padding-top: var(--spacing-2xl); }
.pt-3xl { padding-top: var(--spacing-3xl); }

.pb-0 { padding-bottom: 0; }
.pb-xs { padding-bottom: var(--spacing-xs); }
.pb-sm { padding-bottom: var(--spacing-sm); }
.pb-base { padding-bottom: var(--spacing-base); }
.pb-md { padding-bottom: var(--spacing-md); }
.pb-lg { padding-bottom: var(--spacing-lg); }
.pb-xl { padding-bottom: var(--spacing-xl); }
.pb-2xl { padding-bottom: var(--spacing-2xl); }
.pb-3xl { padding-bottom: var(--spacing-3xl); }

.pl-0 { padding-left: 0; }
.pl-xs { padding-left: var(--spacing-xs); }
.pl-sm { padding-left: var(--spacing-sm); }
.pl-base { padding-left: var(--spacing-base); }
.pl-md { padding-left: var(--spacing-md); }
.pl-lg { padding-left: var(--spacing-lg); }
.pl-xl { padding-left: var(--spacing-xl); }

.pr-0 { padding-right: 0; }
.pr-xs { padding-right: var(--spacing-xs); }
.pr-sm { padding-right: var(--spacing-sm); }
.pr-base { padding-right: var(--spacing-base); }
.pr-md { padding-right: var(--spacing-md); }
.pr-lg { padding-right: var(--spacing-lg); }
.pr-xl { padding-right: var(--spacing-xl); }

/* 组件基础样式 */
.card {
  background: var(--color-bg-primary);
  border-radius: var(--radius-lg);
  padding: var(--spacing-xl);
  margin: var(--spacing-lg);
  box-shadow: var(--shadow-base);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.card:active {
  transform: scale(0.98);
  box-shadow: var(--shadow-md);
}

.card-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: var(--spacing-lg);
}

.card-title {
  font-size: var(--font-size-lg);
  font-weight: var(--font-weight-semibold);
  color: var(--color-text-primary);
  line-height: var(--line-height-tight);
}

.card-subtitle {
  font-size: var(--font-size-base);
  color: var(--color-text-secondary);
  margin-top: var(--spacing-xs);
}

.card-content {
  padding: 0;
}

/* 自定义导航栏 - 参照BOSS直聘设计 */
.custom-navbar {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  z-index: var(--z-index-fixed);
  background: var(--header-gradient) !important;
  color: white !important;
  box-shadow: 0 2rpx 20rpx rgba(20, 184, 166, 0.15);
  padding-top: var(--safe-area-inset-top, 0);
  padding-left: var(--safe-area-inset-left, 0);
  padding-right: var(--safe-area-inset-right, 0);
  border-radius: 0 0 32rpx 32rpx;
  overflow: hidden;
}

.custom-navbar::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: radial-gradient(circle at 30% 70%, rgba(255, 255, 255, 0.1) 0%, transparent 60%);
  pointer-events: none;
}

.navbar-content {
  height: 88rpx;
  display: flex;
  align-items: center;
  padding: 0 var(--spacing-xl);
  position: relative;
  z-index: 1;
}

.navbar-title {
  font-size: var(--font-size-lg);
  font-weight: var(--font-weight-semibold);
  color: white;
  flex: 1;
  text-align: center;
  letter-spacing: 1rpx;
  text-shadow: 0 2rpx 4rpx rgba(0, 0, 0, 0.1);
}

.navbar-actions {
  display: flex;
  align-items: center;
  gap: var(--spacing-base);
}

.navbar-action-btn {
  width: 56rpx;
  height: 56rpx;
  background: rgba(255, 255, 255, 0.15);
  border-radius: var(--radius-full);
  display: flex;
  align-items: center;
  justify-content: center;
  backdrop-filter: blur(10rpx);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
}

.navbar-action-btn:active {
  transform: scale(0.95);
  background: rgba(255, 255, 255, 0.25);
}

.navbar-action-icon {
  font-size: var(--font-size-base);
  color: white;
  filter: drop-shadow(0 1rpx 2rpx rgba(0, 0, 0, 0.1));
}

/* 页面容器 - 刘海屏适配 */
.page-container {
  min-height: 100vh;
  background-color: var(--color-bg-page) !important;
  position: relative;
  padding-bottom: var(--safe-area-inset-bottom, 0);
}

/* TDesign 组件全局样式覆盖 - 简化版本 */
.t-navbar {
  background: var(--primary-gradient) !important;
  color: white !important;
  box-shadow: var(--shadow-base) !important;
}

.t-tabs {
  background: var(--color-bg-primary) !important;
  --td-tab-track-color: var(--primary-teal) !important;
  --td-tab-item-active-color: var(--primary-teal) !important;
  --td-tab-item-color: var(--color-text-secondary) !important;
  position: sticky;
  top: 0;
  z-index: var(--z-index-sticky);
  box-shadow: var(--shadow-sm);
}

.t-button {
  border-radius: var(--radius-md) !important;
  font-weight: var(--font-weight-medium) !important;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
}

.t-button--primary {
  background: var(--header-gradient) !important;
  border: none !important;
}

.t-button--primary:hover {
  background: var(--primary-gradient-reverse) !important;
  transform: translateY(-1rpx);
  box-shadow: 0 4rpx 24rpx rgba(20, 184, 166, 0.25) !important;
}

.t-button--success {
  background: linear-gradient(135deg, var(--color-success), #059669) !important;
  border: none !important;
}

.t-button--warning {
  background: linear-gradient(135deg, var(--color-warning), #d97706) !important;
  border: none !important;
}

.t-button--danger {
  background: linear-gradient(135deg, var(--color-danger), #dc2626) !important;
  border: none !important;
}

.t-button--light {
  color: var(--primary-teal) !important;
  border-color: var(--color-border-light) !important;
  background: var(--color-bg-primary) !important;
}

.t-button--light:hover {
  background: var(--color-info-lighter) !important;
  border-color: var(--primary-teal) !important;
}

.t-tag {
  border-radius: var(--radius-base) !important;
  font-size: var(--font-size-xs) !important;
  padding: var(--spacing-xs) var(--spacing-sm) !important;
  font-weight: var(--font-weight-medium) !important;
}

.t-cell {
  --td-cell-bg-color: var(--color-bg-primary) !important;
  --td-cell-border-color: var(--color-border-light) !important;
  --td-cell-title-color: var(--color-text-primary) !important;
  --td-cell-description-color: var(--color-text-secondary) !important;
  --td-cell-note-color: var(--color-text-tertiary) !important;
}

.t-grid {
  --td-grid-item-bg-color: var(--color-bg-primary) !important;
  --td-grid-border-color: var(--color-border-light) !important;
}

.t-grid-item {
  border-radius: var(--radius-base) !important;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
}

.t-grid-item:active {
  transform: scale(0.97);
  background-color: var(--color-bg-secondary) !important;
}

.t-input {
  border-radius: var(--radius-sm) !important;
  border-color: var(--color-border-base) !important;
  --td-input-border-color: var(--color-border-base) !important;
  --td-input-border-color-focus: var(--primary-teal) !important;
}

.t-textarea {
  border-radius: var(--radius-sm) !important;
  border-color: var(--color-border-base) !important;
  --td-textarea-border-color: var(--color-border-base) !important;
  --td-textarea-border-color-focus: var(--primary-teal) !important;
}

.t-dropdown-menu {
  --td-dropdown-menu-color: var(--color-text-primary) !important;
  --td-dropdown-menu-bg-color: var(--color-bg-primary) !important;
}

.t-notice-bar {
  border-radius: var(--radius-sm) !important;
  margin: var(--spacing-base) 0 !important;
}

.t-message {
  border-radius: var(--radius-base) !important;
  border: none !important;
  margin: 0 !important;
}

.t-swipe-cell {
  --td-swipe-cell-bg-color: var(--color-bg-primary) !important;
}

/* 设备适配媒体查询 */

/* iPhone SE (1st gen) 及类似小屏设备 */
@media screen and (max-width: 320px) {
  :root {
    --spacing-xs: 6rpx;
    --spacing-sm: 10rpx;
    --spacing-base: 12rpx;
    --spacing-md: 16rpx;
    --spacing-lg: 20rpx;
    --spacing-xl: 24rpx;
    --spacing-2xl: 32rpx;
    --spacing-3xl: 40rpx;
  }
  
  .card {
    margin: var(--spacing-sm) var(--spacing-base);
    padding: var(--spacing-lg);
  }
}

/* iPhone 6/7/8 及类似设备 */
@media screen and (min-width: 375px) and (max-width: 414px) {
  :root {
    --font-size-xs: 22rpx;
    --font-size-sm: 24rpx;
    --font-size-base: 26rpx;
    --font-size-md: 30rpx;
    --font-size-lg: 34rpx;
    --font-size-xl: 38rpx;
  }
}

/* iPhone X/11/12/13 系列及类似刘海屏设备 */
@media screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3),
       screen and (device-width: 390px) and (device-height: 844px) and (-webkit-device-pixel-ratio: 3),
       screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2),
       screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3),
       screen and (device-width: 428px) and (device-height: 926px) and (-webkit-device-pixel-ratio: 3) {
  
  /* 刘海屏特殊适配 */
  .gradient-header,
  .custom-navbar {
    padding-top: max(var(--safe-area-inset-top, 44rpx), 44rpx);
  }
  
  .status-bar {
    height: max(var(--safe-area-inset-top, 44rpx), 40rpx);
    padding-top: max(var(--safe-area-inset-top, 0), 4rpx);
  }
}

/* iPhone 14 Pro/15 Pro 系列动态岛设备 */
@media screen and (device-width: 393px) and (device-height: 852px) and (-webkit-device-pixel-ratio: 3),
       screen and (device-width: 430px) and (device-height: 932px) and (-webkit-device-pixel-ratio: 3) {
  
  /* 动态岛适配 */
  .gradient-header,
  .custom-navbar {
    padding-top: max(var(--safe-area-inset-top, 54rpx), 54rpx);
  }
  
  .status-bar {
    height: max(var(--safe-area-inset-top, 54rpx), 50rpx);
    padding-top: max(var(--safe-area-inset-top, 0), 4rpx);
  }
}

/* iPad 及大屏设备 */
@media screen and (min-width: 768px) {
  .page-container {
    max-width: 768rpx;
    margin: 0 auto;
    box-shadow: var(--shadow-lg);
  }
  
  .card {
    margin: var(--spacing-xl) var(--spacing-2xl);
    padding: var(--spacing-2xl);
  }
  
  .mobile-container {
    max-width: 768rpx;
    margin: 0 auto;
  }
}

/* 横屏适配 */
@media screen and (orientation: landscape) and (max-height: 500px) {
  .gradient-header {
    padding: var(--spacing-base) var(--spacing-xl);
    border-radius: 0 0 var(--spacing-lg) var(--spacing-lg);
  }
  
  .card {
    margin: var(--spacing-base) var(--spacing-lg);
    padding: var(--spacing-lg);
  }
  
  .scroll-container {
    padding-top: calc(var(--navbar-height) + var(--spacing-base));
  }
}