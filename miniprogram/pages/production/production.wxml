<!--production.wxml - é‡æ–°è®¾è®¡çš„ç”Ÿäº§ç®¡ç†é¡µé¢-->
<view class="page page-container">
  <!-- è‡ªå®šä¹‰å¯¼èˆªæ  -->
  <navigation-bar 
    title="ç”Ÿäº§ç®¡ç†"
    show-back="{{false}}"
  />

  <!-- ä¸»å†…å®¹åŒºåŸŸ -->
  <view class="main-content">
    <!-- ç”Ÿäº§æ¦‚è§ˆ -->
    <view class="production-overview">
      <view class="overview-grid">
        <view class="overview-card primary">
          <view class="overview-value">{{entryStats.total}}</view>
          <view class="overview-label">å…¥æ æ•°é‡(ç¾½)</view>
        </view>
        <view class="overview-card success">
          <view class="overview-value">{{exitStats.total}}</view>
          <view class="overview-label">å‡ºæ æ•°é‡(ç¾½)</view>
        </view>
        <view class="overview-card warning">
          <view class="overview-value">{{entryStats.stockQuantity}}</view>
          <view class="overview-label">å­˜æ æ•°é‡(ç¾½)</view>
        </view>
        <view class="overview-card info">
          <view class="overview-value">{{exitStats.avgWeight}}æ–¤</view>
          <view class="overview-label">å¹³å‡é‡é‡</view>
        </view>
      </view>
    </view>

    <!-- Tab å¯¼èˆª -->
    <t-tabs 
      value="{{activeTab}}" 
      bind:change="onTabChange" 
      theme="line" 
      class="main-tabs"
      sticky
      sticky-offset="{{navBarHeight}}"
    >
      <t-tab-panel label="å…¥æ ç®¡ç†" value="entry" />
      <t-tab-panel label="å‡ºæ ç®¡ç†" value="exit" />
      <t-tab-panel label="ç‰©æ–™ç®¡ç†" value="material" />
    </t-tabs>

    <!-- Tab å†…å®¹åŒºåŸŸ -->
    <view class="tab-container">
      <!-- å…¥æ ç®¡ç† -->
      <view wx:if="{{activeTab === 'entry'}}" class="tab-content">

        <!-- å¿«é€Ÿæ“ä½œ -->
        <view class="quick-action">
          <t-button theme="primary" size="medium" block bind:tap="addEntry" class="action-button primary-button">
            æ–°å¢å…¥æ è®°å½•
          </t-button>
        </view>

        <!-- è®°å½•åˆ—è¡¨ -->
        <view class="list-section">
          <view class="card list-card">
            <view class="card-header">
              <text class="card-title">æœ€è¿‘å…¥æ è®°å½•</text>
              <view class="view-all-btn" bind:tap="viewAllEntryRecords">æŸ¥çœ‹å…¨éƒ¨</view>
            </view>
            <view class="records-container">
              <!-- ç©ºçŠ¶æ€æ˜¾ç¤º -->
              <view wx:if="{{entryRecords.length === 0 && !loading}}" class="empty-state">
                <t-empty description="æš‚æ— å…¥æ è®°å½•">
                  <t-button theme="primary" size="small" bind:tap="addEntry" class="primary-button">
                    ç«‹å³æ·»åŠ 
                  </t-button>
                </t-empty>
              </view>
              
              <!-- è®°å½•åˆ—è¡¨ -->
              <view wx:for="{{entryRecords}}" wx:key="id" 
                    class="record-item"
                    bind:tap="viewEntryRecordDetail"
                    data-record="{{item}}">
                <view class="record-main">
                  <!-- è®°å½•å¤´éƒ¨ -->
                  <view class="record-header">
                    <view class="record-title-row">
                      <text class="record-name">{{item.displayTitle}}</text>
                    </view>
                  </view>

                  <!-- è®°å½•å†…å®¹ -->
                  <view class="record-content">
                    <!-- ç¬¬ä¸€è¡Œï¼šæ‰¹æ¬¡å· + æ•°é‡ -->
                    <view class="info-row">
                      <view class="info-group">
                        <text class="info-label">æ‰¹æ¬¡ï¼š</text>
                        <text class="info-value">{{item.batchNumber || item.id}}</text>
                      </view>
                      <view class="info-group">
                        <text class="info-label">æ•°é‡ï¼š</text>
                        <text class="info-value">{{item.quantity}}ç¾½</text>
                      </view>
                    </view>

                    <!-- ç¬¬äºŒè¡Œï¼šä¾›åº”å•† + å“ç§ -->
                    <view class="info-row">
                      <view class="info-group" wx:if="{{item.supplier}}">
                        <text class="info-label">ä¾›åº”å•†ï¼š</text>
                        <text class="info-value">{{item.supplier}}</text>
                      </view>
                      <view class="info-group" wx:if="{{item.breed}}">
                        <text class="info-label">å“ç§ï¼š</text>
                        <text class="info-value">{{item.breed}}</text>
                      </view>
                      <view class="info-group" wx:if="{{item.avgWeight > 0}}">
                        <text class="info-label">å¹³å‡é‡é‡ï¼š</text>
                        <text class="info-value">{{item.avgWeight}}æ–¤</text>
                      </view>
                    </view>

                    <!-- ç¬¬ä¸‰è¡Œï¼šæ“ä½œå‘˜ + æ—¥æœŸ + çŠ¶æ€ -->
                    <view class="record-footer">
                      <view class="footer-left">
                        <text class="operator-text">{{item.operator}}</text>
                        <text class="date-text">{{item.entryDate || item.date}}</text>
                      </view>
                      <t-tag theme="{{item.status === 'å·²å®Œæˆ' ? 'success' : 'warning'}}" size="small" class="status-tag">
                        {{item.status}}
                      </t-tag>
                    </view>
                  </view>
                </view>
              </view>
            </view>
          </view>
        </view>
      </view>

      <!-- å‡ºæ ç®¡ç† -->
      <view wx:if="{{activeTab === 'exit'}}" class="tab-content">

        <!-- å¿«é€Ÿæ“ä½œ -->
        <view class="quick-action">
          <t-row gutter="16">
            <t-col span="12">
              <t-button theme="primary" size="medium" block bind:tap="addExit" class="action-button primary-button">
                æ–°å¢å‡ºæ è®°å½•
              </t-button>
            </t-col>
            <t-col span="12">
              <t-button theme="primary" size="medium" variant="light" block bind:tap="startAICount" class="action-button ai-button">
                AIæ™ºèƒ½ç›˜ç‚¹
              </t-button>
            </t-col>
          </t-row>
        </view>

        <!-- AIç›˜ç‚¹åŠŸèƒ½åŒºåŸŸ -->
        <view wx:if="{{aiCount.active}}" class="ai-count-section">
          <view class="card ai-count-card">
            
            <!-- ç›˜ç‚¹æ“ä½œåŒºåŸŸ -->
            <view wx:if="{{!aiCount.result}}" class="count-operation">
              <!-- æ‹ç…§åŒºåŸŸ -->
              <view class="camera-section">
                <view wx:if="{{!aiCount.imageUrl}}" class="camera-placeholder" bind:tap="takePhoto">
                  <text class="placeholder-text">ç‚¹å‡»æ‹ç…§æˆ–é€‰æ‹©ç…§ç‰‡</text>
                  <text class="placeholder-desc">è¯·å¯¹å‡†å¾…å‡ºæ é¹…ç¾¤æ‹æ‘„æ¸…æ™°ç…§ç‰‡</text>
                </view>
                
                <view wx:else class="photo-preview">
                  <image src="{{aiCount.imageUrl}}" mode="aspectFit" class="preview-image" bind:tap="retakePhoto" />
                  <view class="photo-close-btn" catchtap="deletePhoto"></view>
                </view>
              </view>
              
              <!-- è¯†åˆ«æŒ‰é’®åŒºåŸŸ -->
              <view wx:if="{{aiCount.imageUrl && !aiCount.result}}" class="analyze-button-section">
                <t-button size="large" theme="primary" bind:tap="analyzeImage" loading="{{aiCount.loading}}" disabled="{{aiCount.loading}}" class="analyze-button" block>
                  {{aiCount.loading ? 'AIåˆ†æä¸­...' : 'å¼€å§‹è¯†åˆ«'}}
                </t-button>
              </view>
              
              <!-- æ‹æ‘„å»ºè®® -->
              <view class="shooting-tips">
                <text class="tips-title">å‡ºæ ç›˜ç‚¹å»ºè®®</text>
                <view class="tips-list">
                  <text class="tip-item">â€¢ é€‰æ‹©å…‰çº¿å……è¶³çš„ç¯å¢ƒ</text>
                  <text class="tip-item">â€¢ å°½é‡åŒ…å«å¾…å‡ºæ çš„å®Œæ•´é¹…ç¾¤</text>
                  <text class="tip-item">â€¢ é¿å…è¿‡åº¦æ‹¥æŒ¤æˆ–é®æŒ¡</text>
                  <text class="tip-item">â€¢ ä¿æŒç›¸æœºç¨³å®šæ¸…æ™°</text>
                  <text class="tip-item">â€¢ ç¡®è®¤é¹…ç¾¤å·²é›†ä¸­å‡†å¤‡å‡ºæ </text>
                </view>
              </view>
            </view>
            
            <!-- è¯†åˆ«ç»“æœï¼ˆæ”¯æŒå•æ¬¡å’Œç´¯åŠ æ¨¡å¼ï¼‰ -->
            <view wx:if="{{aiCount.result}}" class="count-result">
              <view class="result-header">
                <t-icon name="check-circle" size="32rpx" color="#52c41a" />
                <text class="result-title">{{aiCount.rounds.length === 1 ? 'è¯†åˆ«å®Œæˆ' : 'ç´¯è®¡ç›˜ç‚¹'}}</text>
                <text class="confidence-badge">ç½®ä¿¡åº¦ {{aiCount.result.confidence}}%</text>
              </view>
              
              <view class="result-content">
                <!-- å•æ¬¡è¯†åˆ«ç»“æœ -->
                <view wx:if="{{aiCount.rounds.length === 1}}" class="single-result">
                  <view class="main-result">
                    <view class="count-display">
                      <text class="count-number">{{aiCount.result.totalCount}}</text>
                      <text class="count-unit">åª</text>
                    </view>
                    <text class="count-label">å¯å‡ºæ æ•°é‡</text>
                  </view>
                </view>
                
                <!-- ç´¯åŠ æ¨¡å¼ç»“æœ -->
                <view wx:else class="cumulative-result">
                  <view class="current-count">
                    <text class="label">æœ¬æ¬¡è¯†åˆ«ï¼š</text>
                    <text class="value">{{aiCount.result.totalCount}}åª</text>
                    <text class="confidence-text">ï¼ˆç½®ä¿¡åº¦{{aiCount.result.confidence}}%ï¼‰</text>
                  </view>
                  <view class="total-count highlight">
                    <t-icon name="chart-bar" size="32rpx" color="#0052D9" />
                    <text class="label">ç´¯è®¡æ€»æ•°ï¼š</text>
                    <text class="value">{{aiCount.cumulativeTotal}}åª</text>
                  </view>
                  
                  <!-- å†å²è®°å½• -->
                  <view class="rounds-history">
                    <text class="history-title">å·²è¯†åˆ«è®°å½•</text>
                    <view wx:for="{{aiCount.rounds}}" wx:key="roundId" class="round-item">
                      <view class="round-info">
                        <text class="round-label">ç¬¬{{item.roundId}}æ¬¡ï¼š</text>
                        <text class="round-count">{{item.count}}åª</text>
                      </view>
                      <text class="round-time">{{item.timestamp}}</text>
                    </view>
                  </view>
                </view>
                
                <!-- å¼‚å¸¸æé†’ -->
                <view wx:if="{{aiCount.result.abnormalDetection && aiCount.result.abnormalDetection.suspiciousAnimals > 0}}" class="abnormal-alert">
                  <view class="alert-content">
                    <t-icon name="error-circle" size="24rpx" color="#ff4d4f" />
                    <text class="alert-text">å‘ç° {{aiCount.result.abnormalDetection.suspiciousAnimals}} åªç–‘ä¼¼å¼‚å¸¸ä¸ªä½“</text>
                  </view>
                  <view wx:if="{{aiCount.result.abnormalDetection.healthConcerns.length > 0}}" class="health-concerns">
                    <text wx:for="{{aiCount.result.abnormalDetection.healthConcerns}}" wx:for-item="concern" wx:key="index" class="concern-item">
                      â€¢ {{concern}}
                    </text>
                  </view>
                </view>
                
                <!-- è¡¥å……å»ºè®® -->
                <view wx:if="{{aiCount.result.suggestions && aiCount.result.suggestions.length > 0}}" class="suggestions">
                  <text class="suggestions-title">ğŸ’¡ å»ºè®®</text>
                  <view wx:for="{{aiCount.result.suggestions}}" wx:for-item="suggestion" wx:key="index" class="suggestion-item">
                    â€¢ {{suggestion}}
                  </view>
                </view>
              </view>
              
              <!-- æ“ä½œæŒ‰é’®ï¼ˆç»Ÿä¸€ç®€åŒ–ï¼‰ -->
              <view class="result-actions">
                <t-row gutter="16">
                  <t-col span="12">
                    <t-button 
                      theme="primary" 
                      variant="outline" 
                      size="medium" 
                      block
                      bind:tap="continueRecognition"
                      class="continue-btn primary-button"
                    >
                      ç»§ç»­è¯†åˆ«
                    </t-button>
                  </t-col>
                  <t-col span="12">
                    <t-button 
                      theme="success" 
                      size="medium" 
                      block
                      bind:tap="finishCounting"
                      class="finish-btn"
                    >
                      ç»“æŸç›˜ç‚¹({{aiCount.cumulativeTotal || aiCount.result.totalCount}}åª)
                    </t-button>
                  </t-col>
                </t-row>
              </view>
            </view>
          </view>
        </view>

        <!-- è®°å½•åˆ—è¡¨ -->
        <view class="list-section">
          <view class="card list-card">
            <view class="card-header">
              <text class="card-title">æœ€è¿‘å‡ºæ è®°å½•</text>
              <view class="view-all-btn" bind:tap="viewAllExitRecords">æŸ¥çœ‹å…¨éƒ¨</view>
            </view>
            <view class="records-container">
              <!-- ç©ºçŠ¶æ€æ˜¾ç¤º -->
              <view wx:if="{{exitRecords.length === 0 && !loading}}" class="empty-state">
                <t-empty description="æš‚æ— å‡ºæ è®°å½•">
                  <t-button theme="primary" size="small" bind:tap="addExit" class="primary-button">
                    ç«‹å³æ·»åŠ 
                  </t-button>
                </t-empty>
              </view>
              
              <!-- è®°å½•åˆ—è¡¨ -->
              <view wx:for="{{exitRecords}}" wx:key="id" 
                    class="record-item"
                    bind:tap="viewExitRecordDetail"
                    data-record="{{item}}">
                <view class="record-main">
                  <!-- è®°å½•å¤´éƒ¨ -->
                  <view class="record-header">
                    <view class="record-title-row">
                      <text class="record-name">{{item.displayTitle}}</text>
                    </view>
                  </view>

                  <!-- è®°å½•å†…å®¹ -->
                  <view class="record-content">
                    <!-- ç¬¬ä¸€è¡Œï¼šå‡ºæ å· + æ•°é‡ -->
                    <view class="info-row">
                      <view class="info-group">
                        <text class="info-label">å‡ºæ å·ï¼š</text>
                        <text class="info-value">{{item.exitNumber || item.id}}</text>
                      </view>
                      <view class="info-group">
                        <text class="info-label">æ•°é‡ï¼š</text>
                        <text class="info-value">{{item.quantity}}ç¾½</text>
                      </view>
                    </view>

                    <!-- ç¬¬äºŒè¡Œï¼šå®¢æˆ· + å“ç§ -->
                    <view class="info-row">
                      <view class="info-group" wx:if="{{item.customer}}">
                        <text class="info-label">å®¢æˆ·ï¼š</text>
                        <text class="info-value">{{item.customer}}</text>
                      </view>
                      <view class="info-group" wx:if="{{item.breed}}">
                        <text class="info-label">å“ç§ï¼š</text>
                        <text class="info-value">{{item.breed}}</text>
                      </view>
                    </view>

                    <!-- ç¬¬ä¸‰è¡Œï¼šæ‰¹æ¬¡å· -->
                    <view class="info-row" wx:if="{{item.batchNumber}}">
                      <view class="info-group">
                        <text class="info-label">æ‰¹æ¬¡ï¼š</text>
                        <text class="info-value">{{item.batchNumber}}</text>
                      </view>
                    </view>

                    <!-- ç¬¬å››è¡Œï¼šå¹³å‡é‡é‡ + æ€»é‡é‡ -->
                    <view class="info-row" wx:if="{{item.avgWeight > 0 || item.totalWeight > 0}}">
                      <view class="info-group" wx:if="{{item.avgWeight > 0}}">
                        <text class="info-label">å¹³å‡é‡é‡ï¼š</text>
                        <text class="info-value">{{item.avgWeight}}æ–¤</text>
                      </view>
                      <view class="info-group" wx:if="{{item.totalWeight > 0}}">
                        <text class="info-label">æ€»é‡é‡ï¼š</text>
                        <text class="info-value">{{item.totalWeight}}æ–¤</text>
                      </view>
                    </view>

                    <!-- ç¬¬äº”è¡Œï¼šæ“ä½œå‘˜ + æ—¥æœŸ + çŠ¶æ€ -->
                    <view class="record-footer">
                      <view class="footer-left">
                        <text class="operator-text">{{item.operator}}</text>
                        <text class="date-text">{{item.exitDate || item.date}}</text>
                      </view>
                      <t-tag theme="{{item.status === 'å·²äº¤ä»˜' ? 'success' : 'primary'}}" size="small" class="status-tag">
                        {{item.status}}
                      </t-tag>
                    </view>
                  </view>
                </view>
              </view>
            </view>
          </view>
        </view>
      </view>

      <!-- ç‰©æ–™ç®¡ç† -->
      <view wx:if="{{activeTab === 'material'}}" class="tab-content">
        <!-- å¿«é€Ÿæ“ä½œ -->
        <view class="quick-action">
          <t-row gutter="16">
            <t-col span="8">
              <t-button theme="light" size="medium" block bind:tap="purchaseMaterial" class="action-button success-button">
                é‡‡è´­å…¥åº“
              </t-button>
            </t-col>
            <t-col span="8">
              <t-button theme="light" size="medium" block bind:tap="useMaterial" class="action-button purple-button">
                ç‰©æ–™é¢†ç”¨
              </t-button>
            </t-col>
            <t-col span="8">
              <t-button theme="light" size="medium" block bind:tap="recordFeedUsage" class="action-button primary-button">
                é¥²æ–™æŠ•å–‚
              </t-button>
            </t-col>
          </t-row>
        </view>

        <!-- åº“å­˜çŠ¶æ€ - å››å®«æ ¼å¸ƒå±€ -->
        <view class="material-section">
          <view class="material-overview-grid">
            <!-- é¥²æ–™åº“å­˜ -->
            <view class="material-overview-card feed-card" bind:tap="viewFeedInventory">
              <view class="material-overview-label">é¥²æ–™åº“å­˜</view>
              <view class="material-overview-status">{{materialStats.feedDetails.statusText}}</view>
            </view>
            
            <!-- è¯å“åº“å­˜ -->
            <view class="material-overview-card medicine-card" bind:tap="viewMedicineInventory">
              <view class="material-overview-label">è¯å“åº“å­˜</view>
              <view class="material-overview-status">{{materialStats.medicineDetails.statusText}}</view>
            </view>

            <!-- è®¾å¤‡ç‰©æ–™ -->
            <view class="material-overview-card equipment-card" bind:tap="viewEquipmentInventory">
              <view class="material-overview-label">è®¾å¤‡ç‰©æ–™</view>
              <view class="material-overview-status">{{materialStats.equipmentDetails.statusText}}</view>
            </view>

            <!-- åº“å­˜æ€»è§ˆ -->
            <view class="material-overview-card summary-card" bind:tap="viewInventoryDetail">
              <view class="material-overview-label">åº“å­˜æ€»è§ˆ</view>
              <view class="material-overview-status">{{(materialStats.feedDetails.status === 'critical' || materialStats.medicineDetails.status === 'critical' || materialStats.equipmentDetails.status === 'critical') ? 'éœ€è¦å…³æ³¨' : (materialStats.feedDetails.status === 'warning' || materialStats.medicineDetails.status === 'warning' || materialStats.equipmentDetails.status === 'warning') ? 'éƒ¨åˆ†åä½' : 'çŠ¶æ€è‰¯å¥½'}}</view>
            </view>
          </view>
        </view>

        <!-- è®°å½•åˆ—è¡¨ -->
        <view class="list-section">
          <view class="card list-card">
            <view class="card-header">
              <text class="card-title">æœ€è¿‘ç‰©æ–™è®°å½•</text>
              <view class="view-all-btn" bind:tap="viewAllMaterialRecords">æŸ¥çœ‹å…¨éƒ¨</view>
            </view>
            <view class="records-container">
              <!-- åŠ è½½çŠ¶æ€ -->
              <view wx:if="{{loading}}" class="loading-state">
                <t-loading theme="spinner" size="40rpx" text="åŠ è½½ä¸­..." />
              </view>
              
              <!-- è®°å½•åˆ—è¡¨ - ä½¿ç”¨ä¼˜åŒ–çš„å¸ƒå±€æ ¼å¼ -->
              <view wx:if="{{!loading && materialRecords && materialRecords.length > 0}}">
                <view wx:for="{{materialRecords}}" wx:key="id" 
                      class="record-item"
                      bind:tap="viewMaterialRecordDetail"
                      data-record="{{item}}">
                  <view class="record-main">
                    <!-- è®°å½•å¤´éƒ¨ -->
                    <view class="record-header">
                      <view class="record-title-row">
                        <text class="record-name">{{item.name}}</text>
                        <t-tag 
                          theme="light" 
                          size="small" 
                          class="record-type-tag {{item.category === 'é¥²æ–™' || item.category === 'è¥å…»å“' ? 'feed-tag' : item.category === 'è¯å“' ? 'medicine-tag' : item.category === 'è®¾å¤‡' ? 'equipment-tag' : 'default-tag'}}"
                        >
                          {{item.type}}
                        </t-tag>
                      </view>
                    </view>

                    <!-- è®°å½•å†…å®¹ -->
                    <view class="record-content">
                      <!-- å•æ®ä¿¡æ¯ -->
                      <view class="info-row" wx:if="{{item.recordNumber}}">
                        <text class="info-label">å•æ®ï¼š</text>
                        <text class="info-value">{{item.recordNumber}}</text>
                      </view>

                      <!-- åˆ†ç±»ä¿¡æ¯ -->
                      <view class="info-row" wx:if="{{item.category}}">
                        <text class="info-label">åˆ†ç±»ï¼š</text>
                        <text class="info-value">{{item.category}}</text>
                      </view>

                      <!-- æ•°é‡ä¿¡æ¯ -->
                      <view class="info-row" wx:if="{{item.quantity}}">
                        <text class="info-label">æ•°é‡ï¼š</text>
                        <text class="info-value quantity-value">{{item.quantity}}</text>
                      </view>

                      <!-- åº•éƒ¨ï¼šæ“ä½œå‘˜ + æ—¥æœŸ + çŠ¶æ€ -->
                      <view class="record-footer">
                        <view class="footer-left">
                          <text class="date-text">{{item.date}}</text>
                          <text class="operator-text">{{item.operator}}</text>
                        </view>
                      </view>
                    </view>
                  </view>
                </view>
              </view>
              
              <!-- ç©ºçŠ¶æ€æ˜¾ç¤º -->
              <view wx:if="{{!loading && (!materialRecords || materialRecords.length === 0)}}" class="empty-state">
                <t-empty description="æš‚æ— ç‰©æ–™è®°å½•">
                  <t-button theme="light" size="small" bind:tap="purchaseMaterial" class="success-button">
                    é‡‡è´­ç‰©æ–™
                  </t-button>
                </t-empty>
              </view>
              
            </view>
          </view>
        </view>
      </view>
    </view>
  </view>

  <!-- å…¥æ è®°å½•è¯¦æƒ…å¼¹çª— -->
  <entry-record-detail-popup
    visible="{{showEntryDetailPopup}}"
    record="{{selectedEntryRecord}}"
    bind:close="closeEntryDetailPopup"
  />

  <!-- å‡ºæ è®°å½•è¯¦æƒ…å¼¹çª— -->
  <exit-record-detail-popup
    visible="{{showExitDetailPopup}}"
    record="{{selectedExitRecord}}"
    bind:close="closeExitDetailPopup"
  />

  <!-- ç‰©æ–™è®°å½•è¯¦æƒ…å¼¹çª— -->
  <material-record-detail-popup
    visible="{{showMaterialDetailPopup}}"
    record="{{selectedMaterialRecord}}"
    bind:close="closeMaterialDetailPopup"
  />

</view>