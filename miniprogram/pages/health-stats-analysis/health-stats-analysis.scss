/* health-stats-analysis.scss - 健康统计分析页面样式 */

// 基础变量
$primary-color: #0052D9;
$success-color: #52c41a;
$warning-color: #faad14;
$error-color: #ff4d4f;
$info-color: #1890ff;
$text-primary: #333;
$text-secondary: #666;
$text-tertiary: #999;
$bg-color: #f5f5f5;
$border-color: #e8e8e8;

// 页面基础样式
.page {
  background: $bg-color;
  min-height: 100vh;
}

.main-content {
  padding: 20rpx;
}

.loading-container {
  display: flex;
  justify-content: center;
  align-items: center;
  height: 400rpx;
}

// ========== 整体统计概览 ==========

.stats-overview {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  border-radius: 16rpx;
  padding: 30rpx;
  margin-bottom: 30rpx;
  color: white;
  
  .overview-header {
    display: flex;
    align-items: center;
    gap: 12rpx;
    margin-bottom: 24rpx;
    
    .overview-title {
      font-size: 32rpx;
      font-weight: 600;
      flex: 1;
    }
    
    .data-period {
      font-size: 24rpx;
      opacity: 0.8;
    }
  }
  
  .overview-stats {
    .stat-card {
      background: rgba(255, 255, 255, 0.15);
      backdrop-filter: blur(10px);
      border-radius: 12rpx;
      padding: 24rpx 16rpx;
      text-align: center;
      border: 1rpx solid rgba(255, 255, 255, 0.2);
      
      .stat-value {
        font-size: 36rpx;
        font-weight: 700;
        margin-bottom: 8rpx;
        color: white;
      }
      
      .stat-label {
        font-size: 24rpx;
        opacity: 0.9;
        margin-bottom: 4rpx;
      }
      
      .stat-unit {
        font-size: 20rpx;
        opacity: 0.7;
      }
    }
  }
}

// ========== Tab导航 ==========

.analysis-tabs {
  background: white;
  border-radius: 16rpx;
  margin-bottom: 20rpx;
  overflow: hidden;
  box-shadow: 0 2rpx 8rpx rgba(0, 0, 0, 0.05);
}

// ========== Tab内容区域 ==========

.tab-content {
  min-height: 600rpx;
}

// 通用section样式
.section-header {
  display: flex;
  align-items: center;
  gap: 12rpx;
  margin-bottom: 24rpx;
  padding: 0 4rpx;
  
  .section-title {
    font-size: 30rpx;
    font-weight: 600;
    color: $text-primary;
    flex: 1;
  }
  
  button {
    font-size: 24rpx;
  }
}

// ========== 健康趋势面板 ==========

.trend-panel {
  .chart-section {
    background: white;
    border-radius: 16rpx;
    padding: 30rpx;
    margin-bottom: 30rpx;
    box-shadow: 0 2rpx 8rpx rgba(0, 0, 0, 0.05);
    
    .trend-chart {
      margin-bottom: 40rpx;
      
      .chart-title {
        font-size: 26rpx;
        font-weight: 600;
        color: $text-primary;
        margin-bottom: 20rpx;
        text-align: center;
      }
      
      .trend-line-chart {
        display: flex;
        justify-content: space-between;
        align-items: flex-end;
        height: 200rpx;
        padding: 20rpx 0;
        
        .trend-point {
          flex: 1;
          display: flex;
          flex-direction: column;
          align-items: center;
          
          .point-bar {
            width: 24rpx;
            background: linear-gradient(to top, $primary-color, #40a9ff);
            border-radius: 4rpx 4rpx 0 0;
            margin-bottom: 8rpx;
            min-height: 20rpx;
            transition: all 0.3s ease;
          }
          
          .point-value {
            font-size: 22rpx;
            color: $primary-color;
            font-weight: 600;
            margin-bottom: 6rpx;
          }
          
          .point-label {
            font-size: 20rpx;
            color: $text-tertiary;
          }
        }
      }
    }
    
    .seasonal-comparison {
      .season-card {
        background: #f8faff;
        border-radius: 12rpx;
        padding: 20rpx;
        text-align: center;
        border: 2rpx solid #e6f7ff;
        
        .season-name {
          font-size: 24rpx;
          color: $text-secondary;
          margin-bottom: 8rpx;
        }
        
        .season-rate {
          font-size: 32rpx;
          font-weight: 700;
          margin-bottom: 8rpx;
          
          &.excellent { color: $success-color; }
          &.good { color: #73d13d; }
          &.normal { color: $info-color; }
          &.caution { color: $warning-color; }
        }
        
        .season-trend {
          display: flex;
          align-items: center;
          justify-content: center;
          gap: 4rpx;
          
          .trend-text {
            font-size: 20rpx;
            color: $text-tertiary;
          }
        }
      }
    }
  }
  
  .key-indicators {
    background: white;
    border-radius: 16rpx;
    padding: 30rpx;
    box-shadow: 0 2rpx 8rpx rgba(0, 0, 0, 0.05);
    
    .indicators-grid {
      display: flex;
      flex-direction: column;
      gap: 20rpx;
      
      .indicator-card {
        background: #fafafa;
        border-radius: 12rpx;
        padding: 24rpx;
        display: flex;
        align-items: center;
        gap: 20rpx;
        border-left: 4rpx solid $primary-color;
        
        .indicator-icon {
          font-size: 40rpx;
          width: 60rpx;
          text-align: center;
        }
        
        .indicator-content {
          flex: 1;
          
          .indicator-name {
            font-size: 26rpx;
            font-weight: 600;
            color: $text-primary;
            margin-bottom: 8rpx;
          }
          
          .indicator-value {
            font-size: 32rpx;
            font-weight: 700;
            color: $primary-color;
            margin-bottom: 6rpx;
          }
          
          .indicator-desc {
            font-size: 22rpx;
            color: $text-tertiary;
          }
        }
        
        .indicator-trend {
          display: flex;
          align-items: center;
          gap: 4rpx;
          font-size: 22rpx;
          font-weight: 600;
          
          &.up {
            color: $success-color;
          }
          
          &.down {
            color: $error-color;
          }
        }
      }
    }
  }
}

// ========== 病种统计面板 ==========

.diseases-panel {
  .disease-distribution {
    background: white;
    border-radius: 16rpx;
    padding: 30rpx;
    margin-bottom: 30rpx;
    box-shadow: 0 2rpx 8rpx rgba(0, 0, 0, 0.05);
    
    .pie-chart-container {
      .css-pie-chart {
        position: relative;
        width: 200rpx;
        height: 200rpx;
        margin: 0 auto 30rpx;
        border-radius: 50%;
        overflow: hidden;
        
        .pie-slice-container {
          position: absolute;
          width: 50%;
          height: 50%;
          transform-origin: 100% 100%;
          
          .pie-slice {
            width: 100%;
            height: 100%;
            background: conic-gradient(from 0deg, var(--slice-color) var(--slice-angle), transparent 0);
            clip-path: polygon(0 0, 100% 0, 100% 100%);
          }
        }
        
        .pie-center {
          position: absolute;
          top: 50%;
          left: 50%;
          transform: translate(-50%, -50%);
          width: 100rpx;
          height: 100rpx;
          background: white;
          border-radius: 50%;
          display: flex;
          flex-direction: column;
          justify-content: center;
          align-items: center;
          box-shadow: 0 2rpx 8rpx rgba(0, 0, 0, 0.1);
          
          .center-value {
            font-size: 28rpx;
            font-weight: 700;
            color: $primary-color;
          }
          
          .center-label {
            font-size: 20rpx;
            color: $text-secondary;
          }
        }
      }
      
      .chart-legend {
        display: flex;
        flex-direction: column;
        gap: 12rpx;
        
        .legend-item {
          display: flex;
          align-items: center;
          gap: 12rpx;
          
          .legend-color {
            width: 16rpx;
            height: 16rpx;
            border-radius: 2rpx;
          }
          
          .legend-name {
            font-size: 24rpx;
            color: $text-primary;
            flex: 1;
          }
          
          .legend-value {
            font-size: 24rpx;
            font-weight: 600;
            color: $text-secondary;
          }
        }
      }
    }
  }
  
  .top-diseases {
    background: white;
    border-radius: 16rpx;
    padding: 30rpx;
    box-shadow: 0 2rpx 8rpx rgba(0, 0, 0, 0.05);
    
    .diseases-ranking {
      display: flex;
      flex-direction: column;
      gap: 20rpx;
      
      .disease-rank-item {
        background: #fafafa;
        border-radius: 12rpx;
        padding: 24rpx;
        display: flex;
        align-items: center;
        gap: 16rpx;
        
        .rank-badge {
          width: 48rpx;
          height: 48rpx;
          border-radius: 50%;
          display: flex;
          align-items: center;
          justify-content: center;
          font-size: 24rpx;
          font-weight: 700;
          color: white;
          
          &.rank-1 { background: #ffd700; }
          &.rank-2 { background: #c0c0c0; }
          &.rank-3 { background: #cd7f32; }
        }
        
        .disease-info {
          flex: 1;
          
          .disease-name {
            font-size: 26rpx;
            font-weight: 600;
            color: $text-primary;
            margin-bottom: 6rpx;
          }
          
          .disease-cases {
            font-size: 22rpx;
            color: $text-secondary;
          }
        }
        
        .disease-stats {
          text-align: right;
          
          .mortality-rate {
            font-size: 22rpx;
            color: $error-color;
            margin-bottom: 4rpx;
          }
          
          .recovery-rate {
            font-size: 22rpx;
            color: $success-color;
          }
        }
        
        .disease-trend {
          width: 120rpx;
          
          .trend-bar {
            height: 8rpx;
            background: #f0f0f0;
            border-radius: 4rpx;
            overflow: hidden;
            margin-bottom: 6rpx;
            
            .bar-fill {
              height: 100%;
              border-radius: 4rpx;
              transition: width 0.3s ease;
            }
          }
          
          .trend-label {
            font-size: 20rpx;
            color: $text-tertiary;
            text-align: center;
            display: block;
          }
        }
      }
    }
  }
}

// ========== 治疗效果面板 ==========

.treatment-panel {
  .medication-effectiveness {
    background: white;
    border-radius: 16rpx;
    padding: 30rpx;
    margin-bottom: 30rpx;
    box-shadow: 0 2rpx 8rpx rgba(0, 0, 0, 0.05);
    
    .effectiveness-chart {
      .medication-item {
        background: #fafafa;
        border-radius: 12rpx;
        padding: 24rpx;
        margin-bottom: 20rpx;
        border-left: 4rpx solid $success-color;
        
        .medication-header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          margin-bottom: 16rpx;
          
          .medication-name {
            font-size: 26rpx;
            font-weight: 600;
            color: $text-primary;
          }
          
          .success-rate {
            font-size: 24rpx;
            font-weight: 600;
            color: $success-color;
          }
        }
        
        .effectiveness-bar {
          .bar-bg {
            height: 12rpx;
            background: #f0f0f0;
            border-radius: 6rpx;
            overflow: hidden;
            margin-bottom: 12rpx;
            
            .bar-fill {
              height: 100%;
              background: linear-gradient(90deg, $success-color, #73d13d);
              border-radius: 6rpx;
              transition: width 0.3s ease;
            }
          }
          
          .bar-stats {
            display: flex;
            justify-content: space-between;
            
            .stat-item {
              font-size: 22rpx;
              color: $text-secondary;
            }
          }
        }
      }
    }
  }
  
  .treatment-methods {
    background: white;
    border-radius: 16rpx;
    padding: 30rpx;
    box-shadow: 0 2rpx 8rpx rgba(0, 0, 0, 0.05);
    
    .methods-comparison {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 20rpx;
      
      .method-card {
        background: #fafafa;
        border-radius: 12rpx;
        padding: 24rpx;
        
        .method-header {
          display: flex;
          align-items: center;
          gap: 12rpx;
          margin-bottom: 20rpx;
          
          .method-icon {
            font-size: 32rpx;
          }
          
          .method-name {
            font-size: 24rpx;
            font-weight: 600;
            color: $text-primary;
          }
        }
        
        .method-stats {
          .stat-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 12rpx;
            
            .stat-label {
              font-size: 22rpx;
              color: $text-secondary;
            }
            
            .stat-value {
              font-size: 22rpx;
              font-weight: 600;
              
              &.success { color: $success-color; }
              &.cost { color: $warning-color; }
              &.duration { color: $info-color; }
            }
          }
        }
      }
    }
  }
}

// ========== 成本分析面板 ==========

.cost-panel {
  .cost-structure {
    background: white;
    border-radius: 16rpx;
    padding: 30rpx;
    margin-bottom: 30rpx;
    box-shadow: 0 2rpx 8rpx rgba(0, 0, 0, 0.05);
    
    .cost-breakdown {
      .total-cost-card {
        background: linear-gradient(135deg, #fa8c16, #faad14);
        color: white;
        border-radius: 12rpx;
        padding: 30rpx;
        text-align: center;
        margin-bottom: 30rpx;
        
        .cost-value {
          font-size: 48rpx;
          font-weight: 700;
          margin-bottom: 8rpx;
        }
        
        .cost-label {
          font-size: 26rpx;
          opacity: 0.9;
          margin-bottom: 4rpx;
        }
        
        .cost-period {
          font-size: 22rpx;
          opacity: 0.8;
        }
      }
      
      .cost-categories {
        .category-item {
          display: flex;
          align-items: center;
          padding: 20rpx 0;
          border-bottom: 1rpx solid #f0f0f0;
          
          .category-info {
            flex: 1;
            
            .category-name {
              font-size: 26rpx;
              font-weight: 600;
              color: $text-primary;
              margin-bottom: 6rpx;
            }
            
            .category-amount {
              font-size: 24rpx;
              color: $text-secondary;
            }
          }
          
          .category-percentage {
            width: 200rpx;
            text-align: right;
            
            .percentage-bar {
              height: 8rpx;
              background: #f0f0f0;
              border-radius: 4rpx;
              overflow: hidden;
              margin-bottom: 8rpx;
              
              .bar-fill {
                height: 100%;
                border-radius: 4rpx;
                transition: width 0.3s ease;
              }
            }
            
            .percentage-text {
              font-size: 22rpx;
              font-weight: 600;
              color: $text-primary;
            }
          }
        }
      }
    }
  }
  
  .cost-benefit-analysis {
    background: white;
    border-radius: 16rpx;
    padding: 30rpx;
    box-shadow: 0 2rpx 8rpx rgba(0, 0, 0, 0.05);
    
    .benefit-metrics {
      .metric-card {
        background: #fafafa;
        border-radius: 12rpx;
        padding: 24rpx;
        text-align: center;
        
        .metric-value {
          font-size: 36rpx;
          font-weight: 700;
          color: $primary-color;
          margin-bottom: 8rpx;
        }
        
        .metric-label {
          font-size: 24rpx;
          color: $text-secondary;
          margin-bottom: 12rpx;
        }
        
        .metric-trend {
          display: flex;
          align-items: center;
          justify-content: center;
          gap: 4rpx;
          font-size: 22rpx;
          
          &.up {
            color: $success-color;
          }
          
          &.down {
            color: $error-color;
          }
        }
      }
    }
  }
}

// ========== AI预测面板 ==========

.ai-prediction-panel {
  .prediction-section {
    background: white;
    border-radius: 16rpx;
    padding: 30rpx;
    box-shadow: 0 2rpx 8rpx rgba(0, 0, 0, 0.05);
    
    .prediction-loading {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 20rpx;
      padding: 60rpx 0;
      
      .loading-text {
        font-size: 26rpx;
        color: $text-secondary;
      }
    }
    
    .prediction-results {
      .risk-alerts {
        margin-bottom: 40rpx;
        
        .alert-title {
          font-size: 28rpx;
          font-weight: 600;
          color: $text-primary;
          margin-bottom: 20rpx;
        }
        
        .alert-item {
          background: #fafafa;
          border-radius: 12rpx;
          padding: 20rpx;
          margin-bottom: 16rpx;
          display: flex;
          align-items: flex-start;
          gap: 16rpx;
          
          &.warning {
            border-left: 4rpx solid $warning-color;
          }
          
          &.info {
            border-left: 4rpx solid $info-color;
          }
          
          .alert-icon {
            font-size: 32rpx;
          }
          
          .alert-content {
            flex: 1;
            
            .alert-message {
              font-size: 26rpx;
              font-weight: 600;
              color: $text-primary;
              margin-bottom: 6rpx;
            }
            
            .alert-probability {
              font-size: 22rpx;
              color: $text-secondary;
            }
          }
        }
      }
      
      .trend-prediction {
        margin-bottom: 40rpx;
        
        .prediction-title {
          font-size: 28rpx;
          font-weight: 600;
          color: $text-primary;
          margin-bottom: 20rpx;
        }
        
        .prediction-chart {
          display: flex;
          gap: 16rpx;
          
          .prediction-month {
            flex: 1;
            background: #fafafa;
            border-radius: 12rpx;
            padding: 20rpx;
            
            .month-header {
              text-align: center;
              margin-bottom: 16rpx;
              
              .month-name {
                font-size: 24rpx;
                font-weight: 600;
                color: $text-primary;
              }
            }
            
            .month-metrics {
              .metric-item {
                display: flex;
                justify-content: space-between;
                margin-bottom: 12rpx;
                
                .metric-name {
                  font-size: 22rpx;
                  color: $text-secondary;
                }
                
                .metric-value {
                  font-size: 22rpx;
                  font-weight: 600;
                  
                  &.success { color: $success-color; }
                  &.warning { color: $warning-color; }
                  &.error { color: $error-color; }
                }
              }
            }
          }
        }
      }
      
      .ai-recommendations {
        .recommendation-title {
          font-size: 28rpx;
          font-weight: 600;
          color: $text-primary;
          margin-bottom: 20rpx;
        }
        
        .recommendations-list {
          .recommendation-item {
            background: #f8faff;
            border: 2rpx solid #e6f7ff;
            border-radius: 12rpx;
            padding: 20rpx;
            margin-bottom: 16rpx;
            
            .recommendation-category {
              font-size: 22rpx;
              font-weight: 600;
              color: $primary-color;
              margin-bottom: 8rpx;
            }
            
            .recommendation-content {
              font-size: 24rpx;
              color: $text-primary;
              margin-bottom: 8rpx;
              line-height: 1.5;
            }
            
            .recommendation-impact {
              font-size: 22rpx;
              color: $success-color;
              font-weight: 500;
            }
          }
        }
      }
    }
    
    .prediction-empty {
      text-align: center;
      padding: 80rpx 0;
      
      .empty-icon {
        font-size: 80rpx;
        margin-bottom: 20rpx;
      }
      
      .empty-text {
        font-size: 28rpx;
        color: $text-primary;
        margin-bottom: 12rpx;
      }
      
      .empty-desc {
        font-size: 24rpx;
        color: $text-secondary;
      }
    }
  }
}

// ========== 响应式适配 ==========

@media (max-width: 375px) {
  .overview-stats {
    .stat-card {
      .stat-value {
        font-size: 32rpx !important;
      }
    }
  }
  
  .methods-comparison {
    grid-template-columns: 1fr !important;
  }
  
  .prediction-chart {
    flex-direction: column !important;
    
    .prediction-month {
      margin-bottom: 16rpx;
    }
  }
}

// ========== 动画效果 ==========

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(20rpx); }
  to { opacity: 1; transform: translateY(0); }
}

.trend-panel, .diseases-panel, .treatment-panel, .cost-panel, .ai-prediction-panel {
  animation: fadeIn 0.3s ease-out;
}

// 进度条动画
@keyframes progressFill {
  from { width: 0; }
  to { width: var(--progress-width); }
}

.bar-fill, .point-bar {
  animation: progressFill 0.8s ease-out;
}
