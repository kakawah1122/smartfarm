<view class="page-container mobile-container">
  <!-- æ–°å¼å¯¼èˆªæ  -->
  <navigation-bar 
    title="æ™ºæ…§å…»é¹…"
    show-back="{{false}}"
  />



  <scroll-view class="scroll-container" scroll-y>
    <!-- å¤©æ°”æ¨¡å— -->
    <view class="card weather-card {{weather.loading ? 'loading' : ''}}" bindtap="navigateToWeatherDetail">
      <view class="card-content">
        <view class="weather-header">
          <view class="weather-left">
            <view class="weather-icon-wrapper {{weather.loading ? 'loading-animation' : ''}}">
              <text class="weather-emoji">{{weather.emoji || 'ğŸŒ¤ï¸'}}</text>
            </view>
            <view class="weather-info">
              <text class="weather-title">{{weather.loading ? 'è·å–å¤©æ°”ä¸­...' : 'ä»Šæ—¥å¤©æ°”'}}</text>
              <text class="weather-location">{{location.city}}{{location.district}}</text>
              <view class="weather-condition-wrapper">
                <text class="weather-condition {{weather.hasError ? 'error-text' : ''}}">{{weather.condition || 'æ™´'}}</text>
                <text wx:if="{{weather.hasError}}" class="weather-error-hint" bindtap="onWeatherRefresh">ç‚¹å‡»é‡è¯•</text>
              </view>
            </view>
          </view>
          <view class="weather-right">
            <text class="temperature {{weather.hasError ? 'error-text' : ''}}">{{weather.temperature}}Â°C</text>
            <text class="feels-like">ä½“æ„Ÿ {{weather.feelsLike}}Â°C</text>
            <text class="humidity">æ¹¿åº¦ {{weather.humidity}}%</text>
          </view>
        </view>
        
        <!-- å¤©æ°”è¯¦ç»†ä¿¡æ¯ -->
        <view class="weather-details">
          <view class="weather-detail-item">
            <text class="detail-label">é£å‘</text>
            <text class="detail-value">{{weather.windDirection}}</text>
          </view>
          <view class="weather-detail-item">
            <text class="detail-label">é£åŠ›</text>
            <text class="detail-value">{{weather.windScale}}</text>
          </view>
          <view class="weather-detail-item weather-update-item" bindtap="onWeatherRefresh" catchtap="onWeatherRefresh">
            <text class="detail-label">æ›´æ–°æ—¶é—´</text>
            <text class="detail-value">{{weather.updateTime}}</text>
          </view>
        </view>
        
      </view>
    </view>

    <!-- ä»Šæ—¥é¹…ä»· -->
    <view class="card price-card">
      <view class="card-header">
        <text class="card-title">ğŸ“ˆ ä»Šæ—¥é¹…ä»·</text>
        <text class="update-time">æ›´æ–°äº {{priceUpdateTime}}</text>
      </view>
      <view class="price-grid">
        <view class="price-item success-bg">
          <text class="price-label">æˆé¹…ä»·æ ¼</text>
          <text class="price-value success-text">Â¥{{goosePrice.adult}}<text class="price-unit">/æ–¤</text></text>
          <text class="price-trend {{goosePrice.adultTrend > 0 ? 'trend-up' : 'trend-down'}}">
            {{goosePrice.adultTrend > 0 ? 'â†‘' : 'â†“'}} {{goosePrice.adultChange}}
          </text>
        </view>
        <view class="price-item primary-bg">
          <text class="price-label">é¹…è‹—ä»·æ ¼</text>
          <text class="price-value primary-text">Â¥{{goosePrice.gosling}}<text class="price-unit">/ç¾½</text></text>
          <text class="price-trend {{goosePrice.goslingTrend > 0 ? 'trend-up' : 'trend-down'}}">
            {{goosePrice.goslingTrend > 0 ? 'â†‘' : 'â†“'}} {{goosePrice.goslingChange}}
          </text>
        </view>
      </view>
    </view>

    <!-- å¾…åŠäº‹é¡¹ -->
    <view class="card todo-card">
      <view class="card-header">
        <text class="card-title">âœ… ä»Šæ—¥å¾…åŠ</text>
      </view>
      <view class="todo-list">
        <view class="todo-item" wx:for="{{todoList}}" wx:key="id">
          <view class="todo-left">
            <view class="todo-dot {{item.priority}}"></view>
            <text class="todo-text">{{item.content}}</text>
          </view>
          <t-tag theme="{{item.tagTheme || 'default'}}" size="small" class="todo-tag">{{item.priorityText || 'æ™®é€š'}}</t-tag>
        </view>
      </view>
      <t-button theme="light" size="medium" block bind:tap="viewAllTodos" class="view-all-btn">
        æŸ¥çœ‹å…¨éƒ¨
      </t-button>
    </view>




  </scroll-view>
</view>