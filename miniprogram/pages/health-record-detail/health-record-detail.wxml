<!--health-record-detail.wxml - 健康记录详情页面-->
<view class="page-container">
  <!-- 自定义导航栏 -->
  <navigation-bar 
    title="健康记录详情"
    show-back="true"
    show-menu="false"
    show-record="false"
    bind:back="goBack"
  />

  <!-- 加载状态 -->
  <view wx:if="{{loading}}" class="loading-container">
    <t-loading theme="spinner" size="40rpx" text="加载中..." />
  </view>

  <!-- 空数据状态 -->
  <view wx:elif="{{!record.id}}" class="empty-container">
    <view class="empty-icon">📝</view>
    <view class="empty-text">暂无记录信息</view>
    <t-button theme="primary" size="medium" bind:tap="goBack" class="empty-btn primary-button">
      返回列表
    </t-button>
  </view>

  <!-- 页面内容 -->
  <view wx:else class="content-container">
    <!-- 记录状态卡片 -->
    <view class="status-card">
      <view class="card-header">
        <text class="card-title">记录状态</text>
        <t-tag theme="{{record.severity || 'default'}}" size="medium">{{record.priorityText || '未知'}}</t-tag>
      </view>
      <view class="status-info">
        <text class="status-text">{{record.status}}</text>
        <text class="record-date">记录时间：{{record.date}} {{record.time}}</text>
      </view>
    </view>

    <!-- 基本信息 - 使用TDesign Cell组件实现卡片效果 -->
    <view class="card-section">
      <view class="section-title">基本信息</view>
      <t-cell-group class="card-cell-group">
        <t-cell title="诊断病种" note="{{record.location || '未确诊'}}" hover />
        <t-cell title="异常数量" note="{{record.affectedCount}}只" hover />
        <t-cell title="严重程度" note="{{record.priorityText}}" hover />
        <t-cell title="记录人员" note="{{record.operator}}" hover />
      </t-cell-group>
    </view>

    <!-- 症状描述 -->
    <view class="card-section">
      <view class="section-title">症状描述</view>
      <t-cell-group class="card-cell-group">
        <view class="content-cell">
          <text class="content-text">{{record.symptoms || '无症状描述'}}</text>
        </view>
      </t-cell-group>
    </view>

    <!-- 治疗方案 -->
    <view class="card-section">
      <view class="section-title">治疗方案</view>
      <t-cell-group class="card-cell-group">
        <view class="content-cell">
          <text class="content-text">{{record.treatment || '暂无治疗方案'}}</text>
        </view>
      </t-cell-group>
    </view>

    <!-- 处理情况 -->
    <view wx:if="{{record.hasFollowUp}}" class="card-section">
      <view class="section-title">处理情况</view>
      <t-cell-group class="card-cell-group">
        <t-cell wx:if="{{record.curedCount > 0}}" title="已治愈" note="{{record.curedCount}}只" hover />
        <t-cell wx:if="{{record.deathCount > 0}}" title="已死亡" note="{{record.deathCount}}只" hover />
        <t-cell wx:if="{{record.remainingCount > 0}}" title="治疗中" note="{{record.remainingCount}}只" hover />
      </t-cell-group>
    </view>

    <!-- 操作按钮 -->
    <view class="action-section">
      <t-button 
        wx:if="{{record.canFollowUp}}"
        theme="primary" 
        size="large" 
        block 
        bind:tap="goToFollowUp"
        class="action-btn"
      >
        跟进治疗
      </t-button>
      
      <t-button 
        theme="default" 
        size="large" 
        block 
        bind:tap="goBack"
        class="action-btn"
      >
        返回列表
      </t-button>
    </view>
  </view>
</view>
