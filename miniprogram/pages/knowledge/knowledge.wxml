<!--knowledge.wxml-->
<view class="page-container">
  <!-- æ–°å¼å¯¼èˆªæ  -->
  <navigation-bar 
    title="å…»é¹…çŸ¥è¯†åº“"
    show-back="{{true}}"
    show-menu="{{false}}"
    show-record="{{false}}"
    bind:back="goBack"
  />
  
  <!-- æœç´¢æ  -->
  <view class="search-section" wx:if="{{showSearchBar}}">
    <view class="search-container">
      <t-input placeholder="æœç´¢å…»é¹…çŸ¥è¯†..." 
               value="{{searchKeyword}}" 
               bind:change="onSearchInput"
               bind:enter="searchArticles"
               prefix-icon="search" />
    </view>
  </view>

  <scroll-view class="scroll-container" scroll-y style="padding-top: {{totalNavHeight + 100}}rpx;">
    <!-- åˆ†ç±»å¯¼èˆª -->
    <view class="category-nav">
      <t-tabs value="{{activeCategory}}" bind:change="selectCategory" theme="line" class="knowledge-tabs">
        <t-tab-panel wx:for="{{categories}}" wx:key="id" value="{{item.id}}" label="{{item.name}}" />
      </t-tabs>
    </view>

    <!-- çƒ­é—¨æ¨è -->
    <view wx:if="{{activeCategory === 'all'}}" class="card hot-card">
      <view class="card-header">
        <text class="card-title">ğŸ”¥ æœ¬å‘¨çƒ­é—¨</text>
      </view>
      <t-cell title="{{hotArticle.title}}"
              description="{{hotArticle.description}}"
              note="é˜…è¯»é‡: {{hotArticle.views}} â€¢ {{hotArticle.date}}"
              left-icon="ğŸ”¥"
              arrow
              bind:click="viewArticle"
              data-item="{{hotArticle}}"
              class="hot-article-cell">
      </t-cell>
    </view>

    <!-- æ–‡ç« åˆ—è¡¨ -->
    <view class="card article-list-card">
      <view class="card-header">
        <text class="card-title">æ–‡ç« åˆ—è¡¨</text>
      </view>
      <t-cell-group>
        <t-cell wx:for="{{filteredArticles}}" 
                wx:key="id"
                title="{{item.title}}"
                description="{{item.description}}"
                note="ğŸ‘ï¸ {{item.views}} â€¢ â±ï¸ {{item.readTime}}åˆ†é’Ÿ â€¢ {{item.date}}"
                left-icon="{{item.categoryIcon}}"
                arrow
                bind:click="viewArticle"
                data-item="{{item}}">
          <view slot="right" class="article-meta">
            <t-tag theme="{{item.categoryTheme}}" size="small">{{item.categoryName}}</t-tag>
          </view>
        </t-cell>
      </t-cell-group>
    </view>

    <!-- æˆ‘çš„æ”¶è— -->
    <view class="card collection-card">
      <view class="card-header">
        <text class="card-title">ğŸ’¾ æˆ‘çš„æ”¶è—</text>
        <text class="view-all" bind:tap="viewAllCollections">æŸ¥çœ‹å…¨éƒ¨</text>
      </view>
      <t-grid column="2" class="collection-grid">
        <t-grid-item wx:for="{{collections}}" 
                     wx:key="id"
                     bind:click="viewArticle" 
                     data-item="{{item}}">
          <view class="collection-item">
            <text class="collection-title">{{item.title}}</text>
            <text class="collection-date">{{item.collectedDate}}æ”¶è—</text>
          </view>
        </t-grid-item>
      </t-grid>
    </view>

    <!-- åº•éƒ¨å®‰å…¨åŒºåŸŸ -->
    <view style="height: 120rpx;"></view>
  </scroll-view>
</view>
