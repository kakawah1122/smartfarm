<!--knowledge.wxml-->
<view class="page-container">
  <!-- æ–°å¼å¯¼èˆªæ  -->
  <navigation-bar 
    title="å…»é¹…çŸ¥è¯†åº“"
    show-back="true"
    show-menu="false"
    show-record="false"
    bind:back="goBack"
  />
  
  <!-- å†…å®¹åŒºåŸŸ - æŒ‰ç…§é¡¹ç›®è§„èŒƒ -->
  <view class="content-wrapper">
  <!-- æœç´¢æ  -->
  <view class="search-section" wx:if="{{showSearchBar}}">
    <view class="search-container">
      <t-input placeholder="æœç´¢å…»é¹…çŸ¥è¯†..." 
               value="{{searchKeyword}}" 
               bind:change="onSearchInput"
               bind:enter="searchArticles"
               prefix-icon="search" />
    </view>
  </view>

    <!-- åˆ†ç±»å¯¼èˆª -->
    <view class="category-nav">
      <t-tabs value="{{activeCategory}}" bind:change="selectCategory" theme="line" class="knowledge-tabs">
        <t-tab-panel wx:for="{{categories}}" wx:key="id" value="{{item.id}}" label="{{item.name}}" />
      </t-tabs>
    </view>

    <!-- æ»šåŠ¨åˆ—è¡¨å®¹å™¨ - æŒ‰ç…§é¡¹ç›®è§„èŒƒ -->
    <scroll-view class="scroll-container" scroll-y>
    <!-- æ–‡ç« åˆ—è¡¨ -->
      <view wx:if="{{filteredArticles.length > 0}}" class="article-list">
        <view wx:for="{{filteredArticles}}" 
                wx:key="id"
              class="article-item"
              bindtap="viewArticle"
                data-item="{{item}}">
          <view class="article-item-top">
            <view class="article-item-content">
              <text class="article-title">{{item.title}}</text>
              <text class="article-desc" wx:if="{{item.description}}">{{item.description}}</text>
            </view>
            <view class="article-meta">
            <t-tag theme="{{item.categoryTheme || 'default'}}" size="small">{{item.categoryName || 'æœªåˆ†ç±»'}}</t-tag>
            </view>
          </view>
          <view class="article-item-footer">
            <view class="article-stats">
              <view class="stat-item">
                <text class="stat-text">ğŸ‘ï¸ {{item.views || 0}}</text>
              </view>
              <view class="stat-item">
                <text class="stat-text">â±ï¸ {{item.readTime || 0}}åˆ†é’Ÿ</text>
    </view>
      </view>
            <text class="article-date">{{item.date}}</text>
          </view>
        </view>
      </view>

      <!-- ç©ºçŠ¶æ€æç¤º -->
      <view wx:else class="empty-state">
        <text class="empty-text">æš‚æ— æ–‡ç« </text>
        <text class="empty-desc">è¯¥åˆ†ç±»ä¸‹è¿˜æ²¡æœ‰æ–‡ç« ï¼Œè¯·ç¨åå†æ¥æŸ¥çœ‹</text>
    </view>

      <!-- åº•éƒ¨å®‰å…¨åŒºåŸŸå ä½ -->
      <view class="safe-area"></view>
  </scroll-view>
  </view>
</view>
