# é¹…æ•°é€šå°ç¨‹åºé¡¹ç›®å¼€å‘è§„èŒƒ

## ğŸ“š æ–‡æ¡£è¯´æ˜

æœ¬æ–‡æ¡£å®šä¹‰äº†é¹…æ•°é€šå°ç¨‹åºé¡¹ç›®çš„å¼€å‘è§„èŒƒå’Œæœ€ä½³å®è·µï¼Œæ‰€æœ‰å¼€å‘äººå‘˜åœ¨å¼€å‘æ–°åŠŸèƒ½æˆ–ç»´æŠ¤ç°æœ‰åŠŸèƒ½æ—¶éƒ½åº”éµå¾ªè¿™äº›è§„èŒƒã€‚

**ç‰ˆæœ¬**: v1.0  
**æ›´æ–°æ—¥æœŸ**: 2025å¹´11æœˆ7æ—¥

---

## ç›®å½•

- [1. ä»£ç ç»„ç»‡è§„èŒƒ](#1-ä»£ç ç»„ç»‡è§„èŒƒ)
- [2. ç»„ä»¶åŒ–å¼€å‘è§„èŒƒ](#2-ç»„ä»¶åŒ–å¼€å‘è§„èŒƒ)
- [3. è¯¦æƒ…å¼¹çª—ç»„ä»¶å¤ç”¨è§„èŒƒ](#3-è¯¦æƒ…å¼¹çª—ç»„ä»¶å¤ç”¨è§„èŒƒ) â­ **é‡ç‚¹**
- [4. å‘½åè§„èŒƒ](#4-å‘½åè§„èŒƒ)
- [5. æ ·å¼è§„èŒƒ](#5-æ ·å¼è§„èŒƒ)
- [6. TypeScript ç¼–ç è§„èŒƒ](#6-typescript-ç¼–ç è§„èŒƒ)
- [7. æ•°æ®äº¤äº’è§„èŒƒ](#7-æ•°æ®äº¤äº’è§„èŒƒ)

---

## 1. ä»£ç ç»„ç»‡è§„èŒƒ

### 1.1 ç›®å½•ç»“æ„

```
miniprogram/
â”œâ”€â”€ components/              # å…¨å±€å¯å¤ç”¨ç»„ä»¶
â”‚   â”œâ”€â”€ bottom-popup/       # åº•éƒ¨å¼¹çª—åŸºç¡€ç»„ä»¶
â”‚   â”œâ”€â”€ navigation-bar/     # å¯¼èˆªæ ç»„ä»¶
â”‚   â”œâ”€â”€ *-detail-popup/     # å„ç±»è¯¦æƒ…å¼¹çª—ç»„ä»¶
â”‚   â””â”€â”€ ...
â”œâ”€â”€ packageFinance/          # è´¢åŠ¡ç®¡ç†åˆ†åŒ…
â”œâ”€â”€ packageProduction/       # ç”Ÿäº§ç®¡ç†åˆ†åŒ…
â”œâ”€â”€ packageHealth/           # å¥åº·ç®¡ç†åˆ†åŒ…
â””â”€â”€ ...
```

### 1.2 æ–‡ä»¶å‘½å

- **é¡µé¢/ç»„ä»¶æ–‡ä»¶**ï¼šä½¿ç”¨ kebab-caseï¼ˆçŸ­æ¨ªçº¿å‘½åï¼‰
  - âœ… `finance-record-list.ts`
  - âŒ `financeRecordList.ts`
  - âŒ `FinanceRecordList.ts`

- **ç±»å/æ¥å£å**ï¼šä½¿ç”¨ PascalCaseï¼ˆå¤§é©¼å³°ï¼‰
  - âœ… `FinanceRecord`
  - âŒ `financeRecord`

- **å˜é‡/å‡½æ•°å**ï¼šä½¿ç”¨ camelCaseï¼ˆå°é©¼å³°ï¼‰
  - âœ… `selectedRecord`
  - âŒ `selected_record`

---

## 2. ç»„ä»¶åŒ–å¼€å‘è§„èŒƒ

### 2.1 ç»„ä»¶è®¾è®¡åŸåˆ™

éµå¾ªä»¥ä¸‹è®¾è®¡åŸåˆ™è¿›è¡Œç»„ä»¶å¼€å‘ï¼š

#### **DRY åŸåˆ™** (Don't Repeat Yourself)
- å½“åŒæ ·çš„ UI æˆ–é€»è¾‘åœ¨ **2 ä¸ªæˆ–æ›´å¤š** åœ°æ–¹ä½¿ç”¨æ—¶ï¼Œå¿…é¡»æå–ä¸ºç»„ä»¶
- é¿å…å¤åˆ¶ç²˜è´´ä»£ç 

#### **å•ä¸€èŒè´£åŸåˆ™**
- æ¯ä¸ªç»„ä»¶åªè´Ÿè´£ä¸€ä¸ªæ˜ç¡®çš„åŠŸèƒ½
- ç»„ä»¶çš„ä¿®æ”¹åªåº”è¯¥æœ‰ä¸€ä¸ªåŸå› 

#### **é«˜å†…èšï¼Œä½è€¦åˆ**
- ç»„ä»¶å†…éƒ¨é€»è¾‘ç´§å¯†ç›¸å…³
- ç»„ä»¶ä¹‹é—´é€šè¿‡æ˜ç¡®çš„æ¥å£ï¼ˆå±æ€§å’Œäº‹ä»¶ï¼‰é€šä¿¡

### 2.2 ç»„ä»¶åˆ›å»ºæ—¶æœº

**å¿…é¡»åˆ›å»ºç»„ä»¶çš„æƒ…å†µ**ï¼š
- âœ… åŒæ ·çš„ UI åœ¨ 2+ ä¸ªé¡µé¢ä½¿ç”¨
- âœ… é¡µé¢æŸä¸ªåŒºå—ä»£ç è¶…è¿‡ 100 è¡Œ
- âœ… åŠŸèƒ½éœ€è¦åœ¨å¤šå¤„å¤ç”¨
- âœ… ä¾¿äºå•ç‹¬æµ‹è¯•å’Œç»´æŠ¤

**ä¸éœ€è¦åˆ›å»ºç»„ä»¶çš„æƒ…å†µ**ï¼š
- âŒ åªåœ¨ä¸€ä¸ªåœ°æ–¹ä½¿ç”¨çš„ç®€å• UI
- âŒ ä»£ç é‡å¾ˆå°ï¼ˆ< 50 è¡Œï¼‰ä¸”æ— å¤ç”¨éœ€æ±‚
- âŒ ä¸é¡µé¢é€»è¾‘å¼ºè€¦åˆçš„ä»£ç 

---

## 3. è¯¦æƒ…å¼¹çª—ç»„ä»¶å¤ç”¨è§„èŒƒ â­

### 3.1 è§„èŒƒè¯´æ˜

**é€‚ç”¨åœºæ™¯**ï¼šå½“éœ€è¦å±•ç¤ºè®°å½•è¯¦æƒ…æ—¶ï¼ˆå¦‚è´¢åŠ¡è®°å½•ã€å…¥æ è®°å½•ã€å‡ºæ è®°å½•ç­‰ï¼‰

**å¼ºåˆ¶è¦æ±‚**ï¼š
- âš ï¸ **ç¦æ­¢**åœ¨é¡µé¢ä¸­ç›´æ¥å†™è¯¦æƒ…å¼¹çª—çš„ UI ä»£ç 
- âš ï¸ **å¿…é¡»**åˆ›å»ºç‹¬ç«‹çš„è¯¦æƒ…å¼¹çª—ç»„ä»¶
- âš ï¸ **å¿…é¡»**éµå¾ªä»¥ä¸‹ç»„ä»¶ç»“æ„å’Œå‘½åè§„èŒƒ

### 3.2 ç»„ä»¶ç»“æ„è§„èŒƒ

#### ç›®å½•ç»“æ„
```
components/
â””â”€â”€ [module]-record-detail-popup/
    â”œâ”€â”€ [module]-record-detail-popup.json    # ç»„ä»¶é…ç½®
    â”œâ”€â”€ [module]-record-detail-popup.wxml    # ç»„ä»¶æ¨¡æ¿
    â”œâ”€â”€ [module]-record-detail-popup.ts      # ç»„ä»¶é€»è¾‘
    â””â”€â”€ [module]-record-detail-popup.scss    # ç»„ä»¶æ ·å¼
```

#### å‘½åè§„èŒƒ
- ç»„ä»¶åï¼š`[æ¨¡å—å]-record-detail-popup`
- ç¤ºä¾‹ï¼š
  - `finance-record-detail-popup` - è´¢åŠ¡è®°å½•è¯¦æƒ…
  - `entry-record-detail-popup` - å…¥æ è®°å½•è¯¦æƒ…
  - `exit-record-detail-popup` - å‡ºæ è®°å½•è¯¦æƒ…
  - `material-record-detail-popup` - ç‰©æ–™è®°å½•è¯¦æƒ…

### 3.3 ç»„ä»¶å®ç°æ¨¡æ¿

#### 1. ç»„ä»¶é…ç½®æ–‡ä»¶ (*.json)

```json
{
  "component": true,
  "usingComponents": {
    "bottom-popup": "/components/bottom-popup/bottom-popup",
    "t-tag": "tdesign-miniprogram/tag/tag"
  }
}
```

#### 2. ç»„ä»¶æ¨¡æ¿æ–‡ä»¶ (*.wxml)

```xml
<!-- [æ¨¡å—]è®°å½•è¯¦æƒ…å¼¹çª—ç»„ä»¶ -->
<bottom-popup
  visible="{{visible}}"
  title="è®°å½•è¯¦æƒ…"
  show-close="{{true}}"
  show-actions="{{true}}"
  confirm-text="ç¡®å®š"
  bind:close="onClose"
  bind:confirm="onClose"
  bind:visiblechange="onVisibleChange"
>
  <view wx:if="{{record}}" class="record-detail-content">
    <view class="info-card">
      <view class="card-content">
        
        <!-- å¿…å¡«å­—æ®µ -->
        <view class="info-row">
          <text class="info-label">å­—æ®µåï¼š</text>
          <text class="info-value">{{record.fieldName}}</text>
        </view>
        <view class="divider-line"></view>
        
        <!-- å¯é€‰å­—æ®µ -->
        <block wx:if="{{record.optionalField}}">
          <view class="info-row">
            <text class="info-label">å¯é€‰å­—æ®µï¼š</text>
            <text class="info-value">{{record.optionalField}}</text>
          </view>
          <view class="divider-line"></view>
        </block>
        
        <!-- çŠ¶æ€å­—æ®µ -->
        <view class="info-row">
          <text class="info-label">çŠ¶æ€ï¼š</text>
          <view class="status-value">
            <t-tag theme="{{record.status === 'å·²å®Œæˆ' ? 'success' : 'warning'}}" size="small">
              {{record.status}}
            </t-tag>
          </view>
        </view>
        
        <!-- å¤‡æ³¨å­—æ®µï¼ˆå¯é€‰ï¼‰ -->
        <block wx:if="{{record.notes}}">
          <view class="divider-line"></view>
          <view class="info-row">
            <text class="info-label">å¤‡æ³¨ï¼š</text>
            <text class="info-value note-text">{{record.notes}}</text>
          </view>
        </block>
        
      </view>
    </view>
  </view>
</bottom-popup>
```

#### 3. ç»„ä»¶é€»è¾‘æ–‡ä»¶ (*.ts)

```typescript
// components/[module]-record-detail-popup/[module]-record-detail-popup.ts
Component({
  options: {
    styleIsolation: 'apply-shared'
  },

  properties: {
    // æ˜¯å¦æ˜¾ç¤ºå¼¹çª—
    visible: {
      type: Boolean,
      value: false
    },
    // è®°å½•æ•°æ®
    record: {
      type: Object,
      value: null
    }
  },

  methods: {
    // å…³é—­å¼¹çª—
    onClose() {
      this.triggerEvent('close')
    },

    // å¼¹çª—å¯è§æ€§å˜åŒ–
    onVisibleChange(e: any) {
      if (!e.detail.visible) {
        this.onClose()
      }
    }
  }
})
```

**é‡è¦è¯´æ˜**ï¼š
- âœ… ä½¿ç”¨ `styleIsolation: 'apply-shared'` å…è®¸é¡µé¢æ ·å¼è¦†ç›–ç»„ä»¶æ ·å¼
- âœ… ä½¿ç”¨ `triggerEvent` å‘çˆ¶é¡µé¢å‘é€äº‹ä»¶
- âœ… é€šè¿‡ `properties` æ¥æ”¶çˆ¶é¡µé¢ä¼ é€’çš„æ•°æ®

#### 4. ç»„ä»¶æ ·å¼æ–‡ä»¶ (*.scss)

```scss
/* [æ¨¡å—]è®°å½•è¯¦æƒ…å¼¹çª—ç»„ä»¶æ ·å¼ */

/* è¯¦æƒ…å†…å®¹å®¹å™¨ */
.record-detail-content {
  padding: 0 !important;
  display: flex !important;
  flex-direction: column !important;
  gap: 0 !important;
}

/* ä¿¡æ¯å¡ç‰‡ */
.record-detail-content .info-card {
  background: white !important;
  border-radius: 12rpx !important;
  padding: 20rpx !important;
  margin: 0 !important;
  box-shadow: none !important;
  border: 2rpx solid #0052d9 !important;
}

/* å¡ç‰‡å†…å®¹ */
.record-detail-content .card-content {
  display: flex !important;
  flex-direction: column !important;
  padding: 0 !important;
  overflow: visible !important;
}

/* ä¿¡æ¯è¡Œ */
.record-detail-content .info-row {
  display: flex !important;
  justify-content: space-between !important;
  align-items: center !important;
  padding: 12rpx 0 !important;
  gap: 24rpx !important;
  margin-bottom: 0 !important;
}

/* è™šçº¿åˆ†éš”ç¬¦ */
.record-detail-content .divider-line {
  height: 2rpx !important;
  min-height: 2rpx !important;
  width: 100% !important;
  border: none !important;
  border-top: 2rpx dashed #999 !important;
  margin: 10rpx 0 !important;
  padding: 0 !important;
  display: block !important;
}

/* æ ‡ç­¾æ ·å¼ */
.record-detail-content .info-label {
  font-size: 26rpx !important;
  color: #666 !important;
  flex-shrink: 0 !important;
  min-width: 120rpx !important;
  margin-right: 0 !important;
  font-weight: 400 !important;
}

/* å€¼æ ·å¼ */
.record-detail-content .info-value {
  font-size: 28rpx !important;
  color: #333 !important;
  font-weight: 500 !important;
  text-align: right !important;
  flex: 1 !important;
  word-break: break-all !important;
  overflow-wrap: break-word !important;
  line-height: 1.5 !important;
}

/* çŠ¶æ€æ ‡ç­¾å®¹å™¨ */
.record-detail-content .status-value {
  display: flex !important;
  align-items: center !important;
  justify-content: flex-end !important;
  flex: 1 !important;
}

/* å¤‡æ³¨æ–‡æœ¬ */
.record-detail-content .note-text {
  text-align: left !important;
  word-break: break-all !important;
  white-space: pre-wrap !important;
  line-height: 1.5 !important;
}
```

**æ ·å¼è§„èŒƒè¯´æ˜**ï¼š
- âœ… æ‰€æœ‰æ ·å¼ä½¿ç”¨ `!important` ç¡®ä¿ä¼˜å…ˆçº§
- âœ… å¡ç‰‡ä½¿ç”¨ç™½è‰²èƒŒæ™¯ + è“è‰²è¾¹æ¡†
- âœ… æ ‡ç­¾å›ºå®šå®½åº¦ 120rpxï¼Œå·¦å¯¹é½
- âœ… å€¼æ–‡æœ¬å³å¯¹é½ï¼Œè‡ªåŠ¨æ¢è¡Œ
- âœ… ä½¿ç”¨è™šçº¿åˆ†éš”ç¬¦ï¼ˆç°è‰²è™šçº¿ï¼‰
- âœ… å¤‡æ³¨æ–‡æœ¬å·¦å¯¹é½ï¼Œæ”¯æŒå¤šè¡Œ

### 3.4 é¡µé¢ä½¿ç”¨è§„èŒƒ

#### 1. åœ¨é¡µé¢é…ç½®ä¸­å¼•å…¥ç»„ä»¶

```json
{
  "usingComponents": {
    "[component-name]": "/components/[module]-record-detail-popup/[module]-record-detail-popup"
  }
}
```

**ç¤ºä¾‹**ï¼š
```json
{
  "usingComponents": {
    "finance-record-detail": "/components/finance-record-detail-popup/finance-record-detail-popup"
  }
}
```

#### 2. åœ¨é¡µé¢æ¨¡æ¿ä¸­ä½¿ç”¨ç»„ä»¶

```xml
<!-- åœ¨é¡µé¢åº•éƒ¨æ·»åŠ  -->
<[component-name]
  visible="{{showDetailPopup}}"
  record="{{selectedRecord}}"
  bind:close="closeDetailPopup"
/>
```

**ç¤ºä¾‹**ï¼š
```xml
<finance-record-detail
  visible="{{showDetailPopup}}"
  record="{{selectedRecord}}"
  bind:close="closeDetailPopup"
/>
```

#### 3. åœ¨é¡µé¢é€»è¾‘ä¸­æ§åˆ¶æ˜¾ç¤º

```typescript
// é¡µé¢ data
data: {
  showDetailPopup: false,      // å¼¹çª—æ˜¾ç¤ºçŠ¶æ€
  selectedRecord: null as any  // é€‰ä¸­çš„è®°å½•
}

// æŸ¥çœ‹è®°å½•è¯¦æƒ…
viewRecordDetail(e: any) {
  const { record } = e.currentTarget.dataset
  this.setData({
    selectedRecord: record,
    showDetailPopup: true
  })
}

// å…³é—­è¯¦æƒ…å¼¹çª—
closeDetailPopup() {
  this.setData({
    showDetailPopup: false
  })
  // âš ï¸ é‡è¦ï¼šå»¶è¿Ÿæ¸…ç©ºæ•°æ®ï¼Œé¿å…å¼¹çª—å…³é—­åŠ¨ç”»æ—¶æ•°æ®é—ªçƒ
  setTimeout(() => {
    this.setData({
      selectedRecord: null
    })
  }, 300)
}
```

**å…³é”®ç‚¹è¯´æ˜**ï¼š
- âœ… ä½¿ç”¨ `setTimeout` å»¶è¿Ÿ 300ms æ¸…ç©ºæ•°æ®
- âœ… å»¶è¿Ÿæ—¶é—´ä¸å¼¹çª—å…³é—­åŠ¨ç”»æ—¶é—´ä¸€è‡´
- âœ… é¿å…å…³é—­åŠ¨ç”»æ—¶å‡ºç°æ•°æ®é—ªçƒ

#### 4. é¡µé¢æ ·å¼æ¸…ç†

åˆ›å»ºç»„ä»¶åï¼Œ**å¿…é¡»åˆ é™¤**é¡µé¢ä¸­çš„è¯¦æƒ…å¼¹çª—ç›¸å…³æ ·å¼ï¼š

```scss
// âŒ åˆ é™¤è¿™äº›æ ·å¼ï¼ˆå·²ç§»åˆ°ç»„ä»¶ä¸­ï¼‰
.record-detail-content { ... }
.info-card { ... }
.info-row { ... }
.divider-line { ... }
.info-label { ... }
.info-value { ... }
// ...
```

### 3.5 å·²å®ç°çš„è¯¦æƒ…å¼¹çª—ç»„ä»¶

ä»¥ä¸‹ç»„ä»¶å·²æŒ‰ç…§è§„èŒƒå®ç°ï¼Œå¯ä½œä¸ºå‚è€ƒï¼š

| ç»„ä»¶å | è·¯å¾„ | ç”¨é€” | ä½¿ç”¨é¡µé¢ |
|--------|------|------|----------|
| `finance-record-detail-popup` | `/components/finance-record-detail-popup/` | è´¢åŠ¡è®°å½•è¯¦æƒ… | è´¢åŠ¡ç®¡ç†ã€è´¢åŠ¡è®°å½•åˆ—è¡¨ |
| `entry-record-detail-popup` | `/components/entry-record-detail-popup/` | å…¥æ è®°å½•è¯¦æƒ… | å…¥æ è®°å½•åˆ—è¡¨ |
| `exit-record-detail-popup` | `/components/exit-record-detail-popup/` | å‡ºæ è®°å½•è¯¦æƒ… | å‡ºæ è®°å½•åˆ—è¡¨ |
| `material-record-detail-popup` | `/components/material-record-detail-popup/` | ç‰©æ–™è®°å½•è¯¦æƒ… | ç‰©æ–™è®°å½•åˆ—è¡¨ |

### 3.6 å¼€å‘æ£€æŸ¥æ¸…å•

åœ¨åˆ›å»ºæ–°çš„è¯¦æƒ…å¼¹çª—æ—¶ï¼Œè¯·ç¡®ä¿ï¼š

- [ ] ç»„ä»¶å‘½åç¬¦åˆè§„èŒƒ `[module]-record-detail-popup`
- [ ] ç»„ä»¶åŒ…å« 4 ä¸ªæ–‡ä»¶ï¼ˆjson, wxml, ts, scssï¼‰
- [ ] ä½¿ç”¨ `bottom-popup` ä½œä¸ºåŸºç¡€ç»„ä»¶
- [ ] å®ç° `visible` å’Œ `record` å±æ€§
- [ ] å®ç° `close` äº‹ä»¶
- [ ] æ ·å¼ä½¿ç”¨ç»Ÿä¸€çš„è®¾è®¡è§„èŒƒ
- [ ] åœ¨é¡µé¢é…ç½®ä¸­æ­£ç¡®å¼•å…¥ç»„ä»¶
- [ ] åœ¨é¡µé¢ä¸­æ­£ç¡®ä½¿ç”¨ç»„ä»¶
- [ ] å®ç°å»¶è¿Ÿæ¸…ç©ºæ•°æ®æœºåˆ¶
- [ ] åˆ é™¤é¡µé¢ä¸­çš„æ—§æ ·å¼ä»£ç 
- [ ] æµ‹è¯•å¼¹çª—æ˜¾ç¤ºã€å…³é—­åŠ¨ç”»æ­£å¸¸

### 3.7 åæ¨¡å¼ï¼ˆç¦æ­¢åšæ³•ï¼‰

âŒ **ç¦æ­¢åœ¨é¡µé¢ä¸­ç›´æ¥å†™è¯¦æƒ…å¼¹çª—ä»£ç **
```xml
<!-- âŒ é”™è¯¯åšæ³• -->
<bottom-popup visible="{{showDetailPopup}}">
  <view class="detail-content">
    <!-- å¤§é‡è¯¦æƒ… UI ä»£ç  -->
  </view>
</bottom-popup>
```

âŒ **ç¦æ­¢å¤åˆ¶ç²˜è´´å¼¹çª—ä»£ç åˆ°å¤šä¸ªé¡µé¢**
```
finance/finance.wxml          â† æœ‰ä¸€ä»½å¼¹çª—ä»£ç 
finance-record-list.wxml      â† åˆå¤åˆ¶äº†ä¸€ä»½
entry-records-list.wxml       â† åˆå¤åˆ¶äº†ä¸€ä»½
âŒ è¿™è¿åäº† DRY åŸåˆ™ï¼
```

âŒ **ç¦æ­¢ä¸ä½¿ç”¨å»¶è¿Ÿæ¸…ç©ºæ•°æ®**
```typescript
// âŒ é”™è¯¯åšæ³•ï¼šç«‹å³æ¸…ç©ºæ•°æ®ä¼šå¯¼è‡´å…³é—­åŠ¨ç”»æ—¶é—ªçƒ
closeDetailPopup() {
  this.setData({
    showDetailPopup: false,
    selectedRecord: null  // âŒ ä¸åº”è¯¥ç«‹å³æ¸…ç©º
  })
}
```

âœ… **æ­£ç¡®åšæ³•ï¼šåˆ›å»ºç‹¬ç«‹ç»„ä»¶**
```xml
<!-- âœ… æ­£ç¡®åšæ³• -->
<finance-record-detail
  visible="{{showDetailPopup}}"
  record="{{selectedRecord}}"
  bind:close="closeDetailPopup"
/>
```

---

## 4. å‘½åè§„èŒƒ

### 4.1 ç»„ä»¶å‘½å

- **å…¨å±€ç»„ä»¶**ï¼šä½¿ç”¨æè¿°æ€§åç§°
  - `bottom-popup` - åº•éƒ¨å¼¹çª—
  - `navigation-bar` - å¯¼èˆªæ 

- **åŠŸèƒ½ç»„ä»¶**ï¼šä½¿ç”¨ `[åŠŸèƒ½]-[ç±»å‹]` æ ¼å¼
  - `finance-record-detail-popup` - è´¢åŠ¡è®°å½•è¯¦æƒ…å¼¹çª—
  - `entry-record-card` - å…¥æ è®°å½•å¡ç‰‡

### 4.2 å˜é‡å‘½å

```typescript
// âœ… å¥½çš„å‘½å
const selectedRecord = ...      // é€‰ä¸­çš„è®°å½•
const showDetailPopup = ...     // æ˜¾ç¤ºè¯¦æƒ…å¼¹çª—
const isLoading = ...           // æ˜¯å¦åŠ è½½ä¸­

// âŒ ä¸å¥½çš„å‘½å
const data = ...                // å¤ªæ¨¡ç³Š
const flag = ...                // å«ä¹‰ä¸æ˜ç¡®
const temp = ...                // ä¸´æ—¶å˜é‡åº”è¯¥é¿å…
```

### 4.3 å‡½æ•°å‘½å

```typescript
// âœ… å¥½çš„å‘½åï¼ˆåŠ¨è¯å¼€å¤´ï¼‰
viewRecordDetail()              // æŸ¥çœ‹è®°å½•è¯¦æƒ…
closeDetailPopup()              // å…³é—­è¯¦æƒ…å¼¹çª—
loadRecords()                   // åŠ è½½è®°å½•

// âŒ ä¸å¥½çš„å‘½å
detail()                        // ä¸æ˜ç¡®
popup()                         // ä¸æ˜ç¡®
records()                       // ä¸æ˜ç¡®
```

---

## 5. æ ·å¼è§„èŒƒ

### 5.1 ç»Ÿä¸€çš„è®¾è®¡ç³»ç»Ÿ

#### é¢œè‰²è§„èŒƒ
```scss
// ä¸»è‰²è°ƒ
$primary-color: #0052d9;        // ä¸»é¢˜è“
$success-color: #00a870;        // æˆåŠŸç»¿
$warning-color: #ed7b2f;        // è­¦å‘Šæ©™
$error-color: #e34d59;          // é”™è¯¯çº¢

// æ–‡æœ¬é¢œè‰²
$text-primary: #333;            // ä¸»è¦æ–‡æœ¬
$text-secondary: #666;          // æ¬¡è¦æ–‡æœ¬
$text-tertiary: #999;           // è¾…åŠ©æ–‡æœ¬

// èƒŒæ™¯é¢œè‰²
$bg-primary: #ffffff;           // ä¸»èƒŒæ™¯
$bg-secondary: #f5f5f5;         // æ¬¡èƒŒæ™¯
```

#### é—´è·è§„èŒƒ
```scss
// ç»Ÿä¸€ä½¿ç”¨ 8rpx çš„å€æ•°
$spacing-xs: 8rpx;              // æå°é—´è·
$spacing-sm: 12rpx;             // å°é—´è·
$spacing-md: 16rpx;             // ä¸­ç­‰é—´è·
$spacing-lg: 24rpx;             // å¤§é—´è·
$spacing-xl: 32rpx;             // è¶…å¤§é—´è·
```

#### åœ†è§’è§„èŒƒ
```scss
$border-radius-sm: 8rpx;        // å°åœ†è§’
$border-radius-md: 12rpx;       // ä¸­åœ†è§’
$border-radius-lg: 16rpx;       // å¤§åœ†è§’
```

### 5.2 æ ·å¼éš”ç¦»

ç»„ä»¶å¿…é¡»ä½¿ç”¨ `styleIsolation` æ§åˆ¶æ ·å¼éš”ç¦»ï¼š

```typescript
Component({
  options: {
    styleIsolation: 'apply-shared'  // âœ… å…è®¸é¡µé¢æ ·å¼å½±å“ç»„ä»¶
  }
})
```

### 5.3 Important ä½¿ç”¨è§„èŒƒ

- âœ… ç»„ä»¶æ ·å¼å¯ä»¥ä½¿ç”¨ `!important` ç¡®ä¿ä¼˜å…ˆçº§
- âŒ é¡µé¢æ ·å¼å°½é‡é¿å…ä½¿ç”¨ `!important`

---

## 6. TypeScript ç¼–ç è§„èŒƒ

### 6.1 ç±»å‹å®šä¹‰

```typescript
// âœ… å¥½çš„åšæ³•ï¼šå®šä¹‰æ¥å£
interface FinanceRecord {
  id: string
  type: string
  amount: number
  date: string
  operator: string
  notes?: string  // å¯é€‰å­—æ®µä½¿ç”¨ ?
}

// âœ… ä½¿ç”¨ç±»å‹
const record: FinanceRecord = { ... }

// âŒ é¿å…ä½¿ç”¨ any
const data: any = { ... }
```

### 6.2 ç©ºå€¼å¤„ç†

```typescript
// âœ… å¥½çš„åšæ³•ï¼šæ˜ç¡®å¤„ç†ç©ºå€¼
if (record && record.notes) {
  // ä½¿ç”¨ notes
}

// ä½¿ç”¨å¯é€‰é“¾
const amount = record?.rawRecord?.amount ?? 0

// âŒ ä¸å¥½çš„åšæ³•ï¼šä¸æ£€æŸ¥å°±ä½¿ç”¨
const amount = record.rawRecord.amount
```

---

## 7. æ•°æ®äº¤äº’è§„èŒƒ

### 7.1 ç»„ä»¶é€šä¿¡

#### çˆ¶ â†’ å­ï¼ˆé€šè¿‡ propertiesï¼‰
```typescript
// å­ç»„ä»¶å®šä¹‰
properties: {
  record: {
    type: Object,
    value: null
  }
}

// çˆ¶ç»„ä»¶ä½¿ç”¨
<component record="{{selectedRecord}}" />
```

#### å­ â†’ çˆ¶ï¼ˆé€šè¿‡ eventsï¼‰
```typescript
// å­ç»„ä»¶è§¦å‘
this.triggerEvent('close', { id: '123' })

// çˆ¶ç»„ä»¶ç›‘å¬
<component bind:close="handleClose" />

// çˆ¶ç»„ä»¶å¤„ç†
handleClose(e: any) {
  const { id } = e.detail
}
```

### 7.2 æ•°æ®è¯·æ±‚

```typescript
// âœ… ç»Ÿä¸€ä½¿ç”¨ try-catch å¤„ç†é”™è¯¯
async loadData() {
  try {
    const result = await wx.cloud.callFunction({ ... })
    this.setData({ data: result.data })
  } catch (error) {
    console.error('åŠ è½½æ•°æ®å¤±è´¥', error)
    wx.showToast({
      title: 'åŠ è½½å¤±è´¥',
      icon: 'none'
    })
  }
}
```

---

## ğŸ“‹ å¼€å‘æµç¨‹æ£€æŸ¥æ¸…å•

### æ–°å¢åŠŸèƒ½æ—¶

- [ ] æ£€æŸ¥æ˜¯å¦æœ‰å¯å¤ç”¨çš„ç»„ä»¶
- [ ] å¦‚æœæœ‰é‡å¤ä»£ç ï¼Œè€ƒè™‘æå–ä¸ºç»„ä»¶
- [ ] éµå¾ªå‘½åè§„èŒƒ
- [ ] éµå¾ªæ ·å¼è§„èŒƒ
- [ ] æ·»åŠ å¿…è¦çš„ç±»å‹å®šä¹‰
- [ ] æ·»åŠ é”™è¯¯å¤„ç†
- [ ] æµ‹è¯•å„ç§åœºæ™¯

### åˆ›å»ºè¯¦æƒ…å¼¹çª—æ—¶

- [ ] ä½¿ç”¨ `[module]-record-detail-popup` å‘½å
- [ ] åˆ›å»ºå®Œæ•´çš„ 4 ä¸ªæ–‡ä»¶
- [ ] ä½¿ç”¨ç»Ÿä¸€çš„æ ·å¼è§„èŒƒ
- [ ] å®ç°å»¶è¿Ÿæ¸…ç©ºæ•°æ®æœºåˆ¶
- [ ] åˆ é™¤é¡µé¢ä¸­çš„æ—§ä»£ç 
- [ ] æµ‹è¯•å¼¹çª—åŠ¨ç”»æ•ˆæœ

### ä»£ç å®¡æŸ¥æ—¶

- [ ] æ£€æŸ¥æ˜¯å¦æœ‰é‡å¤ä»£ç 
- [ ] æ£€æŸ¥å‘½åæ˜¯å¦è§„èŒƒ
- [ ] æ£€æŸ¥æ ·å¼æ˜¯å¦ç»Ÿä¸€
- [ ] æ£€æŸ¥ç±»å‹å®šä¹‰æ˜¯å¦å®Œæ•´
- [ ] æ£€æŸ¥é”™è¯¯å¤„ç†æ˜¯å¦å®Œå–„

---

## ğŸ“š å‚è€ƒæ–‡æ¡£

- [ç»„ä»¶é‡æ„å®Œæˆæ€»ç»“.md](./ç»„ä»¶é‡æ„å®Œæˆæ€»ç»“.md) - è¯¦æƒ…å¼¹çª—é‡æ„æ¡ˆä¾‹
- [ç»„ä»¶é‡æ„è¯´æ˜-è´¢åŠ¡è®°å½•è¯¦æƒ…å¼¹çª—.md](./ç»„ä»¶é‡æ„è¯´æ˜-è´¢åŠ¡è®°å½•è¯¦æƒ…å¼¹çª—.md) - è´¢åŠ¡æ¨¡å—é‡æ„è¯¦æƒ…

---

## âš ï¸ é‡è¦æé†’

1. **é‡åˆ°é‡å¤ä»£ç æ—¶ï¼Œç«‹å³é‡æ„**
   - ä¸è¦"å…ˆå®ç°åŠŸèƒ½ï¼Œä»¥åå†ä¼˜åŒ–"
   - æŠ€æœ¯å€ºä¼šè¶Šç§¯è¶Šå¤š

2. **éµå¾ªç°æœ‰è§„èŒƒ**
   - æŸ¥çœ‹å·²æœ‰ç»„ä»¶çš„å®ç°æ–¹å¼
   - ä¿æŒä»£ç é£æ ¼ä¸€è‡´

3. **ç»„ä»¶ä¼˜å…ˆ**
   - ä¼˜å…ˆè€ƒè™‘ä½¿ç”¨ç°æœ‰ç»„ä»¶
   - å¦‚éœ€æ–°åŠŸèƒ½ï¼Œä¼˜å…ˆæ‰©å±•ç°æœ‰ç»„ä»¶è€Œéåˆ›å»ºæ–°ç»„ä»¶

4. **å®šæœŸé‡æ„**
   - å‘ç°é‡å¤ä»£ç æ—¶ç«‹å³é‡æ„
   - ä¸è¦ç­‰åˆ°æŠ€æœ¯å€ºç§¯ç´¯å¤ªå¤š

---

## ğŸ“ è”ç³»æ–¹å¼

å¦‚æœ‰ç–‘é—®æˆ–å»ºè®®ï¼Œè¯·è”ç³»ï¼š
- é¡¹ç›®è´Ÿè´£äººï¼š[å¾…è¡¥å……]
- æŠ€æœ¯æ”¯æŒï¼š[å¾…è¡¥å……]

---

**æœ€åæ›´æ–°**: 2025å¹´11æœˆ7æ—¥  
**æ–‡æ¡£ç‰ˆæœ¬**: v1.0

