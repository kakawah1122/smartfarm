# æƒé™è°ƒæ•´è¯´æ˜ - è´¢åŠ¡æƒé™æ”¶ç´§

**è°ƒæ•´æ—¥æœŸ**: 2025-11-06  
**è°ƒæ•´ç±»å‹**: æƒé™é…ç½®ä¼˜åŒ–

---

## ğŸ“‹ è°ƒæ•´æ¦‚è¿°

ç§»é™¤å‘˜å·¥å’Œå…½åŒ»è§’è‰²çš„è´¢åŠ¡æŸ¥çœ‹æƒé™ï¼ˆ`finance.view`ï¼‰ï¼Œä½¿è´¢åŠ¡æ•°æ®ä»…å¯¹ç®¡ç†å±‚ï¼ˆç»ç†ã€è¶…çº§ç®¡ç†å‘˜ï¼‰å¯è§ã€‚

## ğŸ¯ è°ƒæ•´å†…å®¹

### è°ƒæ•´å‰çš„æƒé™é…ç½®

```typescript
'employee': ['basic', 'production.view', 'health.view', 'finance.view']       // âŒ åŒ…å«è´¢åŠ¡æŸ¥çœ‹
'veterinarian': ['basic', 'production.view', 'health.view', 'health.manage', 'finance.view']  // âŒ åŒ…å«è´¢åŠ¡æŸ¥çœ‹
'manager': ['basic', 'production.view', 'production.manage', 'health.view', 'health.manage', 'finance.view', 'finance.manage', 'employee.view']
'super_admin': ['all']
```

### è°ƒæ•´åçš„æƒé™é…ç½®

```typescript
'employee': ['basic', 'production.view', 'health.view']       // âœ… ç§»é™¤è´¢åŠ¡æŸ¥çœ‹
'veterinarian': ['basic', 'production.view', 'health.view', 'health.manage']  // âœ… ç§»é™¤è´¢åŠ¡æŸ¥çœ‹
'manager': ['basic', 'production.view', 'production.manage', 'health.view', 'health.manage', 'finance.view', 'finance.manage', 'employee.view']
'super_admin': ['all']
```

## ğŸ“Š å„è§’è‰²æƒé™è¯¦æƒ…

### å‘˜å·¥ (employee)
**èŒè´£**ï¼šæ—¥å¸¸ç”Ÿäº§å’Œå¥åº·è®°å½•å·¥ä½œ

| æƒé™ | è¯´æ˜ |
|------|------|
| âœ… basic | åŸºç¡€åŠŸèƒ½è®¿é—® |
| âœ… production.view | æŸ¥çœ‹ç”Ÿäº§æ•°æ® |
| âœ… health.view | æŸ¥çœ‹å¥åº·æ•°æ® |
| âŒ finance.view | ~~æŸ¥çœ‹è´¢åŠ¡æ•°æ®~~ |

### å…½åŒ» (veterinarian)
**èŒè´£**ï¼šåŠ¨ç‰©å¥åº·è¯Šç–—ã€ç–«è‹—é˜²ç–«

| æƒé™ | è¯´æ˜ |
|------|------|
| âœ… basic | åŸºç¡€åŠŸèƒ½è®¿é—® |
| âœ… production.view | æŸ¥çœ‹ç”Ÿäº§æ•°æ® |
| âœ… health.view | æŸ¥çœ‹å¥åº·æ•°æ® |
| âœ… health.manage | ç®¡ç†å¥åº·æ•°æ® |
| âŒ finance.view | ~~æŸ¥çœ‹è´¢åŠ¡æ•°æ®~~ |

### ç»ç† (manager)
**èŒè´£**ï¼šæ•´ä½“ä¸šåŠ¡è¿è¥ç®¡ç†

| æƒé™ | è¯´æ˜ |
|------|------|
| âœ… basic | åŸºç¡€åŠŸèƒ½è®¿é—® |
| âœ… production.view | æŸ¥çœ‹ç”Ÿäº§æ•°æ® |
| âœ… production.manage | ç®¡ç†ç”Ÿäº§æ•°æ® |
| âœ… health.view | æŸ¥çœ‹å¥åº·æ•°æ® |
| âœ… health.manage | ç®¡ç†å¥åº·æ•°æ® |
| âœ… finance.view | æŸ¥çœ‹è´¢åŠ¡æ•°æ® â­ |
| âœ… finance.manage | ç®¡ç†è´¢åŠ¡æ•°æ® â­ |
| âœ… employee.view | æŸ¥çœ‹å‘˜å·¥ä¿¡æ¯ |

### è¶…çº§ç®¡ç†å‘˜ (super_admin)
**èŒè´£**ï¼šç³»ç»Ÿå…¨å±€ç®¡ç†

| æƒé™ | è¯´æ˜ |
|------|------|
| âœ… all | å…¨éƒ¨æƒé™ â­ |

## ğŸ” è°ƒæ•´åŸå› 

### 1. è´¢åŠ¡æ•°æ®æ•æ„Ÿæ€§
è´¢åŠ¡ä¿¡æ¯å±äºæ•æ„Ÿæ•°æ®ï¼ŒåŒ…æ‹¬ï¼š
- ğŸ’° æ”¶å…¥æ”¯å‡ºæ˜ç»†
- ğŸ“Š æˆæœ¬åˆ†ææŠ¥è¡¨
- ğŸ’µ åˆ©æ¶¦ç‡ç»Ÿè®¡
- ğŸ“ æŠ¥é”€å®¡æ‰¹è®°å½•

### 2. ä¸šåŠ¡åœºæ™¯åˆç†æ€§
æ ¹æ®å…»æ®–åœºå®é™…ä¸šåŠ¡åˆ†å·¥ï¼š
- **å‘˜å·¥**ï¼šä¸“æ³¨ç”Ÿäº§å’Œå¥åº·è®°å½•ï¼Œä¸æ¶‰åŠè´¢åŠ¡å†³ç­–
- **å…½åŒ»**ï¼šä¸“æ³¨å¥åº·è¯Šç–—ï¼Œä¸æ¶‰åŠè´¢åŠ¡ç®¡ç†
- **ç»ç†**ï¼šè´Ÿè´£æ•´ä½“è¿è¥ï¼Œéœ€è¦å®Œæ•´çš„è´¢åŠ¡æ•°æ®æ”¯æŒå†³ç­–

### 3. æƒé™å±‚çº§æ¸…æ™°
```
å‘˜å·¥ < å…½åŒ» < ç»ç† < è¶…çº§ç®¡ç†å‘˜
```
æƒé™é€’å¢ï¼Œå±‚çº§åˆ†æ˜ï¼Œä¾¿äºç®¡ç†å’Œç»´æŠ¤ã€‚

## âœ… ä¿®æ”¹çš„æ–‡ä»¶

1. **miniprogram/packageUser/user-management/user-management.ts**
   - ä¿®æ”¹ `rolePermissionsMap` å¯¹è±¡
   - ç§»é™¤å‘˜å·¥å’Œå…½åŒ»çš„ `finance.view` æƒé™

2. **miniprogram/utils/permission.ts**
   - ä¿®æ”¹ `ROLE_PERMISSIONS` å¯¹è±¡
   - åŒæ­¥æ›´æ–°æƒé™é…ç½®

3. **ç”¨æˆ·ç®¡ç†å¼¹çª—ä¼˜åŒ–è¯´æ˜.md**
   - æ›´æ–°æƒé™è¯´æ˜æ–‡æ¡£
   - æ·»åŠ æƒé™è°ƒæ•´è¯´æ˜

## ğŸ¯ å¯¹ç³»ç»Ÿçš„å½±å“

### âœ… æ— å½±å“é¡¹
- **UIæ˜¾ç¤º**ï¼šä¸ªäººä¸­å¿ƒçš„"è´¢åŠ¡ç®¡ç†"å…¥å£æœ¬æ¥å°±åªå¯¹ç®¡ç†å‘˜å¯è§
- **ç°æœ‰åŠŸèƒ½**ï¼šä¸å½±å“ä»»ä½•ç°æœ‰åŠŸèƒ½çš„æ­£å¸¸ä½¿ç”¨
- **ç”¨æˆ·ä½“éªŒ**ï¼šå‘˜å·¥å’Œå…½åŒ»ç”¨æˆ·æ„ŸçŸ¥ä¸åˆ°å˜åŒ–

### âœ… æå‡é¡¹
- **å®‰å…¨æ€§æå‡**ï¼šè´¢åŠ¡æ•°æ®è®¿é—®æ§åˆ¶æ›´ä¸¥æ ¼
- **æƒé™ä¸€è‡´æ€§**ï¼šæƒé™å®šä¹‰ä¸UIæ˜¾ç¤ºå®Œå…¨ä¸€è‡´
- **å¤šå±‚é˜²æŠ¤**ï¼šå‰ç«¯UI + åç«¯æƒé™æ£€æŸ¥åŒé‡ä¿æŠ¤

## ğŸ§ª æµ‹è¯•éªŒè¯

### åœ¨ç”¨æˆ·ç®¡ç†å¼¹çª—ä¸­éªŒè¯

1. **é€‰æ‹©"å‘˜å·¥"è§’è‰²**
   - æƒé™åˆ—è¡¨åº”æ˜¾ç¤ºï¼šåŸºç¡€æƒé™ã€æŸ¥çœ‹ç”Ÿäº§ã€æŸ¥çœ‹å¥åº·
   - âŒ ä¸åº”åŒ…å«ä»»ä½•è´¢åŠ¡ç›¸å…³æƒé™

2. **é€‰æ‹©"å…½åŒ»"è§’è‰²**
   - æƒé™åˆ—è¡¨åº”æ˜¾ç¤ºï¼šåŸºç¡€æƒé™ã€æŸ¥çœ‹ç”Ÿäº§ã€æŸ¥çœ‹å¥åº·ã€ç®¡ç†å¥åº·
   - âŒ ä¸åº”åŒ…å«ä»»ä½•è´¢åŠ¡ç›¸å…³æƒé™

3. **é€‰æ‹©"ç»ç†"è§’è‰²**
   - æƒé™åˆ—è¡¨åº”æ˜¾ç¤ºï¼šæ‰€æœ‰ä¸šåŠ¡æƒé™
   - âœ… åº”åŒ…å«æŸ¥çœ‹è´¢åŠ¡ã€ç®¡ç†è´¢åŠ¡

4. **é€‰æ‹©"è¶…çº§ç®¡ç†å‘˜"è§’è‰²**
   - æƒé™åˆ—è¡¨åº”æ˜¾ç¤ºï¼šå…¨éƒ¨æƒé™
   - âœ… åŒ…å«æ‰€æœ‰åŠŸèƒ½

### åŠŸèƒ½æµ‹è¯•

1. **å‘˜å·¥ç”¨æˆ·ç™»å½•**
   - ä¸ªäººä¸­å¿ƒä¸æ˜¾ç¤º"è´¢åŠ¡ç®¡ç†"å…¥å£ âœ…
   - å°è¯•ç›´æ¥è®¿é—®è´¢åŠ¡é¡µé¢ä¼šè¢«æ‹’ç» âœ…

2. **å…½åŒ»ç”¨æˆ·ç™»å½•**
   - ä¸ªäººä¸­å¿ƒä¸æ˜¾ç¤º"è´¢åŠ¡ç®¡ç†"å…¥å£ âœ…
   - å¯ä»¥æ­£å¸¸ç®¡ç†å¥åº·æ•°æ® âœ…

3. **ç»ç†ç”¨æˆ·ç™»å½•**
   - ä¸ªäººä¸­å¿ƒæ˜¾ç¤º"è´¢åŠ¡ç®¡ç†"å…¥å£ âœ…
   - å¯ä»¥æ­£å¸¸æŸ¥çœ‹å’Œç®¡ç†è´¢åŠ¡æ•°æ® âœ…

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **å·²å­˜åœ¨çš„ç”¨æˆ·**ï¼šéœ€è¦é‡æ–°ç™»å½•æˆ–åˆ·æ–°æƒé™æ‰èƒ½ç”Ÿæ•ˆ
2. **äº‘å‡½æ•°æƒé™**ï¼šå¦‚æœäº‘å‡½æ•°æœ‰æƒé™æ£€æŸ¥ï¼Œéœ€è¦ç¡®ä¿ä¸å‰ç«¯é…ç½®ä¸€è‡´
3. **è§’è‰²ä¿®æ”¹**ï¼šåœ¨ç”¨æˆ·ç®¡ç†ä¸­ä¿®æ”¹ç”¨æˆ·è§’è‰²æ—¶ï¼Œæ–°æƒé™ä¼šç«‹å³ç”Ÿæ•ˆ

## ğŸš€ éƒ¨ç½²å»ºè®®

1. **ç¼–è¯‘å°ç¨‹åº**ï¼šç¡®ä¿ä¿®æ”¹ç”Ÿæ•ˆ
2. **æ¸…é™¤ç¼“å­˜**ï¼šå»ºè®®æ¸…é™¤æœ¬åœ°ç¼“å­˜åæµ‹è¯•
3. **çœŸæœºæµ‹è¯•**ï¼šåœ¨çœŸæœºä¸ŠéªŒè¯æƒé™æ§åˆ¶
4. **é€šçŸ¥ç”¨æˆ·**ï¼šå¦‚æœ‰å¿…è¦ï¼Œé€šçŸ¥ç®¡ç†å‘˜æƒé™è°ƒæ•´æƒ…å†µ

---

**è°ƒæ•´å®Œæˆ** âœ…  
è´¢åŠ¡æƒé™ç°åœ¨ä»…å¯¹ç®¡ç†å±‚ï¼ˆç»ç†ã€è¶…çº§ç®¡ç†å‘˜ï¼‰å¼€æ”¾ï¼Œæå‡äº†ç³»ç»Ÿçš„å®‰å…¨æ€§å’Œæƒé™ç®¡ç†çš„åˆç†æ€§ã€‚

